<!DOCTYPE html><html><head><title>Main.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../index.html" class="source"><span class="file_name">README</span></a><a href="../js/Main.js.html" class="source selected"><span class="base_path">js / </span><span class="file_name">Main.js</span></a><a href="../js/PlayerInfo.js.html" class="source "><span class="base_path">js / </span><span class="file_name">PlayerInfo.js</span></a><a href="../js/config.js.html" class="source "><span class="base_path">js / </span><span class="file_name">config.js</span></a><a href="../js/display/graph/GraphElement.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">GraphElement.js</span></a><a href="../js/display/graph/PoolGraph.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">PoolGraph.js</span></a><a href="../js/display/graph/Symbol.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">Symbol.js</span></a><a href="../js/display/scene/BaseScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">BaseScene.js</span></a><a href="../js/display/scene/GameScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">GameScene.js</span></a><a href="../js/display/scene/SplashScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">SplashScene.js</span></a><a href="../js/display/ui/common/Button.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Button.js</span></a><a href="../js/display/ui/common/Logo.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Logo.js</span></a><a href="../js/display/ui/common/Menu.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Menu.js</span></a><a href="../js/display/ui/game/CircleSwipe.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">CircleSwipe.js</span></a><a href="../js/display/ui/game/Match.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">Match.js</span></a><a href="../js/display/ui/game/MatchContainer.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">MatchContainer.js</span></a><a href="../js/display/ui/game/Stat.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">Stat.js</span></a><a href="../js/i18n/translate.js.html" class="source "><span class="base_path">js / i18n / </span><span class="file_name">translate.js</span></a><a href="../js/lib/cocoon-3.0.5/cocoon.js.html" class="source "><span class="base_path">js / lib / cocoon-3.0.5 / </span><span class="file_name">cocoon.js</span></a><a href="../js/lib/pixi-1.6/pixi.dev.js.html" class="source "><span class="base_path">js / lib / pixi-1.6 / </span><span class="file_name">pixi.dev.js</span></a><a href="../js/lib/stats.min.js.html" class="source "><span class="base_path">js / lib / </span><span class="file_name">stats.min.js</span></a><a href="../js/lib/tweenmax/BezierEasing.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">BezierEasing.js</span></a><a href="../js/lib/tweenmax/ColorPropsPlugin.min.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">ColorPropsPlugin.min.js</span></a><a href="../js/lib/tweenmax/TweenMax.min.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">TweenMax.min.js</span></a><a href="../js/mobile/GameCenter.js.html" class="source "><span class="base_path">js / mobile / </span><span class="file_name">GameCenter.js</span></a><a href="../js/mobile/Store.js.html" class="source "><span class="base_path">js / mobile / </span><span class="file_name">Store.js</span></a><a href="../js/util/common/Color.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Color.js</span></a><a href="../js/util/common/Math2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Math2.js</span></a><a href="../js/util/common/Object2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Object2.js</span></a><a href="../js/util/common/String2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">String2.js</span></a><a href="../js/util/control/Swipe.js.html" class="source "><span class="base_path">js / util / control / </span><span class="file_name">Swipe.js</span></a><a href="../js/util/display/DisplayObject.js.html" class="source "><span class="base_path">js / util / display / </span><span class="file_name">DisplayObject.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>Main.js</h1><div class="filepath">js/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><h1>Main class</h1>

<p>The main class is the entry point of the application
A <em>canvas</em> will be created.
A <em>stage</em> instance will handle each draws on the canvas.
He will also enable <em>ads</em>, <em>in-app</em> and <em>game center</em>.</p>
</td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">exports</span><span class="p">){</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><h1>Constructor</h1>

<p>First, we create a global stage accessible with CS.stage. It can be usefull if you want to draw directly into the stage.
Then we let PIXI detect the possible render (webGL or 2d context fallback).
Next we resize the newly canvas and initialize the mobile stuff.
Finally, we load images and musics and we wait for the ready function to be called.</p>
</td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">Main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">notifQueue</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">exports</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">(</span><span class="mh">0xFFFFFF</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">autoDetectRenderer</span><span class="p">(</span><span class="nx">CS</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">resize</span><span class="p">();</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">isCocoonJS</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">onresize</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">resize</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">view</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">initPlayer</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">initMobile</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">loadAssets</span><span class="p">();</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><h2>Resize</h2>

<p>Adapt the canvas to the screen device</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

  <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>


  <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>  <span class="c1">// Adapte le canvas a la hauteur du screen</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span>  <span class="o">=</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span> <span class="c1">// Adapte le canvas a la largeur du screen</span>

  <span class="kd">var</span> <span class="nx">ratio</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">/</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">newWidth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">ratio</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">newWidth</span><span class="p">,</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

  <span class="nx">CS</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">newWidth</span><span class="p">;</span>
  <span class="nx">CS</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
  <span class="nx">CS</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="nx">ratio</span><span class="p">;</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><h2>Update</h2>

<p>Redraw the stage every X ms.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">stage</span><span class="p">);</span>
  <span class="nx">requestAnimFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><h2>Ready</h2>

<p>Create a pool which will be responsible to generate 5 symbols each level/match.
Launch the SplashScrene and call the launchGame function when every splash has been shown.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nx">CS</span><span class="p">.</span><span class="nx">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Graph</span><span class="p">.</span><span class="nx">PoolGraph</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">splashScene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scene</span><span class="p">.</span><span class="nx">SplashScene</span><span class="p">();</span>
  <span class="nx">splashScene</span><span class="p">.</span><span class="nx">onEnd</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">launchGame</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="nx">splashScene</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><h2>LaunchGame</h2>

<p>Create a GameScene and start it</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">launchGame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gameScene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scene</span><span class="p">.</span><span class="nx">GameScene</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gameScene</span><span class="p">.</span><span class="nx">onRestartSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">launchGame</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gameScene</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><h2>LoadAssets</h2>

<p>Load every asset defined in CS.manifest (<em>js/config.js</em>) and call the ready function when everything is complete.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">loadAssets</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sprite loading&#39;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">(</span><span class="nx">CS</span><span class="p">.</span><span class="nx">manifest</span><span class="p">);</span>
  <span class="nx">loader</span><span class="p">.</span><span class="nx">onComplete</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ready</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><h2>initPlayer</h2>

<p>There is clearly nothing to do.
We are just adding a new callback which will show a banner on a new achievement event.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initPlayer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">CS</span><span class="p">.</span><span class="nx">PlayerInfo</span><span class="p">.</span><span class="nx">onNewAchievement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">achievementID</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;onnewachievement&#39;</span><span class="p">,</span> <span class="nx">achievementID</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">ref</span> <span class="o">=</span> <span class="nx">Mobile</span><span class="p">.</span><span class="nx">GameCenter</span><span class="p">.</span><span class="nx">getAchievement</span><span class="p">(</span><span class="nx">achievementID</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">ref</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">addNotification</span><span class="p">({</span>
      <span class="nx">sprite</span><span class="o">:</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromImage</span><span class="p">(</span><span class="s2">&quot;resources/achievements/&quot;</span><span class="o">+</span><span class="nx">achievementID</span><span class="o">+</span><span class="s2">&quot;.jpg&quot;</span><span class="p">)),</span>
      <span class="nx">title</span><span class="o">:</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
      <span class="nx">description</span><span class="o">:</span> <span class="nx">ref</span><span class="p">.</span><span class="nx">description</span>
    <span class="p">});</span>


  <span class="p">}</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><h2>InitMobile</h2>

<p>It's the <em>tricky part</em>.
First we force the user to be connect to the GameCenter.
Then we look for the product purshased to hide the "no ads" button (if the current scene is the game scene)
This is also hide automatically the button when you actually purchased the in-app.
Then we try to loads some ads. CocoonJS handle their placement with your mopub configuration. The setInterval is used to
accelerate the process as some request may be very slow or even lost. This interval is clear on the first response.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initMobile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="nx">Mobile</span><span class="p">.</span><span class="nx">GameCenter</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">removeAdsId</span> <span class="o">=</span> <span class="s1">&#39;com.3dduo.coloredshapes.removeads&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">shopReady</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">adReady</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">showBannerFct</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">shopReady</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">test</span> <span class="o">||</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">show</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">setBannerLayout</span><span class="p">(</span><span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">BannerLayout</span><span class="p">.</span><span class="nx">BOTTOM_CENTER</span><span class="p">);</span>
      <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">showBanner</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">GS</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">GS</span><span class="p">.</span><span class="nx">open</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">GS</span><span class="p">.</span><span class="nx">refreshAdsBtn</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">loadBannerAccel</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">loadBannerAccel</span><span class="p">);</span>
      <span class="nx">loadBannerAccel</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">stopAds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;stopAds&#39;</span><span class="p">);</span>
    <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">show</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">hideBanner</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">GS</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">GS</span><span class="p">.</span><span class="nx">open</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">GS</span><span class="p">.</span><span class="nx">refreshAdsBtn</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">}</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>Initialize and start the store</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">Mobile</span><span class="p">.</span><span class="nx">Store</span><span class="p">.</span><span class="nx">init</span><span class="p">([</span><span class="nx">removeAdsId</span><span class="p">],</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">shopReady</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Store</span><span class="p">.</span><span class="nx">isProductPurchased</span><span class="p">(</span><span class="nx">removeAdsId</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">stopAds</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">GS</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">GS</span><span class="p">.</span><span class="nx">open</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">GS</span><span class="p">.</span><span class="nx">refreshAdsBtn</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">showBannerFct</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">productId</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">productId</span> <span class="o">==</span> <span class="nx">removeAdsId</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">CS</span><span class="p">.</span><span class="nx">PlayerInfo</span><span class="p">.</span><span class="nx">unlockAchievement</span><span class="p">(</span><span class="nx">removeAdsId</span><span class="p">);</span>
      <span class="nx">stopAds</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">});</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><p>We are now trying to handle the ads which can be a banner or an interstitial</p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">loadBannerAccel</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">loadInterstitialAccel</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">banner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;shown&quot;</span> <span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Banner shown!&quot;</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">banner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;ready&quot;</span> <span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39; =====&gt; ad ready &lt;=====&#39;</span><span class="p">);</span>
    <span class="nx">adReady</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">showBannerFct</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">interstitial</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;ready&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">interstitial</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Interstitial ready to use&#39;</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">loadInterstitialAccel</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">loadInterstitialAccel</span><span class="p">);</span>
      <span class="nx">loadInterstitialAccel</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">GS</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">GS</span><span class="p">.</span><span class="nx">open</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">GS</span><span class="p">.</span><span class="nx">refreshAdsBtn</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">test</span> <span class="o">||</span> <span class="nx">CS</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">ads</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;loadBanner&#39;</span><span class="p">);</span>
    <span class="nx">loadBannerAccel</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">loadBanner</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
    <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">loadBanner</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;loadInterstital&#39;</span><span class="p">);</span>
    <span class="nx">loadInterstitialAccel</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">loadInterstitial</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
    <span class="nx">Cocoon</span><span class="p">.</span><span class="nx">Ad</span><span class="p">.</span><span class="nx">loadInterstitial</span><span class="p">();</span>
  <span class="p">}</span>


<span class="p">}</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><h2>AddNotification</h2>

<p>Add a notification to the notifQueue and launch it (if possible).
A notification is a banner display on the header of the application. Actually, this is just used by the new achievement handler.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addNotification</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">stage</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">exports</span><span class="p">.</span><span class="nx">stage</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">notifQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">notif</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">bgIco</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromFrame</span><span class="p">(</span><span class="s1">&#39;resources/ach_banner.png&#39;</span><span class="p">));</span>
    <span class="nx">bgIco</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mf">1.3</span><span class="p">;</span>
    <span class="nx">bgIco</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">bgIco</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nx">notif</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">~~</span><span class="p">(</span><span class="nx">CS</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">bgIco</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="nx">notif</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">bgIco</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">ico</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">sprite</span><span class="p">;</span>
    <span class="nx">ico</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>
    <span class="nx">ico</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>
    <span class="nx">ico</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="nx">ico</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">(),</span> <span class="p">{</span> <span class="nx">font</span><span class="o">:</span> <span class="s2">&quot;36px VeraBd&quot;</span> <span class="p">});</span>
    <span class="nx">title</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">~~</span><span class="p">(</span><span class="nx">bgIco</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">title</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">65</span><span class="p">;</span>
    <span class="nx">title</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">capitalize</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">o</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">description</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">(</span><span class="nx">capitalize</span><span class="p">,</span> <span class="p">{</span> <span class="nx">font</span><span class="o">:</span> <span class="s2">&quot;30px VeraBd&quot;</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span> <span class="mh">0x000000</span> <span class="p">});</span>
    <span class="nx">description</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">~~</span><span class="p">(</span><span class="nx">bgIco</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">description</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">65</span><span class="p">;</span>
    <span class="nx">description</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>


    <span class="nx">notif</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">bgIco</span><span class="p">);</span>
    <span class="nx">notif</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">ico</span><span class="p">);</span>

    <span class="nx">notif</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
    <span class="nx">notif</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">description</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">sceneId</span> <span class="o">=</span> <span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>


    <span class="nx">notif</span><span class="p">.</span><span class="nx">interactive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">notif</span><span class="p">.</span><span class="nx">mousedown</span> <span class="o">=</span> <span class="nx">notif</span><span class="p">.</span><span class="nx">touchdown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">notif</span><span class="p">.</span><span class="nx">interactive</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">TweenMax</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">notif</span><span class="p">.</span><span class="nx">position</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="p">{</span><span class="nx">y</span><span class="o">:</span> <span class="o">-</span><span class="nx">notif</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">onComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">sceneId</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">notif</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">_launchNotification</span><span class="p">();</span>
      <span class="p">}});</span>
    <span class="p">};</span>

    <span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">notif</span><span class="p">);</span>



    <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimelineMax</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">notif</span><span class="p">.</span><span class="nx">position</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="p">{</span><span class="nx">y</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">ease</span><span class="o">:</span> <span class="nx">Bounce</span><span class="p">.</span><span class="nx">easeOut</span><span class="p">});</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">notif</span><span class="p">.</span><span class="nx">position</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="p">{</span><span class="nx">y</span><span class="o">:-</span><span class="nx">notif</span><span class="p">.</span><span class="nx">height</span><span class="p">},</span> <span class="s1">&#39;+=1.7&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">sceneId</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Scene</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">notif</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">_launchNotification</span><span class="p">();</span>
    <span class="p">});</span>


  <span class="p">});</span>

  <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">notifQueue</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">tlNotif</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_launchNotification</span><span class="p">();</span>
  <span class="p">}</span>


<span class="p">}</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><h2>LaunchNotification</h2>

<p>Launch the first notication and release it from the notifQueue</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">Main</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_launchNotification</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">notifQueue</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">notifQueue</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="nx">f</span><span class="p">();</span>

<span class="p">}</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">Main</span> <span class="o">=</span> <span class="nx">Main</span><span class="p">;</span>

<span class="p">})(</span><span class="nb">window</span><span class="p">.</span><span class="nx">CS</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">CS</span> <span class="o">||</span> <span class="p">{})</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Dec 15 2014 18:42:08 GMT+0100 (CET)  </div></div></body></html>