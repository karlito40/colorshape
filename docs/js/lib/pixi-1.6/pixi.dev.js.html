<!DOCTYPE html><html><head><title>pixi.dev.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../js/Main.js.html" class="source "><span class="base_path">js / </span><span class="file_name">Main.js</span></a><a href="../../../js/PlayerInfo.js.html" class="source "><span class="base_path">js / </span><span class="file_name">PlayerInfo.js</span></a><a href="../../../js/config.js.html" class="source "><span class="base_path">js / </span><span class="file_name">config.js</span></a><a href="../../../js/display/graph/GraphElement.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">GraphElement.js</span></a><a href="../../../js/display/graph/PoolGraph.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">PoolGraph.js</span></a><a href="../../../js/display/graph/Symbol.js.html" class="source "><span class="base_path">js / display / graph / </span><span class="file_name">Symbol.js</span></a><a href="../../../js/display/scene/BaseScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">BaseScene.js</span></a><a href="../../../js/display/scene/GameScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">GameScene.js</span></a><a href="../../../js/display/scene/SplashScene.js.html" class="source "><span class="base_path">js / display / scene / </span><span class="file_name">SplashScene.js</span></a><a href="../../../js/display/ui/common/Button.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Button.js</span></a><a href="../../../js/display/ui/common/Logo.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Logo.js</span></a><a href="../../../js/display/ui/common/Menu.js.html" class="source "><span class="base_path">js / display / ui / common / </span><span class="file_name">Menu.js</span></a><a href="../../../js/display/ui/game/CircleSwipe.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">CircleSwipe.js</span></a><a href="../../../js/display/ui/game/Match.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">Match.js</span></a><a href="../../../js/display/ui/game/MatchContainer.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">MatchContainer.js</span></a><a href="../../../js/display/ui/game/Stat.js.html" class="source "><span class="base_path">js / display / ui / game / </span><span class="file_name">Stat.js</span></a><a href="../../../js/i18n/translate.js.html" class="source "><span class="base_path">js / i18n / </span><span class="file_name">translate.js</span></a><a href="../../../js/lib/cocoon-3.0.5/cocoon.js.html" class="source "><span class="base_path">js / lib / cocoon-3.0.5 / </span><span class="file_name">cocoon.js</span></a><a href="../../../js/lib/pixi-1.6/pixi.dev.js.html" class="source selected"><span class="base_path">js / lib / pixi-1.6 / </span><span class="file_name">pixi.dev.js</span></a><a href="../../../js/lib/stats.min.js.html" class="source "><span class="base_path">js / lib / </span><span class="file_name">stats.min.js</span></a><a href="../../../js/lib/tweenmax/BezierEasing.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">BezierEasing.js</span></a><a href="../../../js/lib/tweenmax/ColorPropsPlugin.min.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">ColorPropsPlugin.min.js</span></a><a href="../../../js/lib/tweenmax/TweenMax.min.js.html" class="source "><span class="base_path">js / lib / tweenmax / </span><span class="file_name">TweenMax.min.js</span></a><a href="../../../js/mobile/GameCenter.js.html" class="source "><span class="base_path">js / mobile / </span><span class="file_name">GameCenter.js</span></a><a href="../../../js/mobile/Store.js.html" class="source "><span class="base_path">js / mobile / </span><span class="file_name">Store.js</span></a><a href="../../../js/util/common/Color.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Color.js</span></a><a href="../../../js/util/common/Math2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Math2.js</span></a><a href="../../../js/util/common/Object2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">Object2.js</span></a><a href="../../../js/util/common/String2.js.html" class="source "><span class="base_path">js / util / common / </span><span class="file_name">String2.js</span></a><a href="../../../js/util/control/Swipe.js.html" class="source "><span class="base_path">js / util / control / </span><span class="file_name">Swipe.js</span></a><a href="../../../js/util/display/DisplayObject.js.html" class="source "><span class="base_path">js / util / display / </span><span class="file_name">DisplayObject.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>pixi.dev.js</h1><div class="filepath">js/lib/pixi-1.6/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@license<br />pixi.js - v1.6.0<br />Copyright (c) 2012-2014, Mat Groves<br /><a href='http://goodboydigital.com/'>http://goodboydigital.com/</a></p></div><div class="body"><p>Compiled: 2014-07-18</p>

<p>pixi.js is licensed under the MIT License.<br /><a href='http://www.opensource.org/licenses/mit-license.php'>http://www.opensource.org/licenses/mit-license.php</a></p></div></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@module PIXI</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">PIXI</span> <span class="o">=</span> <span class="nx">PIXI</span> <span class="o">||</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This file contains a lot of pixi consts which are used across the rendering engine</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WEBGL_RENDERER</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CANVAS_RENDERER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>useful for testing against if your lib is using pixi.</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">=</span> <span class="s2">&quot;v1.6.1&quot;</span><span class="p">;</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>the various blend modes supported by pixi</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">NORMAL</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">ADD</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="nx">MULTIPLY</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="nx">SCREEN</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
    <span class="nx">OVERLAY</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span>
    <span class="nx">DARKEN</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span>
    <span class="nx">LIGHTEN</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span>
    <span class="nx">COLOR_DODGE</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span>
    <span class="nx">COLOR_BURN</span><span class="o">:</span><span class="mi">8</span><span class="p">,</span>
    <span class="nx">HARD_LIGHT</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span>
    <span class="nx">SOFT_LIGHT</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="nx">DIFFERENCE</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span>
    <span class="nx">EXCLUSION</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span>
    <span class="nx">HUE</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span>
    <span class="nx">SATURATION</span><span class="o">:</span><span class="mi">14</span><span class="p">,</span>
    <span class="nx">COLOR</span><span class="o">:</span><span class="mi">15</span><span class="p">,</span>
    <span class="nx">LUMINOSITY</span><span class="o">:</span><span class="mi">16</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>the scale modes</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">DEFAULT</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">LINEAR</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">NEAREST</span><span class="o">:</span><span class="mi">1</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>used to create uids for various pixi objects..</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">Float32Array</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span> <span class="o">=</span> <span class="nx">Float32Array</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Uint16Array</span> <span class="o">=</span> <span class="nx">Uint16Array</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Uint16Array</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">;</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>interaction frequency</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">INTERACTION_FREQUENCY</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">AUTO_PREVENT_DEFAULT</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RAD_TO_DEG</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DEG_TO_RAD</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">dontSayHello</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">sayHello</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">dontSayHello</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;chrome&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;%c %c %c Pixi.js &#39;</span> <span class="o">+</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span> <span class="s1">&#39;  %c &#39;</span> <span class="o">+</span> <span class="s1">&#39; %c &#39;</span> <span class="o">+</span> <span class="s1">&#39; http://www.pixijs.com/  %c %c ♥%c♥%c♥ &#39;</span><span class="p">,</span>
            <span class="s1">&#39;background: #ff66a5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;background: #ff66a5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color: #ff66a5; background: #030307;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;background: #ff66a5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;background: #ffc3dc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;background: #ff66a5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color: #ff2424; background: #fff&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color: #ff2424; background: #fff&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color: #ff2424; background: #fff&#39;</span>
        <span class="p">];</span>



        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="s1">&#39;console&#39;</span><span class="p">])</span>
    <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Pixi.js &#39;</span> <span class="o">+</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">+</span> <span class="s1">&#39; - http://www.pixijs.com/&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">dontSayHello</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Point object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- position of the point on the x axis</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- position of the point on the y axis</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property x</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property y</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a clone of this point</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Point</span><span>a copy of the point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the point to a new x and y position.<br />If y is ommited, both x and y will be set to x.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[x=0]</span><span>- position of the point on the x axis</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[y=0]</span><span>- position of the point on the y axis</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="p">(</span> <span class="p">(</span><span class="nx">y</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">;</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the Rectangle object is an area defined by its position, as indicated by its top-left corner point (x, y) and by its width and its height.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coord of the upper-left corner of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coord of the upper-left corner of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The overall width of this rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The overall height of this rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property x</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property y</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property width</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property height</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a clone of this Rectangle</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>a copy of the rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether the x and y coordinates passed to this function are contained within this Rectangle</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the point to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>Whether the x/y coords are within this Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">x1</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">x1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">y1</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;=</span> <span class="nx">y1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">EmptyRectangle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Adrien Brault <a href="&#109;a&#105;&#x6C;&#x74;&#111;:&#97;d&#114;i&#101;&#110;&#x2E;&#x62;&#x72;&#x61;&#117;&#108;&#x74;&#x40;&#x67;&#109;&#97;&#x69;&#x6C;&#46;&#99;&#111;&#109;">&#97;d&#114;i&#101;&#110;&#x2E;&#x62;&#x72;&#x61;&#117;&#108;&#x74;&#x40;&#x67;&#109;&#97;&#x69;&#x6C;&#46;&#99;&#111;&#109;</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class Polygon</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array&lt;Point&gt;|Array&lt;Number&gt;|Point...|Number...} </span><span class="dox_type">points*</span><span>- This can be an array of Points that form the polygon,</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-28"><td class="docs"><div class="pilwrap"><a href="#section-28" class="pilcrow">&#182;</a></div><p>if points isn't an array, use arguments as the array</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">points</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">))</span>
        <span class="nx">points</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span></pre></div></td></tr><tr id="section-29"><td class="docs"><div class="pilwrap"><a href="#section-29" class="pilcrow">&#182;</a></div><p>if this is a flat array of numbers, convert it to points</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">il</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">il</span><span class="p">;</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">points</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">points</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-30"><td class="docs"><div class="pilwrap"><a href="#section-30" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a clone of this polygon</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Polygon</span><span>a copy of the polygon</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">clone</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-31"><td class="docs"><div class="pilwrap"><a href="#section-31" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether the x and y coordinates passed to this function are contained within this polygon</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the point to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>Whether the x/y coordinates are within this polygon</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">inside</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-32"><td class="docs"><div class="pilwrap"><a href="#section-32" class="pilcrow">&#182;</a></div><p>use some raycasting to test hits
https://github.com/substack/point-in-polygon/blob/master/index.js</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">xi</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">yi</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">xj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">yj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">intersect</span> <span class="o">=</span> <span class="p">((</span><span class="nx">yi</span> <span class="o">&gt;</span> <span class="nx">y</span><span class="p">)</span> <span class="o">!==</span> <span class="p">(</span><span class="nx">yj</span> <span class="o">&gt;</span> <span class="nx">y</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">xj</span> <span class="o">-</span> <span class="nx">xi</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">yi</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">yj</span> <span class="o">-</span> <span class="nx">yi</span><span class="p">)</span> <span class="o">+</span> <span class="nx">xi</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">intersect</span><span class="p">)</span> <span class="nx">inside</span> <span class="o">=</span> <span class="o">!</span><span class="nx">inside</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">inside</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-33"><td class="docs"><div class="pilwrap"><a href="#section-33" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">;</span></pre></div></td></tr><tr id="section-34"><td class="docs"><div class="pilwrap"><a href="#section-34" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Chad Engler <a href="&#109;&#97;&#x69;&#108;&#116;&#111;:&#x63;&#x68;&#x61;&#x64;&#x40;&#x70;&#97;&#110;&#x74;&#104;&#x65;r&#x64;&#101;&#x76;&#x2E;&#x63;&#x6F;&#109;">&#x63;&#x68;&#x61;&#x64;&#x40;&#x70;&#97;&#110;&#x74;&#104;&#x65;r&#x64;&#101;&#x76;&#x2E;&#x63;&#x6F;&#109;</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-35"><td class="docs"><div class="pilwrap"><a href="#section-35" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Circle object can be used to specify a hit area for displayObjects</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the center of this circle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the center of this circle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">radius</span><span>- The radius of the circle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-36"><td class="docs"><div class="pilwrap"><a href="#section-36" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property x</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-37"><td class="docs"><div class="pilwrap"><a href="#section-37" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property y</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-38"><td class="docs"><div class="pilwrap"><a href="#section-38" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property radius</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">radius</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-39"><td class="docs"><div class="pilwrap"><a href="#section-39" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a clone of this Circle instance</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Circle</span><span>a copy of the polygon</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">radius</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-40"><td class="docs"><div class="pilwrap"><a href="#section-40" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether the x, and y coordinates passed to this function are contained within this circle</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the point to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>Whether the x/y coordinates are within this polygon</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">radius</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">x</span><span class="p">),</span>
        <span class="nx">dy</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">y</span><span class="p">),</span>
        <span class="nx">r2</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">radius</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>

    <span class="nx">dx</span> <span class="o">*=</span> <span class="nx">dx</span><span class="p">;</span>
    <span class="nx">dy</span> <span class="o">*=</span> <span class="nx">dy</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">&lt;=</span> <span class="nx">r2</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-41"><td class="docs"><div class="pilwrap"><a href="#section-41" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the framing rectangle of the circle as a PIXI.Rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the framing rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-42"><td class="docs"><div class="pilwrap"><a href="#section-42" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Circle</span><span class="p">;</span></pre></div></td></tr><tr id="section-43"><td class="docs"><div class="pilwrap"><a href="#section-43" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Chad Engler <a href="&#109;&#97;&#105;&#108;&#116;&#111;:c&#x68;&#97;&#x64;&#x40;&#112;&#97;&#x6E;&#116;he&#x72;&#100;&#101;&#118;&#x2E;&#99;o&#x6D;">c&#x68;&#97;&#x64;&#x40;&#112;&#97;&#x6E;&#116;he&#x72;&#100;&#101;&#118;&#x2E;&#99;o&#x6D;</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-44"><td class="docs"><div class="pilwrap"><a href="#section-44" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Ellipse object can be used to specify a hit area for displayObjects</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the center of the ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the center of the ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The half width of this ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The half height of this ellipse</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-45"><td class="docs"><div class="pilwrap"><a href="#section-45" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property x</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-46"><td class="docs"><div class="pilwrap"><a href="#section-46" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property y</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-47"><td class="docs"><div class="pilwrap"><a href="#section-47" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property width</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-48"><td class="docs"><div class="pilwrap"><a href="#section-48" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property height</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-49"><td class="docs"><div class="pilwrap"><a href="#section-49" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a clone of this Ellipse instance</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Ellipse</span><span>a copy of the ellipse</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-50"><td class="docs"><div class="pilwrap"><a href="#section-50" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether the x and y coordinates passed to this function are contained within this ellipse</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the point to test</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>Whether the x/y coords are within this ellipse</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-51"><td class="docs"><div class="pilwrap"><a href="#section-51" class="pilcrow">&#182;</a></div><p>normalize the coords to an ellipse with center 0,0</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">normx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">),</span>
        <span class="nx">normy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">normx</span> <span class="o">*=</span> <span class="nx">normx</span><span class="p">;</span>
    <span class="nx">normy</span> <span class="o">*=</span> <span class="nx">normy</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span><span class="nx">normx</span> <span class="o">+</span> <span class="nx">normy</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-52"><td class="docs"><div class="pilwrap"><a href="#section-52" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the framing rectangle of the ellipse as a PIXI.Rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the framing rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-53"><td class="docs"><div class="pilwrap"><a href="#section-53" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Ellipse</span><span class="p">;</span></pre></div></td></tr><tr id="section-54"><td class="docs"><div class="pilwrap"><a href="#section-54" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-55"><td class="docs"><div class="pilwrap"><a href="#section-55" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Matrix class is now an object, which makes it a lot faster,</p>

<h2>here is a representation of it</h2>

<p>| a | b | tx|<br />| c | d | ty|<br />| 0 | 0 | 1 |</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-56"><td class="docs"><div class="pilwrap"><a href="#section-56" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a pixi matrix object based on the array given as a parameter</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">array</span><span>- The array that the matrix will be filled with</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fromArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-57"><td class="docs"><div class="pilwrap"><a href="#section-57" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates an array from the current Matrix object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">transpose</span><span>- Whether we need to transpose the matrix or not</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Array</span><span>the newly created array which contains the matrix</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transpose</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">array</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">array</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">array</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">transpose</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">array</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">identityMatrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">determineMatrixArrayType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Float32Array</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Float32Array</span> <span class="o">:</span> <span class="nb">Array</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-58"><td class="docs"><div class="pilwrap"><a href="#section-58" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Matrix2 class will choose the best type of array to use between<br />a regular javascript Array and a Float32Array if the latter is available</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix2</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">determineMatrixArrayType</span><span class="p">();</span></pre></div></td></tr><tr id="section-59"><td class="docs"><div class="pilwrap"><a href="#section-59" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-60"><td class="docs"><div class="pilwrap"><a href="#section-60" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The base class for all objects that are rendered on the screen.<br />This is an abstract class and should not be used on its own rather it should be extended.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-61"><td class="docs"><div class="pilwrap"><a href="#section-61" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The coordinate of the object relative to the local coordinates of the parent.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span></pre></div></td></tr><tr id="section-62"><td class="docs"><div class="pilwrap"><a href="#section-62" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The scale factor of the object.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="c1">//{x:1, y:1};</span></pre></div></td></tr><tr id="section-63"><td class="docs"><div class="pilwrap"><a href="#section-63" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The pivot point of the displayObject that it rotates around</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-64"><td class="docs"><div class="pilwrap"><a href="#section-64" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The rotation of the object in radians.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-65"><td class="docs"><div class="pilwrap"><a href="#section-65" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The opacity of the object.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-66"><td class="docs"><div class="pilwrap"><a href="#section-66" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The visibility of the object.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-67"><td class="docs"><div class="pilwrap"><a href="#section-67" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is the defined area that will pick up mouse / touch events. It is null by default.<br />Setting it is a neat way of optimising the hitTest function that the interactionManager will use (as it will not need to hit test all the children)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span class="dox_type">Circle</span><span class="dox_type">Ellipse</span><span class="dox_type">Polygon</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">hitArea</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-68"><td class="docs"><div class="pilwrap"><a href="#section-68" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is used to indicate if the displayObject should display a mouse hand cursor on rollover</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">buttonMode</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-69"><td class="docs"><div class="pilwrap"><a href="#section-69" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Can this object be rendered</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-70"><td class="docs"><div class="pilwrap"><a href="#section-70" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The display object container that contains this display object.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">DisplayObjectContainer</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-71"><td class="docs"><div class="pilwrap"><a href="#section-71" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The stage the display object is connected to, or undefined if it is not connected to the stage.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Stage</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-72"><td class="docs"><div class="pilwrap"><a href="#section-72" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The multiplied alpha of the displayObject</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-73"><td class="docs"><div class="pilwrap"><a href="#section-73" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Whether or not the object is interactive, do not toggle directly! use the <code>interactive</code> property</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-74"><td class="docs"><div class="pilwrap"><a href="#section-74" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is the cursor that will be used when the mouse is over this object. To enable this the element must have interaction = true and buttonMode = true</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">defaultCursor</span> <span class="o">=</span> <span class="s1">&#39;pointer&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-75"><td class="docs"><div class="pilwrap"><a href="#section-75" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Current transform of the object based on world (parent) factors</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Mat3</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span></pre></div></td></tr><tr id="section-76"><td class="docs"><div class="pilwrap"><a href="#section-76" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[NYI] Unknown</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array&lt;&gt;</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-77"><td class="docs"><div class="pilwrap"><a href="#section-77" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[NYI] Holds whether or not this object is dynamic, for rendering optimization</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">dynamic</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-78"><td class="docs"><div class="pilwrap"><a href="#section-78" class="pilcrow">&#182;</a></div><p>cached sin rotation and cos rotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_sr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cr</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-79"><td class="docs"><div class="pilwrap"><a href="#section-79" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The area the filter is applied to like the hitArea this is used as more of an optimisation<br />rather than figuring out the dimensions of the displayObject each frame you can set this rectangle</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">filterArea</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span><span class="c1">//new PIXI.Rectangle(0,0,1,1);</span></pre></div></td></tr><tr id="section-80"><td class="docs"><div class="pilwrap"><a href="#section-80" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The original, cached bounds of the object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_bounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span></pre></div></td></tr><tr id="section-81"><td class="docs"><div class="pilwrap"><a href="#section-81" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The most up-to-date bounds of the object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_currentBounds</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-82"><td class="docs"><div class="pilwrap"><a href="#section-82" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The original, cached mask of the object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_mask</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cacheIsDirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-83"><td class="docs"><div class="pilwrap"><a href="#section-83" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>MOUSE Callbacks</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-84"><td class="docs"><div class="pilwrap"><a href="#section-84" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the users clicks on the displayObject with their mouse</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-85"><td class="docs"><div class="pilwrap"><a href="#section-85" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user clicks the mouse down over the sprite</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-86"><td class="docs"><div class="pilwrap"><a href="#section-86" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user releases the mouse that was over the displayObject<br />for this callback to be fired the mouse must have been pressed down over the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-87"><td class="docs"><div class="pilwrap"><a href="#section-87" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user releases the mouse that was over the displayObject but is no longer over the displayObject<br />for this callback to be fired, The touch must have started over the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-88"><td class="docs"><div class="pilwrap"><a href="#section-88" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the users mouse rolls over the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-89"><td class="docs"><div class="pilwrap"><a href="#section-89" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the users mouse leaves the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-90"><td class="docs"><div class="pilwrap"><a href="#section-90" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>TOUCH Callbacks</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-91"><td class="docs"><div class="pilwrap"><a href="#section-91" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the users taps on the sprite with their finger<br />basically a touch version of click</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-92"><td class="docs"><div class="pilwrap"><a href="#section-92" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user touches over the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-93"><td class="docs"><div class="pilwrap"><a href="#section-93" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user releases a touch over the displayObject</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-94"><td class="docs"><div class="pilwrap"><a href="#section-94" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A callback that is used when the user releases the touch that was over the displayObject<br />for this callback to be fired, The touch must have started over the sprite</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-95"><td class="docs"><div class="pilwrap"><a href="#section-95" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">;</span></pre></div></td></tr><tr id="section-96"><td class="docs"><div class="pilwrap"><a href="#section-96" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[Deprecated] Indicates if the sprite will have touch and mouse interactivity. It is false by default<br />Instead of using this function you can now simply set the interactive property to true or false</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">interactive</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setInteractive</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">interactive</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactive</span> <span class="o">=</span> <span class="nx">interactive</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-97"><td class="docs"><div class="pilwrap"><a href="#section-97" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Indicates if the sprite will have touch and mouse interactivity. It is false by default</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;interactive&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span></pre></div></td></tr><tr id="section-98"><td class="docs"><div class="pilwrap"><a href="#section-98" class="pilcrow">&#182;</a></div><p>TODO more to be done here..
need to sort out a re-crawl!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-99"><td class="docs"><div class="pilwrap"><a href="#section-99" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Indicates if the sprite is globaly visible.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;worldVisible&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">do</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">item</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-100"><td class="docs"><div class="pilwrap"><a href="#section-100" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets a mask for the displayObject. A mask is an object that limits the visibility of an object to the shape of the mask applied to it.<br />In PIXI a regular mask must be a PIXI.Graphics object. This allows for much faster masking in canvas as it utilises shape clipping.<br />To remove a mask, set this property to null.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Graphics</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;mask&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">.</span><span class="nx">isMask</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_mask</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">.</span><span class="nx">isMask</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-101"><td class="docs"><div class="pilwrap"><a href="#section-101" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the filters for the displayObject.<br />* IMPORTANT: This is a webGL only feature and will be ignored by the canvas renderer.<br />To remove filters simply set this property to 'null'</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;filters&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-102"><td class="docs"><div class="pilwrap"><a href="#section-102" class="pilcrow">&#182;</a></div><p>now put all the passes in one place..</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">passes</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">filterPasses</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">passes</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">filterPasses</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">passes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">filterPasses</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-103"><td class="docs"><div class="pilwrap"><a href="#section-103" class="pilcrow">&#182;</a></div><p>TODO change this as it is legacy</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">_filterBlock</span> <span class="o">=</span> <span class="p">{</span><span class="nx">target</span><span class="o">:</span><span class="k">this</span><span class="p">,</span> <span class="nx">filterPasses</span><span class="o">:</span><span class="nx">passes</span><span class="p">};</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-104"><td class="docs"><div class="pilwrap"><a href="#section-104" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set weather or not a the display objects is cached as a bitmap.<br />This basically takes a snap shot of the display object as it is at that moment. It can provide a performance benefit for complex static displayObjects<br />To remove filters simply set this property to 'null'</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;cacheAsBitmap&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">===</span> <span class="nx">value</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-105"><td class="docs"><div class="pilwrap"><a href="#section-105" class="pilcrow">&#182;</a></div><p>this._cacheIsDirty = true;</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">_generateCachedSprite</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_destroyCachedSprite</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-106"><td class="docs"><div class="pilwrap"><a href="#section-106" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-107"><td class="docs"><div class="pilwrap"><a href="#section-107" class="pilcrow">&#182;</a></div><p>TODO OPTIMIZE THIS!! with dirty</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotationCache</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">rotationCache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_sr</span> <span class="o">=</span>  <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cr</span> <span class="o">=</span>  <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-108"><td class="docs"><div class="pilwrap"><a href="#section-108" class="pilcrow">&#182;</a></div><p>var localTransform = this.localTransform//.toArray();</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">parentTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span><span class="c1">//.toArray();</span>
    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span><span class="c1">//.toArray();</span>

    <span class="kd">var</span> <span class="nx">px</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">py</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cr</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">a01</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_sr</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">a10</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sr</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">a11</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cr</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">a02</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a00</span> <span class="o">*</span> <span class="nx">px</span> <span class="o">-</span> <span class="nx">py</span> <span class="o">*</span> <span class="nx">a01</span><span class="p">,</span>
        <span class="nx">a12</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a11</span> <span class="o">*</span> <span class="nx">py</span> <span class="o">-</span> <span class="nx">px</span> <span class="o">*</span> <span class="nx">a10</span><span class="p">,</span>
        <span class="nx">b00</span> <span class="o">=</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span>
        <span class="nx">b10</span> <span class="o">=</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b11</span> <span class="o">=</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>

    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">b00</span> <span class="o">*</span> <span class="nx">a00</span> <span class="o">+</span> <span class="nx">b01</span> <span class="o">*</span> <span class="nx">a10</span><span class="p">;</span>
    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b00</span> <span class="o">*</span> <span class="nx">a01</span> <span class="o">+</span> <span class="nx">b01</span> <span class="o">*</span> <span class="nx">a11</span><span class="p">;</span>
    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="nx">b00</span> <span class="o">*</span> <span class="nx">a02</span> <span class="o">+</span> <span class="nx">b01</span> <span class="o">*</span> <span class="nx">a12</span> <span class="o">+</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>

    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">b10</span> <span class="o">*</span> <span class="nx">a00</span> <span class="o">+</span> <span class="nx">b11</span> <span class="o">*</span> <span class="nx">a10</span><span class="p">;</span>
    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">b10</span> <span class="o">*</span> <span class="nx">a01</span> <span class="o">+</span> <span class="nx">b11</span> <span class="o">*</span> <span class="nx">a11</span><span class="p">;</span>
    <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="nx">b10</span> <span class="o">*</span> <span class="nx">a02</span> <span class="o">+</span> <span class="nx">b11</span> <span class="o">*</span> <span class="nx">a12</span> <span class="o">+</span> <span class="nx">parentTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-109"><td class="docs"><div class="pilwrap"><a href="#section-109" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Retrieves the bounds of the displayObject as a rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the rectangular bounding area</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">matrix</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="nx">matrix</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">;</span><span class="c1">//just to get passed js hinting (and preserve inheritance)</span>
    <span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EmptyRectangle</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-110"><td class="docs"><div class="pilwrap"><a href="#section-110" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Retrieves the local bounds of the displayObject as a rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the rectangular bounding area</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLocalBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">identityMatrix</span><span class="p">);</span><span class="c1">///PIXI.EmptyRectangle();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-111"><td class="docs"><div class="pilwrap"><a href="#section-111" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the object's stage reference, the stage this object is connected to</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Stage} </span><span class="dox_type">stage</span><span>- the stage that the object will have as its current stage reference</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setStageReference</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">generateTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">renderTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">);</span>
    <span class="nx">renderTexture</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">);</span>

    <span class="k">return</span> <span class="nx">renderTexture</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateCache</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_generateCachedSprite</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCachedSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_generateCachedSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span><span class="c1">//renderSession)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">renderTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span><span class="c1">//, renderSession.renderer);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">renderTexture</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-112"><td class="docs"><div class="pilwrap"><a href="#section-112" class="pilcrow">&#182;</a></div><p>REMOVE filter!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">tempFilters</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">filters</span> <span class="o">=</span> <span class="nx">tempFilters</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span> <span class="o">=</span> <span class="nx">tempFilters</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-113"><td class="docs"><div class="pilwrap"><a href="#section-113" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_destroyCachedSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span></pre></div></td></tr><tr id="section-114"><td class="docs"><div class="pilwrap"><a href="#section-114" class="pilcrow">&#182;</a></div><p>console.log("DESTROY")
let the gc collect the unused sprite
TODO could be object pooled!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-115"><td class="docs"><div class="pilwrap"><a href="#section-115" class="pilcrow">&#182;</a></div><p>OVERWRITE;
this line is just here to pass jshinting :)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">renderSession</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-116"><td class="docs"><div class="pilwrap"><a href="#section-116" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-117"><td class="docs"><div class="pilwrap"><a href="#section-117" class="pilcrow">&#182;</a></div><p>OVERWRITE;
this line is just here to pass jshinting :)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">renderSession</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-118"><td class="docs"><div class="pilwrap"><a href="#section-118" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The position of the displayObject on the x axis relative to the local coordinates of the parent.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-119"><td class="docs"><div class="pilwrap"><a href="#section-119" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The position of the displayObject on the y axis relative to the local coordinates of the parent.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-120"><td class="docs"><div class="pilwrap"><a href="#section-120" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-121"><td class="docs"><div class="pilwrap"><a href="#section-121" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A DisplayObjectContainer represents a collection of display objects.<br />It is the base class of all display objects that act as a container for other objects.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-122"><td class="docs"><div class="pilwrap"><a href="#section-122" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The array of children of this container.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array&lt;DisplayObject&gt;</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-123"><td class="docs"><div class="pilwrap"><a href="#section-123" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">;</span></pre></div></td></tr><tr id="section-124"><td class="docs"><div class="pilwrap"><a href="#section-124" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the displayObjectContainer, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">().</span><span class="nx">width</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">().</span><span class="nx">width</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">width</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="p">(</span> <span class="nx">width</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-125"><td class="docs"><div class="pilwrap"><a href="#section-125" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the displayObjectContainer, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">().</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">().</span><span class="nx">height</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">height</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="p">(</span> <span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-126"><td class="docs"><div class="pilwrap"><a href="#section-126" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a child to the container.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">child</span><span>- The DisplayObject to add to the container</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addChildAt</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-127"><td class="docs"><div class="pilwrap"><a href="#section-127" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">child</span><span>- The child to add</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">index</span><span>- The index to place the child in</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addChildAt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">index</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">child</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span><span class="nx">child</span><span class="p">.</span><span class="nx">setStageReference</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">child</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">child</span> <span class="o">+</span> <span class="s1">&#39; The index &#39;</span><span class="o">+</span> <span class="nx">index</span> <span class="o">+</span><span class="s1">&#39; supplied is out of bounds &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-128"><td class="docs"><div class="pilwrap"><a href="#section-128" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[NYI] Swaps the depth of 2 displayObjects</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">child</span></div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">child2</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">swapChildren</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="nx">child2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">child</span> <span class="o">===</span> <span class="nx">child2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">index1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">index2</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">child2</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">index1</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">index2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;swapChildren: Both the supplied DisplayObjects must be a child of the caller.&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">index1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">child2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">index2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">child</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-129"><td class="docs"><div class="pilwrap"><a href="#section-129" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the child at the specified index</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">index</span><span>- The index to get the child from</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getChildAt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-130"><td class="docs"><div class="pilwrap"><a href="#section-130" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes a child from the container.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">child</span><span>- The DisplayObject to remove</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeChildAt</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">child</span> <span class="p">)</span> <span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-131"><td class="docs"><div class="pilwrap"><a href="#section-131" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes a child from the specified index position in the child list of the container.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">index</span><span>- The index to get the child from</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeChildAt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getChildAt</span><span class="p">(</span> <span class="nx">index</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">removeStageReference</span><span class="p">();</span>

    <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">child</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-132"><td class="docs"><div class="pilwrap"><a href="#section-132" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes all child instances from the child list of the container.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">beginIndex</span><span>- The beginning position. Predefined value is 0.</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">endIndex</span><span>- The ending position. Predefined value is children's array length.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeChildren</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">beginIndex</span><span class="p">,</span> <span class="nx">endIndex</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">begin</span> <span class="o">=</span> <span class="nx">beginIndex</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">endIndex</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span> <span class="o">?</span> <span class="nx">endIndex</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">end</span> <span class="o">-</span> <span class="nx">begin</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">range</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">range</span> <span class="o">&lt;=</span> <span class="nx">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">removed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">begin</span><span class="p">,</span> <span class="nx">range</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">removed</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">removed</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">)</span>
                <span class="nx">child</span><span class="p">.</span><span class="nx">removeStageReference</span><span class="p">();</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">removed</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s1">&#39;Range Error, numeric values are outside the acceptable range&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-133"><td class="docs"><div class="pilwrap"><a href="#section-133" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the container's childrens transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-134"><td class="docs"><div class="pilwrap"><a href="#section-134" class="pilcrow">&#182;</a></div><p>this._currentBounds = null;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateTransform</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-135"><td class="docs"><div class="pilwrap"><a href="#section-135" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Retrieves the bounds of the displayObjectContainer as a rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the rectangular bounding area</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">matrix</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EmptyRectangle</span><span class="p">;</span></pre></div></td></tr><tr id="section-136"><td class="docs"><div class="pilwrap"><a href="#section-136" class="pilcrow">&#182;</a></div><p>TODO the bounds have already been calculated this render session so return what we have</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">matrix</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">matrixCache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">matrixCache</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">childBounds</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">childMaxX</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">childMaxY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">childVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">child</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span>

        <span class="nx">childVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">childBounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getBounds</span><span class="p">(</span> <span class="nx">matrix</span> <span class="p">);</span>

        <span class="nx">minX</span> <span class="o">=</span> <span class="nx">minX</span> <span class="o">&lt;</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">?</span> <span class="nx">minX</span> <span class="o">:</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">minY</span> <span class="o">=</span> <span class="nx">minY</span> <span class="o">&lt;</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">?</span> <span class="nx">minY</span> <span class="o">:</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">childMaxX</span> <span class="o">=</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">childMaxY</span> <span class="o">=</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="nx">childBounds</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">maxX</span> <span class="o">&gt;</span> <span class="nx">childMaxX</span> <span class="o">?</span> <span class="nx">maxX</span> <span class="o">:</span> <span class="nx">childMaxX</span><span class="p">;</span>
        <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">maxY</span> <span class="o">&gt;</span> <span class="nx">childMaxY</span> <span class="o">?</span> <span class="nx">maxY</span> <span class="o">:</span> <span class="nx">childMaxY</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">childVisible</span><span class="p">)</span>
        <span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EmptyRectangle</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bounds</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">maxX</span> <span class="o">-</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">maxY</span> <span class="o">-</span> <span class="nx">minY</span><span class="p">;</span></pre></div></td></tr><tr id="section-137"><td class="docs"><div class="pilwrap"><a href="#section-137" class="pilcrow">&#182;</a></div><p>TODO: store a reference so that if this function gets called again in the render cycle we do not have to recalculate
this._currentBounds = bounds;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">return</span> <span class="nx">bounds</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLocalBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">matrixCache</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">identityMatrix</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateTransform</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">matrixCache</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">bounds</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-138"><td class="docs"><div class="pilwrap"><a href="#section-138" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the container's stage reference, the stage this object is connected to</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Stage} </span><span class="dox_type">stage</span><span>- the stage that the container will have as its current stage reference</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setStageReference</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">setStageReference</span><span class="p">(</span><span class="nx">stage</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-139"><td class="docs"><div class="pilwrap"><a href="#section-139" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>removes the current stage reference of the container</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeStageReference</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">removeStageReference</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-140"><td class="docs"><div class="pilwrap"><a href="#section-140" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_renderCachedSprite</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-141"><td class="docs"><div class="pilwrap"><a href="#section-141" class="pilcrow">&#182;</a></div><p>push filter first as we need to ensure the stencil buffer is correct for any masking</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">pushFilter</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filterBlock</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-142"><td class="docs"><div class="pilwrap"><a href="#section-142" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">popFilter</span><span class="p">();</span>

        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-143"><td class="docs"><div class="pilwrap"><a href="#section-143" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-144"><td class="docs"><div class="pilwrap"><a href="#section-144" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_renderCachedSprite</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">_renderCanvas</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-145"><td class="docs"><div class="pilwrap"><a href="#section-145" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-146"><td class="docs"><div class="pilwrap"><a href="#section-146" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Sprite object is the base for all textured objects that are rendered to the screen</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture for this sprite</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-147"><td class="docs"><div class="pilwrap"><a href="#section-147" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The anchor sets the origin point of the texture.<br />The default is 0,0 this means the texture's origin is the top left<br />Setting than anchor to 0.5,0.5 means the textures origin is centred<br />Setting the anchor to 1,1 would mean the textures origin points will be the bottom right corner</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">anchor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span></pre></div></td></tr><tr id="section-148"><td class="docs"><div class="pilwrap"><a href="#section-148" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The texture that the sprite is using</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span></pre></div></td></tr><tr id="section-149"><td class="docs"><div class="pilwrap"><a href="#section-149" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the sprite (this is initially set by the texture)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-150"><td class="docs"><div class="pilwrap"><a href="#section-150" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the sprite (this is initially set by the texture)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-151"><td class="docs"><div class="pilwrap"><a href="#section-151" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The tint applied to the sprite. This is a hex value</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">;</span><span class="c1">// * Math.random();</span></pre></div></td></tr><tr id="section-152"><td class="docs"><div class="pilwrap"><a href="#section-152" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The blend mode to be applied to the sprite</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onTextureUpdate</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onTextureUpdateBind</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTextureUpdate</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTextureUpdateBind</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-153"><td class="docs"><div class="pilwrap"><a href="#section-153" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">;</span></pre></div></td></tr><tr id="section-154"><td class="docs"><div class="pilwrap"><a href="#section-154" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the sprite, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-155"><td class="docs"><div class="pilwrap"><a href="#section-155" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the sprite, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-156"><td class="docs"><div class="pilwrap"><a href="#section-156" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the texture of the sprite</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The PIXI texture that is displayed by the sprite</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cachedTint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-157"><td class="docs"><div class="pilwrap"><a href="#section-157" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>When the texture is updated, this event will fire to update the scale and frame</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTextureUpdate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-158"><td class="docs"><div class="pilwrap"><a href="#section-158" class="pilcrow">&#182;</a></div><p>so if _width is 0 then width was not set..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_width</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_height</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span></pre></div></td></tr><tr id="section-159"><td class="docs"><div class="pilwrap"><a href="#section-159" class="pilcrow">&#182;</a></div><p>this.updateFrame = true;</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-160"><td class="docs"><div class="pilwrap"><a href="#section-160" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the framing rectangle of the sprite as a PIXI.Rectangle object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Matrix} </span><span class="dox_type">matrix</span><span>- the transformation matrix of the sprite</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the framing rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">matrix</span><span class="p">)</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">w0</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">h0</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">matrix</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x4</span> <span class="o">=</span>  <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y4</span> <span class="o">=</span>  <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>

    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x1</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y1</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>

    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x1</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y1</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bounds</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">maxX</span> <span class="o">-</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">maxY</span> <span class="o">-</span> <span class="nx">minY</span><span class="p">;</span></pre></div></td></tr><tr id="section-161"><td class="docs"><div class="pilwrap"><a href="#section-161" class="pilcrow">&#182;</a></div><p>store a reference so that if this function gets called again in the render cycle we do not have to recalculate</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_currentBounds</span> <span class="o">=</span> <span class="nx">bounds</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">bounds</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-162"><td class="docs"><div class="pilwrap"><a href="#section-162" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-163"><td class="docs"><div class="pilwrap"><a href="#section-163" class="pilcrow">&#182;</a></div><p>if the sprite is not visible or the alpha is 0 then no need to render this element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">;</span></pre></div></td></tr><tr id="section-164"><td class="docs"><div class="pilwrap"><a href="#section-164" class="pilcrow">&#182;</a></div><p>do a quick check to see if this element has a mask or a filter.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">spriteBatch</span> <span class="o">=</span>  <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">;</span></pre></div></td></tr><tr id="section-165"><td class="docs"><div class="pilwrap"><a href="#section-165" class="pilcrow">&#182;</a></div><p>push filter first as we need to ensure the stencil buffer is correct for any masking</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">pushFilter</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filterBlock</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
            <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-166"><td class="docs"><div class="pilwrap"><a href="#section-166" class="pilcrow">&#182;</a></div><p>add this sprite to the batch</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-167"><td class="docs"><div class="pilwrap"><a href="#section-167" class="pilcrow">&#182;</a></div><p>now loop through the children and make sure they get rendered</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-168"><td class="docs"><div class="pilwrap"><a href="#section-168" class="pilcrow">&#182;</a></div><p>time to stop the sprite batch as either a mask element or a filter draw will happen next</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">popFilter</span><span class="p">();</span>

        <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-169"><td class="docs"><div class="pilwrap"><a href="#section-169" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-170"><td class="docs"><div class="pilwrap"><a href="#section-170" class="pilcrow">&#182;</a></div><p>TODO check culling</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-171"><td class="docs"><div class="pilwrap"><a href="#section-171" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-172"><td class="docs"><div class="pilwrap"><a href="#section-172" class="pilcrow">&#182;</a></div><p>If the sprite is not visible or the alpha is 0 then no need to render this element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">!==</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-173"><td class="docs"><div class="pilwrap"><a href="#section-173" class="pilcrow">&#182;</a></div><p>Ignore null sources</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">valid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-174"><td class="docs"><div class="pilwrap"><a href="#section-174" class="pilcrow">&#182;</a></div><p>Allow for pixel rounding</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">roundPixels</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-175"><td class="docs"><div class="pilwrap"><a href="#section-175" class="pilcrow">&#182;</a></div><p>If smoothingEnabled is supported and we need to change the smoothing property for this texture</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span> <span class="o">&amp;&amp;</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">scaleMode</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">scaleMode</span><span class="p">;</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">[</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-176"><td class="docs"><div class="pilwrap"><a href="#section-176" class="pilcrow">&#182;</a></div><p>If the texture is trimmed we offset by the trim x/y, otherwise we use the frame dimensions</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">width</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">dy</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">height</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">!==</span> <span class="mh">0xFFFFFF</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cachedTint</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">tint</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">cachedTint</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-177"><td class="docs"><div class="pilwrap"><a href="#section-177" class="pilcrow">&#182;</a></div><p>TODO clean up caching - how to clean up the caches?</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">this</span><span class="p">.</span><span class="nx">tintedTexture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">getTintedTexture</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">tint</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">tintedTexture</span><span class="p">,</span>
                                <span class="mi">0</span><span class="p">,</span>
                                <span class="mi">0</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                                <span class="nx">dx</span><span class="p">,</span>
                                <span class="nx">dy</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                                <span class="nx">dx</span><span class="p">,</span>
                                <span class="nx">dy</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-178"><td class="docs"><div class="pilwrap"><a href="#section-178" class="pilcrow">&#182;</a></div><p>OVERWRITE</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderCanvas</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-179"><td class="docs"><div class="pilwrap"><a href="#section-179" class="pilcrow">&#182;</a></div><p>some helper functions..</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-180"><td class="docs"><div class="pilwrap"><a href="#section-180" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that creates a sprite that will contain a texture from the TextureCache based on the frameId<br />The frame ids are created when a Texture packer file has been loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">frameId</span><span>- The frame Id of the texture in the cache</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Sprite</span><span>A new Sprite using a texture from the texture cache matching the frameId</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">fromFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frameId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">frameId</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;The frameId &quot;&#39;</span> <span class="o">+</span> <span class="nx">frameId</span> <span class="o">+</span> <span class="s1">&#39;&quot; does not exist in the texture cache&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-181"><td class="docs"><div class="pilwrap"><a href="#section-181" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that creates a sprite that will contain a texture based on an image url<br />If the image is not in the texture cache it will be loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">imageId</span><span>- The image url of the texture</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Sprite</span><span>A new Sprite using a texture from the texture cache matching the image id</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">fromImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">imageId</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromImage</span><span class="p">(</span><span class="nx">imageId</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-182"><td class="docs"><div class="pilwrap"><a href="#section-182" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-183"><td class="docs"><div class="pilwrap"><a href="#section-183" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The SpriteBatch class is a really fast version of the DisplayObjectContainer<br />built solely for speed, so use when you need a lot of sprites or particles.<br />And it's extremely easy to use :</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span></div></div><div class="body"><pre><code>var container = new PIXI.SpriteBatch();

stage.addChild(container);

for(var i  = 0; i &lt; 100; i++)
{
    var sprite = new PIXI.Sprite.fromImage("myImage.png");
    container.addChild(sprite);
}
</code></pre>

<p>And here you have a hundred sprites that will be renderer at the speed of light</p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">textureThing</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">;</span></pre></div></td></tr><tr id="section-184"><td class="docs"><div class="pilwrap"><a href="#section-184" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the spriteBatch</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-185"><td class="docs"><div class="pilwrap"><a href="#section-185" class="pilcrow">&#182;</a></div><p>TODO only one needed for the whole engine really?</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fastSpriteBatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-186"><td class="docs"><div class="pilwrap"><a href="#section-186" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-187"><td class="docs"><div class="pilwrap"><a href="#section-187" class="pilcrow">&#182;</a></div><p>TODO dont need to!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-188"><td class="docs"><div class="pilwrap"><a href="#section-188" class="pilcrow">&#182;</a></div><p>PIXI.DisplayObjectContainer.prototype.updateTransform.call( this );</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-189"><td class="docs"><div class="pilwrap"><a href="#section-189" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">ready</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">initWebGL</span><span class="p">(</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span> <span class="p">);</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">fastShader</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fastSpriteBatch</span><span class="p">.</span><span class="nx">begin</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fastSpriteBatch</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-190"><td class="docs"><div class="pilwrap"><a href="#section-190" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span></pre></div></td></tr><tr id="section-191"><td class="docs"><div class="pilwrap"><a href="#section-191" class="pilcrow">&#182;</a></div><p>alow for trimming</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">isRotated</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">child</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">texture</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">*</span> <span class="nx">child</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">%</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">isRotated</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>
                <span class="nx">isRotated</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-192"><td class="docs"><div class="pilwrap"><a href="#section-192" class="pilcrow">&#182;</a></div><p>this is the fastest  way to optimise! - if rotation is 0 then we can avoid any kind of setTransform call</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                                 <span class="p">((</span><span class="nx">child</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">child</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nx">child</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span>  <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="p">((</span><span class="nx">child</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="nx">child</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="nx">child</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span>  <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">child</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="nx">child</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isRotated</span><span class="p">)</span><span class="nx">isRotated</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>

            <span class="kd">var</span> <span class="nx">childTransform</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span></pre></div></td></tr><tr id="section-193"><td class="docs"><div class="pilwrap"><a href="#section-193" class="pilcrow">&#182;</a></div><p>allow for trimming</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">roundPixels</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">childTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">childTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">childTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                                 <span class="p">((</span><span class="nx">child</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="p">((</span><span class="nx">child</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                                 <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>


        <span class="p">}</span></pre></div></td></tr><tr id="section-194"><td class="docs"><div class="pilwrap"><a href="#section-194" class="pilcrow">&#182;</a></div><p>context.restore();</p>
</td><td class="code"><div class="highlight"><pre>    <span class="p">}</span></pre></div></td></tr><tr id="section-195"><td class="docs"><div class="pilwrap"><a href="#section-195" class="pilcrow">&#182;</a></div><p>context.restore();</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-196"><td class="docs"><div class="pilwrap"><a href="#section-196" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-197"><td class="docs"><div class="pilwrap"><a href="#section-197" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A MovieClip is a simple way to display an animation depicted by a list of textures.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array&lt;Texture&gt;} </span><span class="dox_type">textures</span><span>- an array of {Texture} objects that make up the animation</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">textures</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">textures</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span></pre></div></td></tr><tr id="section-198"><td class="docs"><div class="pilwrap"><a href="#section-198" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The array of textures that make up the animation</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textures</span> <span class="o">=</span> <span class="nx">textures</span><span class="p">;</span></pre></div></td></tr><tr id="section-199"><td class="docs"><div class="pilwrap"><a href="#section-199" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The speed that the MovieClip will play at. Higher is faster, lower is slower</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">animationSpeed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-200"><td class="docs"><div class="pilwrap"><a href="#section-200" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether or not the movie clip repeats after playing.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-201"><td class="docs"><div class="pilwrap"><a href="#section-201" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Function to call when a MovieClip finishes playing</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Function</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-202"><td class="docs"><div class="pilwrap"><a href="#section-202" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The MovieClips current frame index (this may not have to be a whole number)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-203"><td class="docs"><div class="pilwrap"><a href="#section-203" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Indicates if the MovieClip is currently playing</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">playing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-204"><td class="docs"><div class="pilwrap"><a href="#section-204" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">;</span></pre></div></td></tr><tr id="section-205"><td class="docs"><div class="pilwrap"><a href="#section-205" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] totalFrames is the total number of frames in the MovieClip. This is the same as number of textures<br />assigned to the MovieClip.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;totalFrames&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-206"><td class="docs"><div class="pilwrap"><a href="#section-206" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Stops the MovieClip</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">playing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-207"><td class="docs"><div class="pilwrap"><a href="#section-207" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Plays the MovieClip</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">playing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-208"><td class="docs"><div class="pilwrap"><a href="#section-208" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Stops the MovieClip and goes to a specific frame</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">frameNumber</span><span>- frame index to stop at</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">gotoAndStop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frameNumber</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">playing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">=</span> <span class="nx">frameNumber</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">round</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">[</span><span class="nx">round</span> <span class="o">%</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">]);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-209"><td class="docs"><div class="pilwrap"><a href="#section-209" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Goes to a specific frame and begins playing the MovieClip</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">frameNumber</span><span>- frame index to start at</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">gotoAndPlay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frameNumber</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">=</span> <span class="nx">frameNumber</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">playing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-210"><td class="docs"><div class="pilwrap"><a href="#section-210" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">playing</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">animationSpeed</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">round</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentFrame</span> <span class="o">%</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">||</span> <span class="nx">round</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">[</span><span class="nx">round</span> <span class="o">%</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">round</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">gotoAndStop</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-211"><td class="docs"><div class="pilwrap"><a href="#section-211" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A short hand way of creating a movieclip from an array of frame ids</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">frames</span><span>- the array of frames ids the movieclip will use as its texture frames</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">fromFrames</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frames</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">textures</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">textures</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromFrame</span><span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">(</span><span class="nx">textures</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-212"><td class="docs"><div class="pilwrap"><a href="#section-212" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A short hand way of creating a movieclip from an array of image ids</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">frames</span><span>- the array of image ids the movieclip will use as its texture frames</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">.</span><span class="nx">fromImages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">images</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">textures</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">textures</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromImage</span><span class="p">(</span><span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">MovieClip</span><span class="p">(</span><span class="nx">textures</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-213"><td class="docs"><div class="pilwrap"><a href="#section-213" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterBlock</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-214"><td class="docs"><div class="pilwrap"><a href="#section-214" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23<br />- Modified by Tom Slezakowski <a href='http://www.tomslezakowski.com'>http://www.tomslezakowski.com</a> @TomSlezakowski (24/03/2014) - Added dropShadowColor.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-215"><td class="docs"><div class="pilwrap"><a href="#section-215" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A Text Object will create a line(s) of text. To split a line you can use '\n'<br />or add a wordWrap property set to true and and wordWrapWidth property with a value<br />in the style object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">text</span><span>- The copy that you would like the text to display</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">[style]</span><span>- The style parameters</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.font]</span><span>- default 'bold 20px Arial' The style and size of the font</span></div><div class="dox_tag_detail"><span>{String|Number} </span><span class="dox_type">[style.fill='black']</span><span>- A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.align='left']</span><span>- Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text</span></div><div class="dox_tag_detail"><span>{String|Number} </span><span class="dox_type">[style.stroke]</span><span>- A canvas fillstyle that will be used on the text stroke e.g 'blue', '#FCFF00'</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.strokeThickness=0]</span><span>- A number that represents the thickness of the stroke. Default is 0 (no stroke)</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[style.wordWrap=false]</span><span>- Indicates if word wrap should be used</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.wordWrapWidth=100]</span><span>- The width at which text will wrap, it needs wordWrap to be set to true</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[style.dropShadow=false]</span><span>- Set a drop shadow for the text</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.dropShadowColor='#000000']</span><span>- A fill style to be used on the dropshadow e.g 'red', '#00FF00'</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.dropShadowAngle=Math.PI</span><span class="dox_type">4]</span><span>- Set a angle of the drop shadow</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.dropShadowDistance=5]</span><span>- Set a distance of the drop shadow</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">style</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-216"><td class="docs"><div class="pilwrap"><a href="#section-216" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The canvas element that everything is drawn to</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-217"><td class="docs"><div class="pilwrap"><a href="#section-217" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The canvas 2d context that everything is drawn with</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromCanvas</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">));</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setText</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-218"><td class="docs"><div class="pilwrap"><a href="#section-218" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">;</span></pre></div></td></tr><tr id="section-219"><td class="docs"><div class="pilwrap"><a href="#section-219" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the sprite, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">updateText</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-220"><td class="docs"><div class="pilwrap"><a href="#section-220" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the Text, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">updateText</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-221"><td class="docs"><div class="pilwrap"><a href="#section-221" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set the style of the text</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">[style]</span><span>- The style parameters</span></div><div class="dox_tag_detail"><span>20pt </span><span class="dox_type">[style.font='bold</span><span>- Arial'] {String} The style and size of the font</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">[style.fill='black']</span><span>- A canvas fillstyle that will be used on the text eg 'red', '#00FF00'</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.align='left']</span><span>- Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.stroke='black']</span><span>- A canvas fillstyle that will be used on the text stroke eg 'blue', '#FCFF00'</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.strokeThickness=0]</span><span>- A number that represents the thickness of the stroke. Default is 0 (no stroke)</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[style.wordWrap=false]</span><span>- Indicates if word wrap should be used</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.wordWrapWidth=100]</span><span>- The width at which text will wrap</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[style.dropShadow=false]</span><span>- Set a drop shadow for the text</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.dropShadowColor='#000000']</span><span>- A fill style to be used on the dropshadow e.g 'red', '#00FF00'</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.dropShadowAngle=Math.PI</span><span class="dox_type">4]</span><span>- Set a angle of the drop shadow</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">[style.dropShadowDistance=5]</span><span>- Set a distance of the drop shadow</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setStyle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">style</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">style</span> <span class="o">=</span> <span class="nx">style</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">font</span> <span class="o">||</span> <span class="s1">&#39;bold 20pt Arial&#39;</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">fill</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">fill</span> <span class="o">||</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">||</span> <span class="s1">&#39;left&#39;</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">stroke</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">stroke</span> <span class="o">||</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span> <span class="c1">//provide a default, see: https://github.com/GoodBoyDigital/pixi.js/issues/136</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrap</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrap</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span>

    <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadow</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadow</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowAngle</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowAngle</span> <span class="o">||</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">6</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span> <span class="o">||</span> <span class="mi">4</span><span class="p">;</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowColor</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowColor</span> <span class="o">||</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="nx">style</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-222"><td class="docs"><div class="pilwrap"><a href="#section-222" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set the copy for the text object. To split a line you can use '\n'</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>text </span><span class="dox_type">String</span><span>- The copy that you would like the text to display</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">||</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-223"><td class="docs"><div class="pilwrap"><a href="#section-223" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders text and updates it when needed</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">font</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">outputText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span></pre></div></td></tr><tr id="section-224"><td class="docs"><div class="pilwrap"><a href="#section-224" class="pilcrow">&#182;</a></div><p>word wrap
preserve original text</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">wordWrap</span><span class="p">)</span><span class="nx">outputText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wordWrap</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span></pre></div></td></tr><tr id="section-225"><td class="docs"><div class="pilwrap"><a href="#section-225" class="pilcrow">&#182;</a></div><p>split text into lines</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">outputText</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/(?:\r\n|\r|\n)/</span><span class="p">);</span></pre></div></td></tr><tr id="section-226"><td class="docs"><div class="pilwrap"><a href="#section-226" class="pilcrow">&#182;</a></div><p>calculate text width</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">lineWidths</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">maxLineWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">lineWidth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">width</span><span class="p">;</span>
        <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">lineWidth</span><span class="p">;</span>
        <span class="nx">maxLineWidth</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">maxLineWidth</span><span class="p">,</span> <span class="nx">lineWidth</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">maxLineWidth</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadow</span><span class="p">)</span><span class="nx">width</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">;</span></pre></div></td></tr><tr id="section-227"><td class="docs"><div class="pilwrap"><a href="#section-227" class="pilcrow">&#182;</a></div><p>calculate text height</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">lineHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">determineFontHeight</span><span class="p">(</span><span class="s1">&#39;font: &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">font</span>  <span class="o">+</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">lineHeight</span> <span class="o">*</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadow</span><span class="p">)</span><span class="nx">height</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">isCocoonJS</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">font</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">stroke</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">linePositionX</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">linePositionY</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadow</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowColor</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">xShadowOffset</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowAngle</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">yShadowOffset</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowAngle</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">dropShadowDistance</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">linePositionX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
            <span class="nx">linePositionY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">lineHeight</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">linePositionX</span> <span class="o">+=</span> <span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">linePositionX</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">linePositionX</span> <span class="o">+</span> <span class="nx">xShadowOffset</span><span class="p">,</span> <span class="nx">linePositionY</span> <span class="o">+</span> <span class="nx">yShadowOffset</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-228"><td class="docs"><div class="pilwrap"><a href="#section-228" class="pilcrow">&#182;</a></div><p>if(dropShadow)</p>
</td><td class="code"><div class="highlight"><pre>        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-229"><td class="docs"><div class="pilwrap"><a href="#section-229" class="pilcrow">&#182;</a></div><p>set canvas text styles</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fill</span><span class="p">;</span></pre></div></td></tr><tr id="section-230"><td class="docs"><div class="pilwrap"><a href="#section-230" class="pilcrow">&#182;</a></div><p>draw lines line by line</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">linePositionX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">linePositionY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">lineHeight</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">linePositionX</span> <span class="o">+=</span> <span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">linePositionX</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">stroke</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeThickness</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">strokeText</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">linePositionX</span><span class="p">,</span> <span class="nx">linePositionY</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">linePositionX</span><span class="p">,</span> <span class="nx">linePositionY</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-231"><td class="docs"><div class="pilwrap"><a href="#section-231" class="pilcrow">&#182;</a></div><p>if(dropShadow)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="p">}</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">updateTexture</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-232"><td class="docs"><div class="pilwrap"><a href="#section-232" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates texture size based on canvas size</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">requiresUpdate</span> <span class="o">=</span>  <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-233"><td class="docs"><div class="pilwrap"><a href="#section-233" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">requiresUpdate</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">requiresUpdate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">updateWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-234"><td class="docs"><div class="pilwrap"><a href="#section-234" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the transform of this object</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateText</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-235"><td class="docs"><div class="pilwrap"><a href="#section-235" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><a href='http://stackoverflow.com/users/34441/ellisbben'>http://stackoverflow.com/users/34441/ellisbben</a><br />great solution to the problem!<br />returns the height of the given font</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">fontStyle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">determineFontHeight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fontStyle</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-236"><td class="docs"><div class="pilwrap"><a href="#section-236" class="pilcrow">&#182;</a></div><p>build a little reference dictionary so if the font style has been used return a
cached version...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">heightCache</span><span class="p">[</span><span class="nx">fontStyle</span><span class="p">];</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">dummy</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">dummyText</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">);</span>
        <span class="nx">dummy</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dummyText</span><span class="p">);</span>
        <span class="nx">dummy</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="nx">fontStyle</span> <span class="o">+</span> <span class="s1">&#39;;position:absolute;top:0;left:0&#39;</span><span class="p">);</span>
        <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dummy</span><span class="p">);</span>

        <span class="nx">result</span> <span class="o">=</span> <span class="nx">dummy</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">heightCache</span><span class="p">[</span><span class="nx">fontStyle</span><span class="p">]</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>

        <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">dummy</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-237"><td class="docs"><div class="pilwrap"><a href="#section-237" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies newlines to a string to have it optimally fit into the horizontal<br />bounds set by the Text object's wordWrapWidth property.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">text</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">wordWrap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-238"><td class="docs"><div class="pilwrap"><a href="#section-238" class="pilcrow">&#182;</a></div><p>Greedy wrapping algorithm that will wrap words as the line grows longer
than its horizontal bounds.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">spaceLeft</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">words</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">wordWidth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">words</span><span class="p">[</span><span class="nx">j</span><span class="p">]).</span><span class="nx">width</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">wordWidthWithSpace</span> <span class="o">=</span> <span class="nx">wordWidth</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">j</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">wordWidthWithSpace</span> <span class="o">&gt;</span> <span class="nx">spaceLeft</span><span class="p">)</span>
            <span class="p">{</span></pre></div></td></tr><tr id="section-239"><td class="docs"><div class="pilwrap"><a href="#section-239" class="pilcrow">&#182;</a></div><p>Skip printing the newline if it's the first word of the line that is
greater than the word wrap width.</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">result</span> <span class="o">+=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">result</span> <span class="o">+=</span> <span class="nx">words</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                <span class="nx">spaceLeft</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">wordWrapWidth</span> <span class="o">-</span> <span class="nx">wordWidth</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">spaceLeft</span> <span class="o">-=</span> <span class="nx">wordWidthWithSpace</span><span class="p">;</span>
                <span class="nx">result</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">words</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">result</span> <span class="o">+=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-240"><td class="docs"><div class="pilwrap"><a href="#section-240" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys this text object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">destroyBaseTexture</span><span>- whether to destroy the base texture as well</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">destroyBaseTexture</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-241"><td class="docs"><div class="pilwrap"><a href="#section-241" class="pilcrow">&#182;</a></div><p>make sure to reset the the context and canvas.. dont want this hanging around in memory!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">isCocoonJS</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">dispose</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="nx">destroyBaseTexture</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="nx">destroyBaseTexture</span><span class="p">);</span>


  <span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Text</span><span class="p">.</span><span class="nx">heightCache</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-242"><td class="docs"><div class="pilwrap"><a href="#section-242" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-243"><td class="docs"><div class="pilwrap"><a href="#section-243" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A Text Object will create a line(s) of text using bitmap font. To split a line you can use '\n', '\r' or '\r\n'<br />You can generate the fnt files using<br /><a href='http://www.angelcode.com/products/bmfont/'>http://www.angelcode.com/products/bmfont/</a> for windows or<br /><a href='http://www.bmglyph.com/'>http://www.bmglyph.com/</a> for mac.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">text</span><span>- The copy that you would like the text to display</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">style</span><span>- The style parameters</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">style.font</span><span>- The size (optional) and bitmap font id (required) eq 'Arial' or '20px Arial' (must have loaded previously)</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">[style.align='left']</span><span>- Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">style</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_pool</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setText</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateText</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-244"><td class="docs"><div class="pilwrap"><a href="#section-244" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">;</span></pre></div></td></tr><tr id="section-245"><td class="docs"><div class="pilwrap"><a href="#section-245" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set the copy for the text object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">text</span><span>- The copy that you would like the text to display</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-246"><td class="docs"><div class="pilwrap"><a href="#section-246" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set the style of the text<br />style.font {String} The size (optional) and bitmap font id (required) eq 'Arial' or '20px Arial' (must have loaded previously)<br />[style.align='left'] {String} Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">style</span><span>- The style parameters, contained as properties of an object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setStyle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">style</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">style</span> <span class="o">=</span> <span class="nx">style</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">||</span> <span class="s1">&#39;left&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="nx">style</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">font</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">font</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fontName</span> <span class="o">=</span> <span class="nx">font</span><span class="p">[</span><span class="nx">font</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">=</span> <span class="nx">font</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">?</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">font</span><span class="p">[</span><span class="nx">font</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">fonts</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">fontName</span><span class="p">].</span><span class="nx">size</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">tint</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-247"><td class="docs"><div class="pilwrap"><a href="#section-247" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders text and updates it when needed</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">fonts</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">fontName</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">pos</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">prevCharCode</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">chars</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">maxLineWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lineWidths</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">scale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">/</span> <span class="nx">data</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>


    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">charCode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="sr">/(?:\r\n|\r|\n)/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span>
        <span class="p">{</span>
            <span class="nx">lineWidths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
            <span class="nx">maxLineWidth</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">maxLineWidth</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
            <span class="nx">line</span><span class="o">++</span><span class="p">;</span>

            <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">pos</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">;</span>
            <span class="nx">prevCharCode</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">charData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">chars</span><span class="p">[</span><span class="nx">charCode</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">charData</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">prevCharCode</span> <span class="o">&amp;&amp;</span> <span class="nx">charData</span><span class="p">[</span><span class="nx">prevCharCode</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">charData</span><span class="p">.</span><span class="nx">kerning</span><span class="p">[</span><span class="nx">prevCharCode</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="nx">chars</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">texture</span><span class="o">:</span><span class="nx">charData</span><span class="p">.</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">line</span><span class="o">:</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">charCode</span><span class="o">:</span> <span class="nx">charCode</span><span class="p">,</span> <span class="nx">position</span><span class="o">:</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">charData</span><span class="p">.</span><span class="nx">xOffset</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">charData</span><span class="p">.</span><span class="nx">yOffset</span><span class="p">)});</span>
        <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">charData</span><span class="p">.</span><span class="nx">xAdvance</span><span class="p">;</span>

        <span class="nx">prevCharCode</span> <span class="o">=</span> <span class="nx">charCode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">lineWidths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="nx">maxLineWidth</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">maxLineWidth</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">lineAlignOffsets</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">line</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">alignOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">alignOffset</span> <span class="o">=</span> <span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">align</span> <span class="o">===</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">alignOffset</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxLineWidth</span> <span class="o">-</span> <span class="nx">lineWidths</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">lineAlignOffsets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">alignOffset</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">lenChildren</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lenChars</span> <span class="o">=</span> <span class="nx">chars</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tint</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">||</span> <span class="mh">0xFFFFFF</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lenChars</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lenChildren</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span> <span class="c1">// get old child if have. if not - take from pool.</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="nx">c</span><span class="p">.</span><span class="nx">setTexture</span><span class="p">(</span><span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">texture</span><span class="p">);</span> <span class="c1">// check if got one before.</span>
        <span class="k">else</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">texture</span><span class="p">);</span> <span class="c1">// if no create new one.</span>

        <span class="nx">c</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lineAlignOffsets</span><span class="p">[</span><span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">line</span><span class="p">])</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-248"><td class="docs"><div class="pilwrap"><a href="#section-248" class="pilcrow">&#182;</a></div><p>remove unnecessary children.
and put their into the pool.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">while</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">lenChars</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getChildAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-249"><td class="docs"><div class="pilwrap"><a href="#section-249" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The width of the overall text, different from fontSize,<br />which is defined in the style object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textWidth</span> <span class="o">=</span> <span class="nx">maxLineWidth</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">;</span></pre></div></td></tr><tr id="section-250"><td class="docs"><div class="pilwrap"><a href="#section-250" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The height of the overall text, different from fontSize,<br />which is defined in the style object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textHeight</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">)</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-251"><td class="docs"><div class="pilwrap"><a href="#section-251" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the transform of this object</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateText</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">fonts</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-252"><td class="docs"><div class="pilwrap"><a href="#section-252" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-253"><td class="docs"><div class="pilwrap"><a href="#section-253" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Holds all information related to an Interaction event</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-254"><td class="docs"><div class="pilwrap"><a href="#section-254" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This point stores the global coords of where the touch/mouse event happened</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span></pre></div></td></tr><tr id="section-255"><td class="docs"><div class="pilwrap"><a href="#section-255" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The target Sprite that was interacted with</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Sprite</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-256"><td class="docs"><div class="pilwrap"><a href="#section-256" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>When passed to an event handler, this will be the original DOM Event that was captured</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-257"><td class="docs"><div class="pilwrap"><a href="#section-257" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This will return the local coordinates of the specified displayObject for this InteractionData</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- The DisplayObject that you would like the local coords off</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Point</span><span>A point containing the coordinates of the InteractionData position relative to the DisplayObject</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLocalPosition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">global</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span></pre></div></td></tr><tr id="section-258"><td class="docs"><div class="pilwrap"><a href="#section-258" class="pilcrow">&#182;</a></div><p>do a cheeky transform to get the mouse coords;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span>
        <span class="nx">a10</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">,</span>
        <span class="nx">id</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">a00</span> <span class="o">*</span> <span class="nx">a11</span> <span class="o">+</span> <span class="nx">a01</span> <span class="o">*</span> <span class="o">-</span><span class="nx">a10</span><span class="p">);</span></pre></div></td></tr><tr id="section-259"><td class="docs"><div class="pilwrap"><a href="#section-259" class="pilcrow">&#182;</a></div><p>set the mouse coords...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="nx">a11</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="o">-</span><span class="nx">a01</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">a12</span> <span class="o">*</span> <span class="nx">a01</span> <span class="o">-</span> <span class="nx">a02</span> <span class="o">*</span> <span class="nx">a11</span><span class="p">)</span> <span class="o">*</span> <span class="nx">id</span><span class="p">,</span>
                               <span class="nx">a00</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="o">-</span><span class="nx">a10</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="nx">a12</span> <span class="o">*</span> <span class="nx">a00</span> <span class="o">+</span> <span class="nx">a02</span> <span class="o">*</span> <span class="nx">a10</span><span class="p">)</span> <span class="o">*</span> <span class="nx">id</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-260"><td class="docs"><div class="pilwrap"><a href="#section-260" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span><span class="p">;</span></pre></div></td></tr><tr id="section-261"><td class="docs"><div class="pilwrap"><a href="#section-261" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-262"><td class="docs"><div class="pilwrap"><a href="#section-262" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The interaction manager deals with mouse and touch events. Any DisplayObject can be interactive<br />if its interactive parameter is set to true<br />This manager also supports multitouch.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Stage} </span><span class="dox_type">stage</span><span>- The stage to handle interactions</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-263"><td class="docs"><div class="pilwrap"><a href="#section-263" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>a reference to the stage</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Stage</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">;</span></pre></div></td></tr><tr id="section-264"><td class="docs"><div class="pilwrap"><a href="#section-264" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the mouse data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">InteractionData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span><span class="p">();</span></pre></div></td></tr><tr id="section-265"><td class="docs"><div class="pilwrap"><a href="#section-265" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>an object that stores current touches (InteractionData) by id reference</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">touchs</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-266"><td class="docs"><div class="pilwrap"><a href="#section-266" class="pilcrow">&#182;</a></div><p>helpers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tempPoint</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span></pre></div></td></tr><tr id="section-267"><td class="docs"><div class="pilwrap"><a href="#section-267" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property mouseoverEnabled</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">mouseoverEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-268"><td class="docs"><div class="pilwrap"><a href="#section-268" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>tiny little interactiveData pool !</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">pool</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-269"><td class="docs"><div class="pilwrap"><a href="#section-269" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>An array containing all the iterative items from the our interactive tree</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-270"><td class="docs"><div class="pilwrap"><a href="#section-270" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Our canvas</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-271"><td class="docs"><div class="pilwrap"><a href="#section-271" class="pilcrow">&#182;</a></div><p>this will make it so that you dont have to call bind all the time</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">onMouseMove</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onMouseMove</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onMouseDown</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onMouseDown</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onMouseOut</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onMouseOut</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onMouseUp</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onMouseUp</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">onTouchStart</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchStart</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onTouchEnd</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchEnd</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onTouchMove</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchMove</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">last</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-272"><td class="docs"><div class="pilwrap"><a href="#section-272" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The css style of the cursor that is being used</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentCursorStyle</span> <span class="o">=</span> <span class="s1">&#39;inherit&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-273"><td class="docs"><div class="pilwrap"><a href="#section-273" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is set to true when the mouse is moved out of the canvas</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">mouseOut</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-274"><td class="docs"><div class="pilwrap"><a href="#section-274" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">;</span></pre></div></td></tr><tr id="section-275"><td class="docs"><div class="pilwrap"><a href="#section-275" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Collects an interactive sprite recursively to have their interactions managed</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- the displayObject to collect</span></div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">iParent</span><span>- the display object's parent</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">collectInteractiveSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">iParent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span></pre></div></td></tr><tr id="section-276"><td class="docs"><div class="pilwrap"><a href="#section-276" class="pilcrow">&#182;</a></div><p>make an interaction tree... {item.__interactiveParent}</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div></td></tr><tr id="section-277"><td class="docs"><div class="pilwrap"><a href="#section-277" class="pilcrow">&#182;</a></div><p>push all interactive bits</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">iParent</span><span class="p">.</span><span class="nx">interactiveChildren</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-278"><td class="docs"><div class="pilwrap"><a href="#section-278" class="pilcrow">&#182;</a></div><p>child.__iParent = iParent;</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">collectInteractiveSprite</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="nx">child</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">__iParent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">collectInteractiveSprite</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="nx">iParent</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-279"><td class="docs"><div class="pilwrap"><a href="#section-279" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the target for event delegation</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLRenderer|CanvasRenderer} </span><span class="dox_type">target</span><span>- the renderer to bind events to</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTarget</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span></pre></div></td></tr><tr id="section-280"><td class="docs"><div class="pilwrap"><a href="#section-280" class="pilcrow">&#182;</a></div><p>check if the dom element has been set. If it has don't do anything</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">setTargetDomElement</span><span class="p">(</span> <span class="nx">target</span><span class="p">.</span><span class="nx">view</span> <span class="p">);</span>
    <span class="p">}</span>


<span class="p">};</span></pre></div></td></tr><tr id="section-281"><td class="docs"><div class="pilwrap"><a href="#section-281" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the DOM element which will receive mouse/touch events. This is useful for when you have other DOM<br />elements on top of the renderers Canvas element. With this you'll be able to delegate another DOM element<br />to receive those events</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DOMElement} </span><span class="dox_type">domElement</span><span>- the DOM element which will receive mouse and touch events</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTargetDomElement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">domElement</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">();</span>


    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-282"><td class="docs"><div class="pilwrap"><a href="#section-282" class="pilcrow">&#182;</a></div><p>time to remove some of that zoom in ja..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">domElement</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;-ms-content-zooming&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
        <span class="nx">domElement</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;-ms-touch-action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-283"><td class="docs"><div class="pilwrap"><a href="#section-283" class="pilcrow">&#182;</a></div><p>DO some window specific touch!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span> <span class="o">=</span> <span class="nx">domElement</span><span class="p">;</span>

    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseDown</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseout&#39;</span><span class="p">,</span>   <span class="k">this</span><span class="p">.</span><span class="nx">onMouseOut</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></div></td></tr><tr id="section-284"><td class="docs"><div class="pilwrap"><a href="#section-284" class="pilcrow">&#182;</a></div><p>aint no multi touch just yet!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">domElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseUp</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeEvents</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;-ms-content-zooming&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;-ms-touch-action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseDown</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mouseout&#39;</span><span class="p">,</span>   <span class="k">this</span><span class="p">.</span><span class="nx">onMouseOut</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></div></td></tr><tr id="section-285"><td class="docs"><div class="pilwrap"><a href="#section-285" class="pilcrow">&#182;</a></div><p>aint no multi touch just yet!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTouchMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">onMouseUp</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-286"><td class="docs"><div class="pilwrap"><a href="#section-286" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>updates the state of interactive objects</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-287"><td class="docs"><div class="pilwrap"><a href="#section-287" class="pilcrow">&#182;</a></div><p>frequency of 30fps??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">last</span><span class="p">;</span>
    <span class="nx">diff</span> <span class="o">=</span> <span class="p">(</span><span class="nx">diff</span> <span class="o">*</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">INTERACTION_FREQUENCY</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">diff</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">last</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-288"><td class="docs"><div class="pilwrap"><a href="#section-288" class="pilcrow">&#182;</a></div><p>ok.. so mouse events??
yes for now :)
OPTIMISE - how often to check??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-289"><td class="docs"><div class="pilwrap"><a href="#section-289" class="pilcrow">&#182;</a></div><p>loop through interactive objects!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="s1">&#39;inherit&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">over</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div></td></tr><tr id="section-290"><td class="docs"><div class="pilwrap"><a href="#section-290" class="pilcrow">&#182;</a></div><p>OPTIMISATION - only calculate every time if the mousemove function exists..
OK so.. does the object have any other interactive functions?
hit-test the clip!
if(item.mouseover || item.mouseout || item.buttonMode)
{
ok so there are some functions so lets hit test it..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span></pre></div></td></tr><tr id="section-291"><td class="docs"><div class="pilwrap"><a href="#section-291" class="pilcrow">&#182;</a></div><p>ok so deal with interactions..
looks like there was a hit!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">over</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">buttonMode</span><span class="p">)</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">defaultCursor</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">interactiveChildren</span><span class="p">)</span><span class="nx">over</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseover</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseover</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
                <span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span><span class="p">)</span>
            <span class="p">{</span></pre></div></td></tr><tr id="section-292"><td class="docs"><div class="pilwrap"><a href="#section-292" class="pilcrow">&#182;</a></div><p>roll out!</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseout</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
                <span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentCursorStyle</span> <span class="o">!==</span> <span class="nx">cursor</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentCursorStyle</span> <span class="o">=</span> <span class="nx">cursor</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cursor</span> <span class="o">=</span> <span class="nx">cursor</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">interactiveChildren</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">);</span></pre></div></td></tr><tr id="section-293"><td class="docs"><div class="pilwrap"><a href="#section-293" class="pilcrow">&#182;</a></div><p>go through and collect all the objects that are interactive..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">collectInteractiveSprite</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-294"><td class="docs"><div class="pilwrap"><a href="#section-294" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when the mouse moves across the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of the mouse moving</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onMouseMove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span> <span class="c1">//IE uses window.event</span></pre></div></td></tr><tr id="section-295"><td class="docs"><div class="pilwrap"><a href="#section-295" class="pilcrow">&#182;</a></div><p>TODO optimize by not check EVERY TIME! maybe half as often? //</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mousemove</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-296"><td class="docs"><div class="pilwrap"><a href="#section-296" class="pilcrow">&#182;</a></div><p>call the function!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">item</span><span class="p">.</span><span class="nx">mousemove</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-297"><td class="docs"><div class="pilwrap"><a href="#section-297" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when the mouse button is pressed down on the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a mouse button being pressed down</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onMouseDown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span> <span class="c1">//IE uses window.event</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AUTO_PREVENT_DEFAULT</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span></pre></div></td></tr><tr id="section-298"><td class="docs"><div class="pilwrap"><a href="#section-298" class="pilcrow">&#182;</a></div><p>loop through interaction tree...
hit test each item! ->
get interactive items under point??
stage.__i</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span></pre></div></td></tr><tr id="section-299"><td class="docs"><div class="pilwrap"><a href="#section-299" class="pilcrow">&#182;</a></div><p>while
hit test</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mousedown</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">item</span><span class="p">.</span><span class="nx">__mouseIsDown</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span><span class="p">)</span>
            <span class="p">{</span></pre></div></td></tr><tr id="section-300"><td class="docs"><div class="pilwrap"><a href="#section-300" class="pilcrow">&#182;</a></div><p>call the function!</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mousedown</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">mousedown</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
                <span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-301"><td class="docs"><div class="pilwrap"><a href="#section-301" class="pilcrow">&#182;</a></div><p>just the one!</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">interactiveChildren</span><span class="p">)</span><span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-302"><td class="docs"><div class="pilwrap"><a href="#section-302" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when the mouse button is moved out of the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a mouse button being moved out</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onMouseOut</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cursor</span> <span class="o">=</span> <span class="s1">&#39;inherit&#39;</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseout</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
            <span class="nx">item</span><span class="p">.</span><span class="nx">__isOver</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mouseOut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-303"><td class="docs"><div class="pilwrap"><a href="#section-303" class="pilcrow">&#182;</a></div><p>move the mouse to an impossible position</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10000</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10000</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-304"><td class="docs"><div class="pilwrap"><a href="#section-304" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when the mouse button is released on the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a mouse button being released</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onMouseUp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span> <span class="c1">//IE uses window.event</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">up</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">up</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-305"><td class="docs"><div class="pilwrap"><a href="#section-305" class="pilcrow">&#182;</a></div><p>call the function!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseup</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">item</span><span class="p">.</span><span class="nx">mouseup</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">interactiveChildren</span><span class="p">)</span><span class="nx">up</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseupoutside</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseupoutside</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mouse</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-306"><td class="docs"><div class="pilwrap"><a href="#section-306" class="pilcrow">&#182;</a></div><p>}</p>
</td><td class="code"><div class="highlight"><pre>    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-307"><td class="docs"><div class="pilwrap"><a href="#section-307" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tests if the current mouse coordinates hit a sprite</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">item</span><span>- The displayObject to test for a hit</span></div><div class="dox_tag_detail"><span>{InteractionData} </span><span class="dox_type">interactionData</span><span>- The interactionData object to update in the case there is a hit</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hitTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">interactionData</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">global</span> <span class="o">=</span> <span class="nx">interactionData</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">worldVisible</span> <span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-308"><td class="docs"><div class="pilwrap"><a href="#section-308" class="pilcrow">&#182;</a></div><p>temp fix for if the element is in a non visible</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">isSprite</span> <span class="o">=</span> <span class="p">(</span><span class="nx">item</span> <span class="k">instanceof</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">),</span>
        <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">,</span>
        <span class="nx">a00</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span>
        <span class="nx">a10</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">,</span>
        <span class="nx">id</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">a00</span> <span class="o">*</span> <span class="nx">a11</span> <span class="o">+</span> <span class="nx">a01</span> <span class="o">*</span> <span class="o">-</span><span class="nx">a10</span><span class="p">),</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">a11</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="o">-</span><span class="nx">a01</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">a12</span> <span class="o">*</span> <span class="nx">a01</span> <span class="o">-</span> <span class="nx">a02</span> <span class="o">*</span> <span class="nx">a11</span><span class="p">)</span> <span class="o">*</span> <span class="nx">id</span><span class="p">,</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">a00</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="o">-</span><span class="nx">a10</span> <span class="o">*</span> <span class="nx">id</span> <span class="o">*</span> <span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="nx">a12</span> <span class="o">*</span> <span class="nx">a00</span> <span class="o">+</span> <span class="nx">a02</span> <span class="o">*</span> <span class="nx">a10</span><span class="p">)</span> <span class="o">*</span> <span class="nx">id</span><span class="p">;</span>

    <span class="nx">interactionData</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span></pre></div></td></tr><tr id="section-309"><td class="docs"><div class="pilwrap"><a href="#section-309" class="pilcrow">&#182;</a></div><p>a sprite or display object with a hit area defined</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">hitArea</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">hitArea</span><span class="p">.</span><span class="nx">contains</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">hitArea</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">))</span> <span class="p">{</span></pre></div></td></tr><tr id="section-310"><td class="docs"><div class="pilwrap"><a href="#section-310" class="pilcrow">&#182;</a></div><p>if(isSprite)</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">interactionData</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>

            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-311"><td class="docs"><div class="pilwrap"><a href="#section-311" class="pilcrow">&#182;</a></div><p>a sprite with no hitarea defined</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">isSprite</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
            <span class="nx">height</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
            <span class="nx">x1</span> <span class="o">=</span> <span class="o">-</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">item</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">y1</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">x1</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">x1</span> <span class="o">+</span> <span class="nx">width</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">y1</span> <span class="o">=</span> <span class="o">-</span><span class="nx">height</span> <span class="o">*</span> <span class="nx">item</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">y1</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">y1</span> <span class="o">+</span> <span class="nx">height</span><span class="p">)</span>
            <span class="p">{</span></pre></div></td></tr><tr id="section-312"><td class="docs"><div class="pilwrap"><a href="#section-312" class="pilcrow">&#182;</a></div><p>set the target property if a hit is true!</p>
</td><td class="code"><div class="highlight"><pre>                <span class="nx">interactionData</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tempItem</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">tempItem</span><span class="p">,</span> <span class="nx">interactionData</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">hit</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-313"><td class="docs"><div class="pilwrap"><a href="#section-313" class="pilcrow">&#182;</a></div><p>hmm.. TODO SET CORRECT TARGET?</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">interactionData</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-314"><td class="docs"><div class="pilwrap"><a href="#section-314" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when a touch is moved across the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a touch moving across the renderer view</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTouchMove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">changedTouches</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">touchData</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">changedTouches</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">touchEvent</span> <span class="o">=</span> <span class="nx">changedTouches</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">touchData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">touchs</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">];</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span>  <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span></pre></div></td></tr><tr id="section-315"><td class="docs"><div class="pilwrap"><a href="#section-315" class="pilcrow">&#182;</a></div><p>update the touch position</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>  <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-316"><td class="docs"><div class="pilwrap"><a href="#section-316" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>if(navigator.isCocoonJS) {<br />            touchData.global.x = touchEvent.clientX;<br />            touchData.global.y = touchEvent.clientY;<br />        }</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchmove</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">])</span> <span class="nx">item</span><span class="p">.</span><span class="nx">touchmove</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-317"><td class="docs"><div class="pilwrap"><a href="#section-317" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when a touch is started on the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a touch starting on the renderer view</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTouchStart</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span></pre></div></td></tr><tr id="section-318"><td class="docs"><div class="pilwrap"><a href="#section-318" class="pilcrow">&#182;</a></div><p>console.log('rect', rect);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AUTO_PREVENT_DEFAULT</span><span class="p">)</span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">changedTouches</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">changedTouches</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">touchEvent</span> <span class="o">=</span> <span class="nx">changedTouches</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">touchData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">touchData</span><span class="p">)</span><span class="nx">touchData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionData</span><span class="p">();</span>

        <span class="nx">touchData</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span>  <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">touchs</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="nx">touchData</span><span class="p">;</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>  <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-319"><td class="docs"><div class="pilwrap"><a href="#section-319" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>if(navigator.isCocoonJS) {<br />            touchData.global.x = touchEvent.clientX;<br />            touchData.global.y = touchEvent.clientY;<br />            // console.log('touchstart', touchEvent.clientX, touchEvent.clientY);<br />        }</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchstart</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">tap</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">touchData</span><span class="p">);</span>

                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span><span class="p">)</span>
                <span class="p">{</span></pre></div></td></tr><tr id="section-320"><td class="docs"><div class="pilwrap"><a href="#section-320" class="pilcrow">&#182;</a></div><p>call the function!</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchstart</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchstart</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
                    <span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span> <span class="o">||</span> <span class="p">{};</span>
                    <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="nx">touchData</span><span class="p">;</span>

                    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">interactiveChildren</span><span class="p">)</span><span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-321"><td class="docs"><div class="pilwrap"><a href="#section-321" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Is called when a touch is ended on the renderer element</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- The DOM event of a touch ending on the renderer view</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTouchEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rebuildInteractiveGraph</span><span class="p">();</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-322"><td class="docs"><div class="pilwrap"><a href="#section-322" class="pilcrow">&#182;</a></div><p>this.mouse.originalEvent = event || window.event; //IE uses window.event</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionDOMElement</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">changedTouches</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">changedTouches</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">touchEvent</span> <span class="o">=</span> <span class="nx">changedTouches</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">touchData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">touchs</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">up</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
        <span class="nx">touchData</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>  <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-323"><td class="docs"><div class="pilwrap"><a href="#section-323" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>if(navigator.isCocoonJS) {<br />            touchData.global.x = touchEvent.clientX;<br />            touchData.global.y = touchEvent.clientY;<br />        }</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactiveItems</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">])</span> <span class="p">{</span>

                <span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hitTest</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]);</span></pre></div></td></tr><tr id="section-324"><td class="docs"><div class="pilwrap"><a href="#section-324" class="pilcrow">&#182;</a></div><p>so this one WAS down...</p>
</td><td class="code"><div class="highlight"><pre>                <span class="nx">touchData</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span></pre></div></td></tr><tr id="section-325"><td class="docs"><div class="pilwrap"><a href="#section-325" class="pilcrow">&#182;</a></div><p>hitTest??</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchend</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">tap</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__hit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">up</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchend</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchend</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">tap</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
                        <span class="p">}</span>

                        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">interactiveChildren</span><span class="p">)</span><span class="nx">up</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchendoutside</span><span class="p">)</span><span class="nx">item</span><span class="p">.</span><span class="nx">touchendoutside</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="nx">item</span><span class="p">.</span><span class="nx">__isDown</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">item</span><span class="p">.</span><span class="nx">__touchData</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-326"><td class="docs"><div class="pilwrap"><a href="#section-326" class="pilcrow">&#182;</a></div><p>remove the touch..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">touchData</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">touchs</span><span class="p">[</span><span class="nx">touchEvent</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-327"><td class="docs"><div class="pilwrap"><a href="#section-327" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-328"><td class="docs"><div class="pilwrap"><a href="#section-328" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A Stage represents the root of the display tree. Everything connected to the stage is rendered</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">backgroundColor</span><span>- the background color of the stage, you have to pass this in is in hex format</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">backgroundColor</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-329"><td class="docs"><div class="pilwrap"><a href="#section-329" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Current transform of the object based on world (parent) factors</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Mat3</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span></pre></div></td></tr><tr id="section-330"><td class="docs"><div class="pilwrap"><a href="#section-330" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether or not the stage is interactive</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">interactive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-331"><td class="docs"><div class="pilwrap"><a href="#section-331" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The interaction manage for this stage, manages all interactive activity on the stage</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">InteractionManager</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">interactionManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InteractionManager</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-332"><td class="docs"><div class="pilwrap"><a href="#section-332" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the stage is dirty and needs to have interactions updated</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-333"><td class="docs"><div class="pilwrap"><a href="#section-333" class="pilcrow">&#182;</a></div><p>the stage is its own stage</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div></td></tr><tr id="section-334"><td class="docs"><div class="pilwrap"><a href="#section-334" class="pilcrow">&#182;</a></div><p>optimize hit detection a bit</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">hitArea</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setBackgroundColor</span><span class="p">(</span><span class="nx">backgroundColor</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-335"><td class="docs"><div class="pilwrap"><a href="#section-335" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">;</span></pre></div></td></tr><tr id="section-336"><td class="docs"><div class="pilwrap"><a href="#section-336" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets another DOM element which can receive mouse/touch interactions instead of the default Canvas element.<br />This is useful for when you have other DOM elements on top of the Canvas element.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DOMElement} </span><span class="dox_type">domElement</span><span>- This new domElement which will receive mouse/touch events</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setInteractionDelegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">domElement</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">setTargetDomElement</span><span class="p">(</span> <span class="nx">domElement</span> <span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-337"><td class="docs"><div class="pilwrap"><a href="#section-337" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateTransform</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-338"><td class="docs"><div class="pilwrap"><a href="#section-338" class="pilcrow">&#182;</a></div><p>update interactive!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-339"><td class="docs"><div class="pilwrap"><a href="#section-339" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the background color for the stage</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">backgroundColor</span><span>- the color of the background, easiest way to pass this in is in hex format</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setBackgroundColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">backgroundColor</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">backgroundColor</span> <span class="o">||</span> <span class="mh">0x000000</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backgroundColorSplit</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">hex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
    <span class="nx">hex</span> <span class="o">=</span> <span class="s1">&#39;000000&#39;</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span> <span class="o">-</span> <span class="nx">hex</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="nx">hex</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backgroundColorString</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">hex</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-340"><td class="docs"><div class="pilwrap"><a href="#section-340" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This will return the point containing global coords of the mouse.</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Point</span><span>The point containing the coords of the global InteractionData position.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Stage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMousePosition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-341"><td class="docs"><div class="pilwrap"><a href="#section-341" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-342"><td class="docs"><div class="pilwrap"><a href="#section-342" class="pilcrow">&#182;</a></div><p>http://paulirish.com/2011/requestanimationframe-for-smart-animating/
http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-343"><td class="docs"><div class="pilwrap"><a href="#section-343" class="pilcrow">&#182;</a></div><p>requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-344"><td class="docs"><div class="pilwrap"><a href="#section-344" class="pilcrow">&#182;</a></div><p>MIT license</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-345"><td class="docs"><div class="pilwrap"><a href="#section-345" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A polyfill for requestAnimationFrame<br />You can actually use both requestAnimationFrame and requestAnimFrame,<br />you will still benefit from the polyfill</p></div><div class="details"></div><div class="body"></div></div><div class="dox"><div class="summary"><p>A polyfill for cancelAnimationFrame</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">lastTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">vendors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ms&#39;</span><span class="p">,</span> <span class="s1">&#39;moz&#39;</span><span class="p">,</span> <span class="s1">&#39;webkit&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">];</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">vendors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">;</span> <span class="o">++</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">[</span><span class="nx">vendors</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;RequestAnimationFrame&#39;</span><span class="p">];</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">cancelAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">[</span><span class="nx">vendors</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;CancelAnimationFrame&#39;</span><span class="p">]</span> <span class="o">||</span>
        <span class="nb">window</span><span class="p">[</span><span class="nx">vendors</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;CancelRequestAnimationFrame&#39;</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">currTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">timeToCall</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span> <span class="o">-</span> <span class="p">(</span><span class="nx">currTime</span> <span class="o">-</span> <span class="nx">lastTime</span><span class="p">));</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">currTime</span> <span class="o">+</span> <span class="nx">timeToCall</span><span class="p">);</span> <span class="p">},</span>
          <span class="nx">timeToCall</span><span class="p">);</span>
        <span class="nx">lastTime</span> <span class="o">=</span> <span class="nx">currTime</span> <span class="o">+</span> <span class="nx">timeToCall</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">id</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">cancelAnimationFrame</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">cancelAnimationFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">;</span></pre></div></td></tr><tr id="section-346"><td class="docs"><div class="pilwrap"><a href="#section-346" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Converts a hex color number to an [R, G, B] array</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">hex</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[(</span><span class="nx">hex</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="p">(</span> <span class="nx">hex</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="p">(</span><span class="nx">hex</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span><span class="o">/</span> <span class="mi">255</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-347"><td class="docs"><div class="pilwrap"><a href="#section-347" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Converts a color as an [R, G, B] array to a hex number</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">rgb</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">rgb2hex</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rgb</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">rgb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">255</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">rgb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">255</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nx">rgb</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">255</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-348"><td class="docs"><div class="pilwrap"><a href="#section-348" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A polyfill for Function.prototype.bind</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">;</span>
        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">thisArg</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">boundArgs</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">target</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">();</span>

            <span class="kd">function</span> <span class="nx">bound</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">boundArgs</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>
                <span class="nx">target</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">bound</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="nx">thisArg</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">bound</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="nx">F</span><span class="p">(</span><span class="nx">proto</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">proto</span><span class="p">)</span> <span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">F</span><span class="p">))</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span>
            <span class="p">})(</span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">bound</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">})();</span>
<span class="p">}</span></pre></div></td></tr><tr id="section-349"><td class="docs"><div class="pilwrap"><a href="#section-349" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A wrapper for ajax requests to be handled cross browser</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AjaxRequest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">activexmodes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Msxml2.XMLHTTP.6.0&#39;</span><span class="p">,</span> <span class="s1">&#39;Msxml2.XMLHTTP.3.0&#39;</span><span class="p">,</span> <span class="s1">&#39;Microsoft.XMLHTTP&#39;</span><span class="p">];</span> <span class="c1">//activeX versions to check for in IE</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">)</span>
    <span class="p">{</span> <span class="c1">//Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">activexmodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">try</span><span class="p">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">(</span><span class="nx">activexmodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-350"><td class="docs"><div class="pilwrap"><a href="#section-350" class="pilcrow">&#182;</a></div><p>suppress error</p>
</td><td class="code"><div class="highlight"><pre>            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span> <span class="c1">// if Mozilla, Safari etc</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-351"><td class="docs"><div class="pilwrap"><a href="#section-351" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>PIXI.packColorRGBA = function(r, g, b, a)//r, g, b, a)<br />{<br />  //  console.log(r, b, c, d)<br />  return (Math.floor((r)<em>63) &lt;&lt; 18) | (Math.floor((g)</em>63) &lt;&lt; 12) | (Math.floor((b)<em>63) &lt;&lt; 6);// | (Math.floor((a)</em>63))<br />  //  i = i | (Math.floor((a)*63));<br />   // return i;<br />   // var r = (i / 262144.0 ) / 64;<br />   // var g = (i / 4096.0)%64 / 64;<br />  //  var b = (i / 64.0)%64 / 64;<br />  //  var a = (i)%64 / 64;</p></div><div class="body"><p>//  console.log(r, g, b, a);<br />  //  return i;</p>

<p>};</p></div></div><div class="dox"><div class="summary"><p>PIXI.packColorRGB = function(r, g, b)//r, g, b, a)<br />{<br />    return (Math.floor((r)<em>255) &lt;&lt; 16) | (Math.floor((g)</em>255) &lt;&lt; 8) | (Math.floor((b)*255));<br />};</p></div><div class="body"><p>PIXI.unpackColorRGB = function(r, g, b)//r, g, b, a)<br />{<br />    return (Math.floor((r)<em>255) &lt;&lt; 16) | (Math.floor((g)</em>255) &lt;&lt; 8) | (Math.floor((b)*255));<br />};</p></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-352"><td class="docs"><div class="pilwrap"><a href="#section-352" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether the Canvas BlendModes are supported by the current browser</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span><span>whether they are supported</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">canUseNewCanvasBlendModes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;#000&#39;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s1">&#39;multiply&#39;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;#fff&#39;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-353"><td class="docs"><div class="pilwrap"><a href="#section-353" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Given a number, this function returns the closest number that is a power of two<br />this function is taken from Starling Framework as its pretty neat ;)</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">number</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Number</span><span>the closest number that is a power of two</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">getNextPowerOfTwo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">number</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">number</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nx">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// see: http://goo.gl/D9kPj</span>
        <span class="k">return</span> <span class="nx">number</span><span class="p">;</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">result</span> <span class="o">&lt;</span> <span class="nx">number</span><span class="p">)</span> <span class="nx">result</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-354"><td class="docs"><div class="pilwrap"><a href="#section-354" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-355"><td class="docs"><div class="pilwrap"><a href="#section-355" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p><a href='https://github.com/mrdoob/eventtarget.js/'>https://github.com/mrdoob/eventtarget.js/</a><br />THankS mr DOob!</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-356"><td class="docs"><div class="pilwrap"><a href="#section-356" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds event emitter functionality to a class</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-357"><td class="docs"><div class="pilwrap"><a href="#section-357" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Holds all the listeners</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-358"><td class="docs"><div class="pilwrap"><a href="#section-358" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a listener for a specific event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{string} </span><span class="dox_type">type</span><span>- A string representing the event type to listen for.</span></div><div class="dox_tag_detail"><span>{function} </span><span class="dox_type">listener</span><span>- The callback function that will be fired when the event occurs</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span> <span class="p">)</span> <span class="p">{</span>


        <span class="k">if</span> <span class="p">(</span> <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">listener</span> <span class="p">)</span> <span class="o">===</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">listener</span> <span class="p">);</span>
        <span class="p">}</span>

    <span class="p">};</span></pre></div></td></tr><tr id="section-359"><td class="docs"><div class="pilwrap"><a href="#section-359" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Fires the event, ie pretends that the event has happened</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span><span>- the event object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">emit</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">listeners</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="o">!</span><span class="nx">listeners</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">].</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">return</span><span class="p">;</span>

        <span class="p">}</span>


        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">].</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-360"><td class="docs"><div class="pilwrap"><a href="#section-360" class="pilcrow">&#182;</a></div><pre><code>   for(var i = 0, l=listeners[ event.type ].length; i &lt; l; i++) {
</code></pre>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">listeners</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">event</span> <span class="p">);</span>

        <span class="p">}</span>

    <span class="p">};</span></pre></div></td></tr><tr id="section-361"><td class="docs"><div class="pilwrap"><a href="#section-361" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes the specified listener that was assigned to the specified event type</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{string} </span><span class="dox_type">type</span><span>- A string representing the event type which will have its listener removed</span></div><div class="dox_tag_detail"><span>{function} </span><span class="dox_type">listener</span><span>- The callback function that was be fired when the event occured</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">off</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">listener</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">!==</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">listeners</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

        <span class="p">}</span>

    <span class="p">};</span></pre></div></td></tr><tr id="section-362"><td class="docs"><div class="pilwrap"><a href="#section-362" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes all the listeners that were active for the specified event type</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{string} </span><span class="dox_type">type</span><span>- A string representing the event type which will have all its listeners removed</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">removeAllEventListeners</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-363"><td class="docs"><div class="pilwrap"><a href="#section-363" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-364"><td class="docs"><div class="pilwrap"><a href="#section-364" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This helper function will automatically detect which renderer you should be using.<br />WebGL is the preferred renderer as it is a lot faster. If webGL is not supported by<br />the browser then this function will return a canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width=800</span><span>- the width of the renderers view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height=600</span><span>- the height of the renderers view</span></div><div class="dox_tag_detail"><span>{Canvas} </span><span class="dox_type">[view]</span><span>- the canvas to use as a view, optional</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[transparent=false]</span><span>- the transparency of the render view, default false</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[antialias=false]</span><span>- sets antialias (only applicable in webGL chrome at the moment)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">autoDetectRenderer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">,</span> <span class="nx">antialias</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">width</span><span class="p">)</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">height</span><span class="p">)</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span></pre></div></td></tr><tr id="section-365"><td class="docs"><div class="pilwrap"><a href="#section-365" class="pilcrow">&#182;</a></div><p>BORROWED from Mr Doob (mrdoob.com)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">webgl</span> <span class="o">=</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">try</span> <span class="p">{</span>
                                    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">);</span>
                                    <span class="k">return</span> <span class="o">!!</span> <span class="nb">window</span><span class="p">.</span><span class="nx">WebGLRenderingContext</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s1">&#39;webgl&#39;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s1">&#39;experimental-webgl&#39;</span> <span class="p">)</span> <span class="p">);</span>
                                <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
                                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span> <span class="p">)();</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">webgl</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">,</span> <span class="nx">antialias</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span>  <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-366"><td class="docs"><div class="pilwrap"><a href="#section-366" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This helper function will automatically detect which renderer you should be using.<br />This function is very similar to the autoDetectRenderer function except that is will return a canvas renderer for android.<br />Even thought both android chrome suports webGL the canvas implementation perform better at the time of writing.<br />This function will likely change and update as webGL performance imporoves on thease devices.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width=800</span><span>- the width of the renderers view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height=600</span><span>- the height of the renderers view</span></div><div class="dox_tag_detail"><span>{Canvas} </span><span class="dox_type">[view]</span><span>- the canvas to use as a view, optional</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[transparent=false]</span><span>- the transparency of the render view, default false</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[antialias=false]</span><span>- sets antialias (only applicable in webGL chrome at the moment)</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">autoDetectRecommendedRenderer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">,</span> <span class="nx">antialias</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">width</span><span class="p">)</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">height</span><span class="p">)</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span></pre></div></td></tr><tr id="section-367"><td class="docs"><div class="pilwrap"><a href="#section-367" class="pilcrow">&#182;</a></div><p>BORROWED from Mr Doob (mrdoob.com)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">webgl</span> <span class="o">=</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">try</span> <span class="p">{</span>
                                    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">);</span>
                                    <span class="k">return</span> <span class="o">!!</span> <span class="nb">window</span><span class="p">.</span><span class="nx">WebGLRenderingContext</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s1">&#39;webgl&#39;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s1">&#39;experimental-webgl&#39;</span> <span class="p">)</span> <span class="p">);</span>
                                <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
                                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span> <span class="p">)();</span>

    <span class="kd">var</span> <span class="nx">isAndroid</span> <span class="o">=</span> <span class="sr">/Android/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">webgl</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isAndroid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">,</span> <span class="nx">antialias</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span>  <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-368"><td class="docs"><div class="pilwrap"><a href="#section-368" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>PolyK library<br />    url: <a href='http://polyk.ivank.net'>http://polyk.ivank.net</a><br />    Released under MIT licence.</p></div><div class="body"><pre><code>Copyright (c) 2012 Ivan Kuckir

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
</code></pre>

<h2>conditions</h2>

<pre><code>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

This is an amazing lib!

slightly modified by Mat Groves (matgroves.com);
</code></pre></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-369"><td class="docs"><div class="pilwrap"><a href="#section-369" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Based on the Polyk library <a href='http://polyk.ivank.net'>http://polyk.ivank.net</a> released under MIT licence.<br />This is an amazing lib!<br />slightly modified by Mat Groves (matgroves.com);</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-370"><td class="docs"><div class="pilwrap"><a href="#section-370" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Triangulates shapes for webGL graphic fills</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">Triangulate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sign</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">tgs</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">avl</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">avl</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>

    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">al</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">al</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i0</span> <span class="o">=</span> <span class="nx">avl</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mi">0</span><span class="p">)</span><span class="o">%</span><span class="nx">al</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">i1</span> <span class="o">=</span> <span class="nx">avl</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="nx">al</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">i2</span> <span class="o">=</span> <span class="nx">avl</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">%</span><span class="nx">al</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">ax</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i0</span><span class="p">],</span>  <span class="nx">ay</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i0</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">bx</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i1</span><span class="p">],</span>  <span class="nx">by</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i1</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i2</span><span class="p">],</span>  <span class="nx">cy</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i2</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">earFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">_convex</span><span class="p">(</span><span class="nx">ax</span><span class="p">,</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">sign</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="nx">earFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">al</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">vi</span> <span class="o">=</span> <span class="nx">avl</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">vi</span> <span class="o">===</span> <span class="nx">i0</span> <span class="o">||</span> <span class="nx">vi</span> <span class="o">===</span> <span class="nx">i1</span> <span class="o">||</span> <span class="nx">vi</span> <span class="o">===</span> <span class="nx">i2</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

                <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">_PointInTriangle</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">vi</span><span class="p">],</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">vi</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nx">ax</span><span class="p">,</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">earFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">earFound</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">tgs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i0</span><span class="p">,</span> <span class="nx">i1</span><span class="p">,</span> <span class="nx">i2</span><span class="p">);</span>
            <span class="nx">avl</span><span class="p">.</span><span class="nx">splice</span><span class="p">((</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="nx">al</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">al</span><span class="o">--</span><span class="p">;</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">*</span><span class="nx">al</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-371"><td class="docs"><div class="pilwrap"><a href="#section-371" class="pilcrow">&#182;</a></div><p>need to flip flip reverse it!
reset!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">sign</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">tgs</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="nx">avl</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">avl</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>

                <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">al</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>

                <span class="nx">sign</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;PIXI Warning: shape too complex to fill&quot;</span><span class="p">);</span>
                <span class="k">return</span> <span class="p">[];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">tgs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">avl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">avl</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">avl</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">tgs</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-372"><td class="docs"><div class="pilwrap"><a href="#section-372" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether a point is within a triangle</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">px</span><span>- x coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">py</span><span>- y coordinate of the point to test</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">ax</span><span>- x coordinate of the a point of the triangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">ay</span><span>- y coordinate of the a point of the triangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">bx</span><span>- x coordinate of the b point of the triangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">by</span><span>- y coordinate of the b point of the triangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">cx</span><span>- x coordinate of the c point of the triangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">cy</span><span>- y coordinate of the c point of the triangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">_PointInTriangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">,</span> <span class="nx">ax</span><span class="p">,</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">v0x</span> <span class="o">=</span> <span class="nx">cx</span><span class="o">-</span><span class="nx">ax</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v0y</span> <span class="o">=</span> <span class="nx">cy</span><span class="o">-</span><span class="nx">ay</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v1x</span> <span class="o">=</span> <span class="nx">bx</span><span class="o">-</span><span class="nx">ax</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v1y</span> <span class="o">=</span> <span class="nx">by</span><span class="o">-</span><span class="nx">ay</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v2x</span> <span class="o">=</span> <span class="nx">px</span><span class="o">-</span><span class="nx">ax</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v2y</span> <span class="o">=</span> <span class="nx">py</span><span class="o">-</span><span class="nx">ay</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">dot00</span> <span class="o">=</span> <span class="nx">v0x</span><span class="o">*</span><span class="nx">v0x</span><span class="o">+</span><span class="nx">v0y</span><span class="o">*</span><span class="nx">v0y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dot01</span> <span class="o">=</span> <span class="nx">v0x</span><span class="o">*</span><span class="nx">v1x</span><span class="o">+</span><span class="nx">v0y</span><span class="o">*</span><span class="nx">v1y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dot02</span> <span class="o">=</span> <span class="nx">v0x</span><span class="o">*</span><span class="nx">v2x</span><span class="o">+</span><span class="nx">v0y</span><span class="o">*</span><span class="nx">v2y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dot11</span> <span class="o">=</span> <span class="nx">v1x</span><span class="o">*</span><span class="nx">v1x</span><span class="o">+</span><span class="nx">v1y</span><span class="o">*</span><span class="nx">v1y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dot12</span> <span class="o">=</span> <span class="nx">v1x</span><span class="o">*</span><span class="nx">v2x</span><span class="o">+</span><span class="nx">v1y</span><span class="o">*</span><span class="nx">v2y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">invDenom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">dot00</span> <span class="o">*</span> <span class="nx">dot11</span> <span class="o">-</span> <span class="nx">dot01</span> <span class="o">*</span> <span class="nx">dot01</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dot11</span> <span class="o">*</span> <span class="nx">dot02</span> <span class="o">-</span> <span class="nx">dot01</span> <span class="o">*</span> <span class="nx">dot12</span><span class="p">)</span> <span class="o">*</span> <span class="nx">invDenom</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dot00</span> <span class="o">*</span> <span class="nx">dot12</span> <span class="o">-</span> <span class="nx">dot01</span> <span class="o">*</span> <span class="nx">dot02</span><span class="p">)</span> <span class="o">*</span> <span class="nx">invDenom</span><span class="p">;</span></pre></div></td></tr><tr id="section-373"><td class="docs"><div class="pilwrap"><a href="#section-373" class="pilcrow">&#182;</a></div><p>Check if point is in triangle</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">return</span> <span class="p">(</span><span class="nx">u</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">v</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">u</span> <span class="o">+</span> <span class="nx">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-374"><td class="docs"><div class="pilwrap"><a href="#section-374" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Checks whether a shape is convex</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">_convex</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ax</span><span class="p">,</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">sign</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">ay</span><span class="o">-</span><span class="nx">by</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nx">cx</span><span class="o">-</span><span class="nx">bx</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">bx</span><span class="o">-</span><span class="nx">ax</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nx">cy</span><span class="o">-</span><span class="nx">by</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">sign</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-375"><td class="docs"><div class="pilwrap"><a href="#section-375" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-376"><td class="docs"><div class="pilwrap"><a href="#section-376" class="pilcrow">&#182;</a></div><p>TODO Alvin and Mat
Should we eventually create a Utils class ?
Or just move this file to the pixi.js file ?</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">initDefaultShaders</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-377"><td class="docs"><div class="pilwrap"><a href="#section-377" class="pilcrow">&#182;</a></div><p>PIXI.stripShader = new PIXI.StripShader();
   PIXI.stripShader.init();</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CompileVertexShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">shaderSrc</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_CompileShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">shaderSrc</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">VERTEX_SHADER</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CompileFragmentShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">shaderSrc</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_CompileShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">shaderSrc</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FRAGMENT_SHADER</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">_CompileShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">shaderSrc</span><span class="p">,</span> <span class="nx">shaderType</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">shaderSrc</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">shader</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createShader</span><span class="p">(</span><span class="nx">shaderType</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">shaderSource</span><span class="p">(</span><span class="nx">shader</span><span class="p">,</span> <span class="nx">src</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">compileShader</span><span class="p">(</span><span class="nx">shader</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getShaderParameter</span><span class="p">(</span><span class="nx">shader</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">COMPILE_STATUS</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getShaderInfoLog</span><span class="p">(</span><span class="nx">shader</span><span class="p">));</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">shader</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">vertexSrc</span><span class="p">,</span> <span class="nx">fragmentSrc</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fragmentShader</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CompileFragmentShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">fragmentSrc</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">vertexShader</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CompileVertexShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">vertexSrc</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">shaderProgram</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createProgram</span><span class="p">();</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">attachShader</span><span class="p">(</span><span class="nx">shaderProgram</span><span class="p">,</span> <span class="nx">vertexShader</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">attachShader</span><span class="p">(</span><span class="nx">shaderProgram</span><span class="p">,</span> <span class="nx">fragmentShader</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">linkProgram</span><span class="p">(</span><span class="nx">shaderProgram</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gl</span><span class="p">.</span><span class="nx">getProgramParameter</span><span class="p">(</span><span class="nx">shaderProgram</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINK_STATUS</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Could not initialise shaders&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">shaderProgram</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-378"><td class="docs"><div class="pilwrap"><a href="#section-378" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-379"><td class="docs"><div class="pilwrap"><a href="#section-379" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class PixiShader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-380"><td class="docs"><div class="pilwrap"><a href="#section-380" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property gl</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">WebGLContext</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-381"><td class="docs"><div class="pilwrap"><a href="#section-381" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {any} program - The WebGL program.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-382"><td class="docs"><div class="pilwrap"><a href="#section-382" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {array} fragmentSrc - The fragment shader.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision lowp float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-383"><td class="docs"><div class="pilwrap"><a href="#section-383" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {number} textureCount - A local texture counter for multi-texture shaders.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-384"><td class="docs"><div class="pilwrap"><a href="#section-384" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">defaultVertexSrc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">);</span></pre></div></td></tr><tr id="section-385"><td class="docs"><div class="pilwrap"><a href="#section-385" class="pilcrow">&#182;</a></div><p>get and store the uniforms for the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uSampler</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;uSampler&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">projectionVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;projectionVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;offsetVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dimensions</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-386"><td class="docs"><div class="pilwrap"><a href="#section-386" class="pilcrow">&#182;</a></div><p>get and store the attributes</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aVertexPosition&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aTextureCoord&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aColor&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-387"><td class="docs"><div class="pilwrap"><a href="#section-387" class="pilcrow">&#182;</a></div><p>Begin worst hack eva //</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-388"><td class="docs"><div class="pilwrap"><a href="#section-388" class="pilcrow">&#182;</a></div><p>WHY??? ONLY on my chrome pixel the line above returns -1 when using filters?
maybe its something to do with the current state of the gl context.
Im convinced this is a bug in the chrome browser as there is NO reason why this should be returning -1 especially as it only manifests on my chrome pixel
If theres any webGL people that know why could happen please help :)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">];</span></pre></div></td></tr><tr id="section-389"><td class="docs"><div class="pilwrap"><a href="#section-389" class="pilcrow">&#182;</a></div><p>End worst hack eva //</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-390"><td class="docs"><div class="pilwrap"><a href="#section-390" class="pilcrow">&#182;</a></div><p>add those custom shaders!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-391"><td class="docs"><div class="pilwrap"><a href="#section-391" class="pilcrow">&#182;</a></div><p>get the uniform locations..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">uniformLocation</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">initUniforms</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="nx">program</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-392"><td class="docs"><div class="pilwrap"><a href="#section-392" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader uniform values.<br />Uniforms are specified in the GLSL_ES Specification: <a href='http://www.khronos.org/registry/webgl/specs/latest/1.0/'>http://www.khronos.org/registry/webgl/specs/latest/1.0/</a><br /><a href='http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf'>http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf</a></p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initUniforms</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">uniform</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">uniform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;sampler2D&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">uniform</span><span class="p">.</span><span class="nx">_init</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">initSampler2D</span><span class="p">(</span><span class="nx">uniform</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat2&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat3&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat4&#39;</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-393"><td class="docs"><div class="pilwrap"><a href="#section-393" class="pilcrow">&#182;</a></div><p>These require special handling</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glMatrix</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat2&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix2fv</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat3&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;mat4&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix4fv</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-394"><td class="docs"><div class="pilwrap"><a href="#section-394" class="pilcrow">&#182;</a></div><p>GL function reference</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">[</span><span class="s1">&#39;uniform&#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;2f&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;2i&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;3f&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;3i&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;4f&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;4i&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-395"><td class="docs"><div class="pilwrap"><a href="#section-395" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises a Sampler2D uniform (which may only be available later on after initUniforms once the texture has loaded)</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initSampler2D</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uniform</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span> <span class="o">||</span> <span class="o">!</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">[</span><span class="s1">&#39;TEXTURE&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="p">]);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]);</span></pre></div></td></tr><tr id="section-396"><td class="docs"><div class="pilwrap"><a href="#section-396" class="pilcrow">&#182;</a></div><p>Extended texture data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">textureData</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">textureData</span><span class="p">;</span></pre></div></td></tr><tr id="section-397"><td class="docs"><div class="pilwrap"><a href="#section-397" class="pilcrow">&#182;</a></div><p>GLTexture = mag linear, min linear<em>mipmap</em>linear, wrap repeat + gl.generateMipmap(gl.TEXTURE_2D);
GLTextureLinear = mag/min linear, wrap clamp
GLTextureNearestRepeat = mag/min NEAREST, wrap repeat
GLTextureNearest = mag/min nearest, wrap clamp
AudioTexture = whatever + luminance + width 512, height 2, border 0
KeyTexture = whatever + luminance + width 256, height 2, border 0</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-398"><td class="docs"><div class="pilwrap"><a href="#section-398" class="pilcrow">&#182;</a></div><p>magFilter can be: gl.LINEAR, gl.LINEAR<em>MIPMAP</em>LINEAR or gl.NEAREST
 wrapS/T can be: gl.CLAMP<em>TO</em>EDGE or gl.REPEAT</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">magFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">magFilter</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">magFilter</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">minFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">minFilter</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">minFilter</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">wrapS</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">wrapS</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wrapS</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">wrapT</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">wrapT</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wrapT</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">format</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">luminance</span><span class="p">)</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LUMINANCE</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">repeat</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">wrapS</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">;</span>
            <span class="nx">wrapT</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">pixelStorei</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">UNPACK_FLIP_Y_WEBGL</span><span class="p">,</span> <span class="o">!!</span><span class="nx">data</span><span class="p">.</span><span class="nx">flipY</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">width</span> <span class="o">:</span> <span class="mi">512</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">height</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">border</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">border</span><span class="p">)</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">border</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-399"><td class="docs"><div class="pilwrap"><a href="#section-399" class="pilcrow">&#182;</a></div><p>void texImage2D(GLenum target, GLint level, GLenum internalformat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, ArrayBufferView? pixels);</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">texImage2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">format</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">border</span><span class="p">,</span> <span class="nx">format</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_BYTE</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-400"><td class="docs"><div class="pilwrap"><a href="#section-400" class="pilcrow">&#182;</a></div><p>void texImage2D(GLenum target, GLint level, GLenum internalformat, GLenum format, GLenum type, ImageData? pixels);</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">texImage2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">format</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_BYTE</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="nx">magFilter</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="nx">minFilter</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">wrapS</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">wrapT</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1i</span><span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="p">);</span>

    <span class="nx">uniform</span><span class="p">.</span><span class="nx">_init</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="o">++</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-401"><td class="docs"><div class="pilwrap"><a href="#section-401" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the shader uniform values.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">syncUniforms</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">uniform</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-402"><td class="docs"><div class="pilwrap"><a href="#section-402" class="pilcrow">&#182;</a></div><p>This would probably be faster in an array and it would guarantee key order</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">uniform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">glMatrix</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">transpose</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">z</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">glValueLength</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">uniform</span><span class="p">.</span><span class="nx">glFunc</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">z</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">w</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;sampler2D&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">_init</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">[</span><span class="s1">&#39;TEXTURE&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="p">]);</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span><span class="p">(</span> <span class="nx">uniform</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">));</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1i</span><span class="p">(</span><span class="nx">uniform</span><span class="p">.</span><span class="nx">uniformLocation</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">initSampler2D</span><span class="p">(</span><span class="nx">uniform</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-403"><td class="docs"><div class="pilwrap"><a href="#section-403" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteProgram</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-404"><td class="docs"><div class="pilwrap"><a href="#section-404" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Default Vertex shader source</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">.</span><span class="nx">defaultVertexSrc</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;attribute vec2 aVertexPosition;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;attribute vec2 aTextureCoord;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;attribute vec2 aColor;&#39;</span><span class="p">,</span>

    <span class="s1">&#39;uniform vec2 projectionVector;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;uniform vec2 offsetVector;&#39;</span><span class="p">,</span>

    <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>

    <span class="s1">&#39;const vec2 center = vec2(-1.0, 1.0);&#39;</span><span class="p">,</span>

    <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
    <span class="s1">&#39;   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);&#39;</span><span class="p">,</span>
    <span class="s1">&#39;   vTextureCoord = aTextureCoord;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;   vColor = vec4(color * aColor.x, aColor.x);&#39;</span><span class="p">,</span>
    <span class="s1">&#39;}&#39;</span>
<span class="p">];</span></pre></div></td></tr><tr id="section-405"><td class="docs"><div class="pilwrap"><a href="#section-405" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-406"><td class="docs"><div class="pilwrap"><a href="#section-406" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class PixiFastShader</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiFastShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-407"><td class="docs"><div class="pilwrap"><a href="#section-407" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property gl</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">WebGLContext</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-408"><td class="docs"><div class="pilwrap"><a href="#section-408" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {any} program - The WebGL program.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-409"><td class="docs"><div class="pilwrap"><a href="#section-409" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {array} fragmentSrc - The fragment shader.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision lowp float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying float vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-410"><td class="docs"><div class="pilwrap"><a href="#section-410" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {array} vertexSrc - The vertex shader</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;attribute vec2 aVertexPosition;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute vec2 aPositionCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute vec2 aScale;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute float aRotation;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute vec2 aTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute float aColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;uniform vec2 projectionVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offsetVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform mat3 uMatrix;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying float vColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;const vec2 center = vec2(-1.0, 1.0);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 v;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 sv = aVertexPosition * aScale;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vTextureCoord = aTextureCoord;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-411"><td class="docs"><div class="pilwrap"><a href="#section-411" class="pilcrow">&#182;</a></div><p>'   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;   vColor = aColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-412"><td class="docs"><div class="pilwrap"><a href="#section-412" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {number} textureCount - A local texture counter for multi-texture shaders.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textureCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-413"><td class="docs"><div class="pilwrap"><a href="#section-413" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiFastShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">);</span></pre></div></td></tr><tr id="section-414"><td class="docs"><div class="pilwrap"><a href="#section-414" class="pilcrow">&#182;</a></div><p>get and store the uniforms for the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uSampler</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;uSampler&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">projectionVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;projectionVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;offsetVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dimensions</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uMatrix</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;uMatrix&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-415"><td class="docs"><div class="pilwrap"><a href="#section-415" class="pilcrow">&#182;</a></div><p>get and store the attributes</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aVertexPosition&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">aPositionCoord</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aPositionCoord&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">aScale</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aScale&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">aRotation</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aRotation&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aTextureCoord&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aColor&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-416"><td class="docs"><div class="pilwrap"><a href="#section-416" class="pilcrow">&#182;</a></div><p>Begin worst hack eva //</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-417"><td class="docs"><div class="pilwrap"><a href="#section-417" class="pilcrow">&#182;</a></div><p>WHY??? ONLY on my chrome pixel the line above returns -1 when using filters?
maybe its somthing to do with the current state of the gl context.
Im convinced this is a bug in the chrome browser as there is NO reason why this should be returning -1 especially as it only manifests on my chrome pixel
If theres any webGL people that know why could happen please help :)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">aPositionCoord</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">aScale</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">aRotation</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">];</span></pre></div></td></tr><tr id="section-418"><td class="docs"><div class="pilwrap"><a href="#section-418" class="pilcrow">&#182;</a></div><p>End worst hack eva //</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="nx">program</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-419"><td class="docs"><div class="pilwrap"><a href="#section-419" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiFastShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteProgram</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-420"><td class="docs"><div class="pilwrap"><a href="#section-420" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">StripShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span><span class="o">++</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-421"><td class="docs"><div class="pilwrap"><a href="#section-421" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {any} program - The WebGL program.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-422"><td class="docs"><div class="pilwrap"><a href="#section-422" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {array} fragmentSrc - The fragment shader.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-423"><td class="docs"><div class="pilwrap"><a href="#section-423" class="pilcrow">&#182;</a></div><p>'varying float vColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;uniform float alpha;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-424"><td class="docs"><div class="pilwrap"><a href="#section-424" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor = vec4(1.0, 0.0, 0.0, 1.0);',//gl</em>FragColor * alpha;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-425"><td class="docs"><div class="pilwrap"><a href="#section-425" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {array} fragmentSrc - The fragment shader.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span>  <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;attribute vec2 aVertexPosition;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute vec2 aTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform mat3 translationMatrix;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 projectionVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offsetVector;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-426"><td class="docs"><div class="pilwrap"><a href="#section-426" class="pilcrow">&#182;</a></div><p>'uniform float alpha;',
'uniform vec3 tint;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-427"><td class="docs"><div class="pilwrap"><a href="#section-427" class="pilcrow">&#182;</a></div><p>'varying vec4 vColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v -= offsetVector.xyx;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vTextureCoord = aTextureCoord;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-428"><td class="docs"><div class="pilwrap"><a href="#section-428" class="pilcrow">&#182;</a></div><p>'   vColor = aColor * vec4(tint * alpha, alpha);',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-429"><td class="docs"><div class="pilwrap"><a href="#section-429" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">StripShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">);</span></pre></div></td></tr><tr id="section-430"><td class="docs"><div class="pilwrap"><a href="#section-430" class="pilcrow">&#182;</a></div><p>get and store the uniforms for the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uSampler</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;uSampler&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">projectionVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;projectionVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;offsetVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aColor&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-431"><td class="docs"><div class="pilwrap"><a href="#section-431" class="pilcrow">&#182;</a></div><p>this.dimensions = gl.getUniformLocation(this.program, 'dimensions');</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-432"><td class="docs"><div class="pilwrap"><a href="#section-432" class="pilcrow">&#182;</a></div><p>get and store the attributes</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aVertexPosition&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aTextureCoord&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">translationMatrix</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;translationMatrix&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="nx">program</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-433"><td class="docs"><div class="pilwrap"><a href="#section-433" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-434"><td class="docs"><div class="pilwrap"><a href="#section-434" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class PrimitiveShader</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PrimitiveShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-435"><td class="docs"><div class="pilwrap"><a href="#section-435" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property gl</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">WebGLContext</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-436"><td class="docs"><div class="pilwrap"><a href="#section-436" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {any} program - The WebGL program.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-437"><td class="docs"><div class="pilwrap"><a href="#section-437" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property fragmentSrc</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-438"><td class="docs"><div class="pilwrap"><a href="#section-438" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property vertexSrc</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span>  <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;attribute vec2 aVertexPosition;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;attribute vec4 aColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform mat3 translationMatrix;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 projectionVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offsetVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float alpha;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec3 tint;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v -= offsetVector.xyx;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vColor = aColor * vec4(tint * alpha, alpha);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-439"><td class="docs"><div class="pilwrap"><a href="#section-439" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PrimitiveShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">);</span></pre></div></td></tr><tr id="section-440"><td class="docs"><div class="pilwrap"><a href="#section-440" class="pilcrow">&#182;</a></div><p>get and store the uniforms for the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">projectionVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;projectionVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;offsetVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tintColor</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;tint&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-441"><td class="docs"><div class="pilwrap"><a href="#section-441" class="pilcrow">&#182;</a></div><p>get and store the attributes</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aVertexPosition&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aColor&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">translationMatrix</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;translationMatrix&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="nx">program</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-442"><td class="docs"><div class="pilwrap"><a href="#section-442" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PrimitiveShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteProgram</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attribute</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-443"><td class="docs"><div class="pilwrap"><a href="#section-443" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-444"><td class="docs"><div class="pilwrap"><a href="#section-444" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class ComplexPrimitiveShader</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ComplexPrimitiveShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_UID</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">_UID</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-445"><td class="docs"><div class="pilwrap"><a href="#section-445" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property gl</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">WebGLContext</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-446"><td class="docs"><div class="pilwrap"><a href="#section-446" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property {any} program - The WebGL program.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-447"><td class="docs"><div class="pilwrap"><a href="#section-447" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property fragmentSrc</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>



        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span></pre></div></td></tr><tr id="section-448"><td class="docs"><div class="pilwrap"><a href="#section-448" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property vertexSrc</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span>  <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;attribute vec2 aVertexPosition;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-449"><td class="docs"><div class="pilwrap"><a href="#section-449" class="pilcrow">&#182;</a></div><p>'attribute vec4 aColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;uniform mat3 translationMatrix;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 projectionVector;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offsetVector;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;uniform vec3 tint;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float alpha;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec3 color;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   v -= offsetVector.xyx;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vColor = vec4(color * alpha * tint, alpha);&#39;</span><span class="p">,</span><span class="c1">//&quot; * vec4(tint * alpha, alpha);&#39;,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-450"><td class="docs"><div class="pilwrap"><a href="#section-450" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ComplexPrimitiveShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">compileProgram</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexSrc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">);</span></pre></div></td></tr><tr id="section-451"><td class="docs"><div class="pilwrap"><a href="#section-451" class="pilcrow">&#182;</a></div><p>get and store the uniforms for the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">projectionVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;projectionVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetVector</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;offsetVector&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tintColor</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;tint&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-452"><td class="docs"><div class="pilwrap"><a href="#section-452" class="pilcrow">&#182;</a></div><p>get and store the attributes</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;aVertexPosition&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-453"><td class="docs"><div class="pilwrap"><a href="#section-453" class="pilcrow">&#182;</a></div><p>this.colorAttribute = gl.getAttribLocation(program, 'aColor');</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">translationMatrix</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;translationMatrix&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="o">=</span> <span class="nx">program</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-454"><td class="docs"><div class="pilwrap"><a href="#section-454" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the shader</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ComplexPrimitiveShader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteProgram</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">program</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">attribute</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-455"><td class="docs"><div class="pilwrap"><a href="#section-455" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-456"><td class="docs"><div class="pilwrap"><a href="#section-456" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A set of functions used by the webGL renderer to draw the primitive graphics data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-457"><td class="docs"><div class="pilwrap"><a href="#section-457" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the graphics object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphics</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span><span class="c1">//projection, offset)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">,</span>
        <span class="nx">offset</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span>
        <span class="nx">shader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">primitiveShader</span><span class="p">,</span>
        <span class="nx">webGLData</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">updateGraphics</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">gl</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">webGL</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">];</span></pre></div></td></tr><tr id="section-458"><td class="docs"><div class="pilwrap"><a href="#section-458" class="pilcrow">&#182;</a></div><p>This  could be speeded up for sure!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">mode</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">stencilManager</span><span class="p">.</span><span class="nx">pushStencil</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span></pre></div></td></tr><tr id="section-459"><td class="docs"><div class="pilwrap"><a href="#section-459" class="pilcrow">&#182;</a></div><p>render quad..</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_FAN</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="p">(</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">);</span>

            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">stencilManager</span><span class="p">.</span><span class="nx">popStencil</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">last</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>


            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span> <span class="nx">shader</span> <span class="p">);</span><span class="c1">//activatePrimitiveShader();</span>
            <span class="nx">shader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">primitiveShader</span><span class="p">;</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">translationMatrix</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">tintColor</span><span class="p">,</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">tint</span><span class="p">));</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">alpha</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">);</span>


            <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">buffer</span><span class="p">);</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span><span class="mi">4</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span></pre></div></td></tr><tr id="section-460"><td class="docs"><div class="pilwrap"><a href="#section-460" class="pilcrow">&#182;</a></div><p>set the index buffer!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_STRIP</span><span class="p">,</span>  <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-461"><td class="docs"><div class="pilwrap"><a href="#section-461" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the graphics object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object to update</span></div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">updateGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-462"><td class="docs"><div class="pilwrap"><a href="#section-462" class="pilcrow">&#182;</a></div><p>get the contexts graphics object</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">webGL</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">];</span></pre></div></td></tr><tr id="section-463"><td class="docs"><div class="pilwrap"><a href="#section-463" class="pilcrow">&#182;</a></div><p>if the graphics object does not exist in the webGL context time to create it!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">webGL</span><span class="p">)</span><span class="nx">webGL</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lastIndex</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span><span class="p">[],</span> <span class="nx">gl</span><span class="o">:</span><span class="nx">gl</span><span class="p">};</span></pre></div></td></tr><tr id="section-464"><td class="docs"><div class="pilwrap"><a href="#section-464" class="pilcrow">&#182;</a></div><p>flag the graphics as not dirty as we are about to update it...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">graphics</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span></pre></div></td></tr><tr id="section-465"><td class="docs"><div class="pilwrap"><a href="#section-465" class="pilcrow">&#182;</a></div><p>if the user cleared the graphics object we will need to clear every object</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">clearDirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">graphics</span><span class="p">.</span><span class="nx">clearDirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-466"><td class="docs"><div class="pilwrap"><a href="#section-466" class="pilcrow">&#182;</a></div><p>lop through and return all the webGLDatas to the object pool so than can be reused later on</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">graphicsData</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">graphicsDataPool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">graphicsData</span> <span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-467"><td class="docs"><div class="pilwrap"><a href="#section-467" class="pilcrow">&#182;</a></div><p>clear the array and reset the index..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">webGL</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="kd">var</span> <span class="nx">webGLData</span><span class="p">;</span></pre></div></td></tr><tr id="section-468"><td class="docs"><div class="pilwrap"><a href="#section-468" class="pilcrow">&#182;</a></div><p>loop through the graphics datas and construct each one..
if the object is a complex fill then the new stencil buffer technique will be used
other wise graphics objects will be pushed into a batch..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">lastIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-469"><td class="docs"><div class="pilwrap"><a href="#section-469" class="pilcrow">&#182;</a></div><p>MAKE SURE WE HAVE THE CORRECT TYPE..</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">switchMode</span><span class="p">(</span><span class="nx">webGL</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildComplexPoly</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">switchMode</span><span class="p">(</span><span class="nx">webGL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildPoly</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">switchMode</span><span class="p">(</span><span class="nx">webGL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildLine</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>

            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">switchMode</span><span class="p">(</span><span class="nx">webGL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildRectangle</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildCircle</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RREC</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildRoundedRectangle</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>


        <span class="nx">webGL</span><span class="p">.</span><span class="nx">lastIndex</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-470"><td class="docs"><div class="pilwrap"><a href="#section-470" class="pilcrow">&#182;</a></div><p>upload all the dirty data...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">upload</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">switchMode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">webGL</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">webGLData</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">graphicsDataPool</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphicsData</span><span class="p">(</span><span class="nx">webGL</span><span class="p">.</span><span class="nx">gl</span><span class="p">);</span>
        <span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
        <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">!==</span> <span class="nx">type</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">webGLData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">graphicsDataPool</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphicsData</span><span class="p">(</span><span class="nx">webGL</span><span class="p">.</span><span class="nx">gl</span><span class="p">);</span>
            <span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
            <span class="nx">webGL</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">webGLData</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">webGLData</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-471"><td class="docs"><div class="pilwrap"><a href="#section-471" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Builds a rectangle to draw</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object containing all the necessary properties</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">webGLData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildRectangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-472"><td class="docs"><div class="pilwrap"><a href="#section-472" class="pilcrow">&#182;</a></div><p>--- //
need to convert points to a nice regular data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">rectData</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>


    <span class="k">if</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">verts</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">vertPos</span> <span class="o">=</span> <span class="nx">verts</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">6</span><span class="p">;</span></pre></div></td></tr><tr id="section-473"><td class="docs"><div class="pilwrap"><a href="#section-473" class="pilcrow">&#182;</a></div><p>start</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span></pre></div></td></tr><tr id="section-474"><td class="docs"><div class="pilwrap"><a href="#section-474" class="pilcrow">&#182;</a></div><p>insert 2 dead triangles..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">vertPos</span><span class="p">,</span> <span class="nx">vertPos</span><span class="p">,</span> <span class="nx">vertPos</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">vertPos</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="nx">vertPos</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="nx">vertPos</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tempPoints</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span>
                  <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span>
                  <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span>
                  <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span>
                  <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">];</span>


        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildLine</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">tempPoints</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-475"><td class="docs"><div class="pilwrap"><a href="#section-475" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Builds a rounded rectangle to draw</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object containing all the necessary properties</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">webGLData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildRoundedRectangle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>


    <span class="kd">var</span> <span class="nx">recPoints</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">recPoints</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
    <span class="nx">recPoints</span> <span class="o">=</span> <span class="nx">recPoints</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">quadraticBezierCurve</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">));</span>
    <span class="nx">recPoints</span> <span class="o">=</span> <span class="nx">recPoints</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">quadraticBezierCurve</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">));</span>
    <span class="nx">recPoints</span> <span class="o">=</span> <span class="nx">recPoints</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">quadraticBezierCurve</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">y</span><span class="p">));</span>
    <span class="nx">recPoints</span> <span class="o">=</span> <span class="nx">recPoints</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">quadraticBezierCurve</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">));</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">verts</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">vecPos</span> <span class="o">=</span> <span class="nx">verts</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">6</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">triangles</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">Triangulate</span><span class="p">(</span><span class="nx">recPoints</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">triangles</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">3</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vecPos</span><span class="p">);</span>
            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vecPos</span><span class="p">);</span>
            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vecPos</span><span class="p">);</span>
            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vecPos</span><span class="p">);</span>
            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vecPos</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">recPoints</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">recPoints</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">recPoints</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">],</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tempPoints</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">recPoints</span><span class="p">;</span>

        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildLine</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">tempPoints</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-476"><td class="docs"><div class="pilwrap"><a href="#section-476" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Calcul the points for a quadratic bezier curve. (helper function..)<br />Based on : <a href='https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c'>https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c</a></p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>fromX </span><span class="dox_type">number</span><span>- Origin point x</span></div><div class="dox_tag_detail"><span>fromY </span><span class="dox_type">number</span><span>- Origin point x</span></div><div class="dox_tag_detail"><span>cpX </span><span class="dox_type">number</span><span>- Control point x</span></div><div class="dox_tag_detail"><span>cpY </span><span class="dox_type">number</span><span>- Control point y</span></div><div class="dox_tag_detail"><span>toX </span><span class="dox_type">number</span><span>- Destination point x</span></div><div class="dox_tag_detail"><span>toY </span><span class="dox_type">number</span><span>- Destination point y</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">number[]</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">quadraticBezierCurve</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fromX</span><span class="p">,</span> <span class="nx">fromY</span><span class="p">,</span> <span class="nx">cpX</span><span class="p">,</span> <span class="nx">cpY</span><span class="p">,</span> <span class="nx">toX</span><span class="p">,</span> <span class="nx">toY</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xa</span><span class="p">,</span>
        <span class="nx">ya</span><span class="p">,</span>
        <span class="nx">xb</span><span class="p">,</span>
        <span class="nx">yb</span><span class="p">,</span>
        <span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="p">,</span>
        <span class="nx">n</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">function</span> <span class="nx">getPt</span><span class="p">(</span><span class="nx">n1</span> <span class="p">,</span> <span class="nx">n2</span><span class="p">,</span> <span class="nx">perc</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">n2</span> <span class="o">-</span> <span class="nx">n1</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">n1</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">diff</span> <span class="o">*</span> <span class="nx">perc</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span></pre></div></td></tr><tr id="section-477"><td class="docs"><div class="pilwrap"><a href="#section-477" class="pilcrow">&#182;</a></div><p>The Green Line</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">xa</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">fromX</span> <span class="p">,</span> <span class="nx">cpX</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
        <span class="nx">ya</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">fromY</span> <span class="p">,</span> <span class="nx">cpY</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
        <span class="nx">xb</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">cpX</span> <span class="p">,</span> <span class="nx">toX</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
        <span class="nx">yb</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">cpY</span> <span class="p">,</span> <span class="nx">toY</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span></pre></div></td></tr><tr id="section-478"><td class="docs"><div class="pilwrap"><a href="#section-478" class="pilcrow">&#182;</a></div><p>The Black Dot</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">x</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">xa</span> <span class="p">,</span> <span class="nx">xb</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">getPt</span><span class="p">(</span> <span class="nx">ya</span> <span class="p">,</span> <span class="nx">yb</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-479"><td class="docs"><div class="pilwrap"><a href="#section-479" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Builds a circle to draw</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object to draw</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">webGLData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildCircle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-480"><td class="docs"><div class="pilwrap"><a href="#section-480" class="pilcrow">&#182;</a></div><p>need to convert points to a nice regular data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">rectData</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">rectData</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

    <span class="kd">var</span> <span class="nx">totalSegs</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">seg</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">totalSegs</span> <span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">verts</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">vecPos</span> <span class="o">=</span> <span class="nx">verts</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">6</span><span class="p">;</span>

        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">vecPos</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">totalSegs</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">seg</span> <span class="o">*</span> <span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">width</span><span class="p">,</span>
                       <span class="nx">y</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">seg</span> <span class="o">*</span> <span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">height</span><span class="p">,</span>
                       <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">vecPos</span><span class="o">++</span><span class="p">,</span> <span class="nx">vecPos</span><span class="o">++</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">vecPos</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tempPoints</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">totalSegs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">seg</span> <span class="o">*</span> <span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">width</span><span class="p">,</span>
                                     <span class="nx">y</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">seg</span> <span class="o">*</span> <span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">height</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildLine</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">);</span>

        <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">tempPoints</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-481"><td class="docs"><div class="pilwrap"><a href="#section-481" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Builds a line to draw</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object containing all the necessary properties</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">webGLData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildLine</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-482"><td class="docs"><div class="pilwrap"><a href="#section-482" class="pilcrow">&#182;</a></div><p>TODO OPTIMISE!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-483"><td class="docs"><div class="pilwrap"><a href="#section-483" class="pilcrow">&#182;</a></div><p>if the line width is an odd number add 0.5 to align to a whole pixel</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineWidth</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">0.5</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-484"><td class="docs"><div class="pilwrap"><a href="#section-484" class="pilcrow">&#182;</a></div><p>get first and last point.. figure out the middle!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">firstPoint</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
    <span class="kd">var</span> <span class="nx">lastPoint</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="p">);</span></pre></div></td></tr><tr id="section-485"><td class="docs"><div class="pilwrap"><a href="#section-485" class="pilcrow">&#182;</a></div><p>if the first point is the last point - gonna have issues :)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">firstPoint</span><span class="p">.</span><span class="nx">x</span> <span class="o">===</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">firstPoint</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-486"><td class="docs"><div class="pilwrap"><a href="#section-486" class="pilcrow">&#182;</a></div><p>need to clone as we are going to slightly modify the shape..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">points</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nx">points</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

        <span class="nx">lastPoint</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="p">);</span>

        <span class="kd">var</span> <span class="nx">midPointX</span> <span class="o">=</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">firstPoint</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span><span class="mf">0.5</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">midPointY</span> <span class="o">=</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">firstPoint</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span><span class="mf">0.5</span><span class="p">;</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">midPointX</span><span class="p">,</span> <span class="nx">midPointY</span><span class="p">);</span>
        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">midPointX</span><span class="p">,</span> <span class="nx">midPointY</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">verts</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">indexCount</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">indexStart</span> <span class="o">=</span> <span class="nx">verts</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">6</span><span class="p">;</span></pre></div></td></tr><tr id="section-487"><td class="docs"><div class="pilwrap"><a href="#section-487" class="pilcrow">&#182;</a></div><p>DRAW the Line</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span></pre></div></td></tr><tr id="section-488"><td class="docs"><div class="pilwrap"><a href="#section-488" class="pilcrow">&#182;</a></div><p>sort color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">,</span> <span class="nx">p1x</span><span class="p">,</span> <span class="nx">p1y</span><span class="p">,</span> <span class="nx">p2x</span><span class="p">,</span> <span class="nx">p2y</span><span class="p">,</span> <span class="nx">p3x</span><span class="p">,</span> <span class="nx">p3y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">perpx</span><span class="p">,</span> <span class="nx">perpy</span><span class="p">,</span> <span class="nx">perp2x</span><span class="p">,</span> <span class="nx">perp2y</span><span class="p">,</span> <span class="nx">perp3x</span><span class="p">,</span> <span class="nx">perp3y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">b1</span><span class="p">,</span> <span class="nx">c1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">b2</span><span class="p">,</span> <span class="nx">c2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">denom</span><span class="p">,</span> <span class="nx">pdist</span><span class="p">,</span> <span class="nx">dist</span><span class="p">;</span>

    <span class="nx">p1x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">p1y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

    <span class="nx">p2x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="nx">p2y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

    <span class="nx">perpx</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">p1y</span> <span class="o">-</span> <span class="nx">p2y</span><span class="p">);</span>
    <span class="nx">perpy</span> <span class="o">=</span>  <span class="nx">p1x</span> <span class="o">-</span> <span class="nx">p2x</span><span class="p">;</span>

    <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perpx</span><span class="o">*</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">perpy</span><span class="o">*</span><span class="nx">perpy</span><span class="p">);</span>

    <span class="nx">perpx</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
    <span class="nx">perpy</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
    <span class="nx">perpx</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="nx">perpy</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span></pre></div></td></tr><tr id="section-489"><td class="docs"><div class="pilwrap"><a href="#section-489" class="pilcrow">&#182;</a></div><p>start</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p1x</span> <span class="o">-</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p1y</span> <span class="o">-</span> <span class="nx">perpy</span><span class="p">,</span>
                <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p1x</span> <span class="o">+</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p1y</span> <span class="o">+</span> <span class="nx">perpy</span><span class="p">,</span>
                <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">p1x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">p1y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

        <span class="nx">p2x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">p2y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

        <span class="nx">p3x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">p3y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

        <span class="nx">perpx</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">p1y</span> <span class="o">-</span> <span class="nx">p2y</span><span class="p">);</span>
        <span class="nx">perpy</span> <span class="o">=</span> <span class="nx">p1x</span> <span class="o">-</span> <span class="nx">p2x</span><span class="p">;</span>

        <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perpx</span><span class="o">*</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">perpy</span><span class="o">*</span><span class="nx">perpy</span><span class="p">);</span>
        <span class="nx">perpx</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
        <span class="nx">perpy</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
        <span class="nx">perpx</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>
        <span class="nx">perpy</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>

        <span class="nx">perp2x</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">p2y</span> <span class="o">-</span> <span class="nx">p3y</span><span class="p">);</span>
        <span class="nx">perp2y</span> <span class="o">=</span> <span class="nx">p2x</span> <span class="o">-</span> <span class="nx">p3x</span><span class="p">;</span>

        <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perp2x</span><span class="o">*</span><span class="nx">perp2x</span> <span class="o">+</span> <span class="nx">perp2y</span><span class="o">*</span><span class="nx">perp2y</span><span class="p">);</span>
        <span class="nx">perp2x</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
        <span class="nx">perp2y</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
        <span class="nx">perp2x</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>
        <span class="nx">perp2y</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>

        <span class="nx">a1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpy</span> <span class="o">+</span> <span class="nx">p1y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpy</span> <span class="o">+</span> <span class="nx">p2y</span><span class="p">);</span>
        <span class="nx">b1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">p2x</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">p1x</span><span class="p">);</span>
        <span class="nx">c1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">p1x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpy</span> <span class="o">+</span> <span class="nx">p2y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">p2x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">perpy</span> <span class="o">+</span> <span class="nx">p1y</span><span class="p">);</span>
        <span class="nx">a2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2y</span> <span class="o">+</span> <span class="nx">p3y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2y</span> <span class="o">+</span> <span class="nx">p2y</span><span class="p">);</span>
        <span class="nx">b2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2x</span> <span class="o">+</span> <span class="nx">p2x</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2x</span> <span class="o">+</span> <span class="nx">p3x</span><span class="p">);</span>
        <span class="nx">c2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2x</span> <span class="o">+</span> <span class="nx">p3x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2y</span> <span class="o">+</span> <span class="nx">p2y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2x</span> <span class="o">+</span> <span class="nx">p2x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nx">perp2y</span> <span class="o">+</span> <span class="nx">p3y</span><span class="p">);</span>

        <span class="nx">denom</span> <span class="o">=</span> <span class="nx">a1</span><span class="o">*</span><span class="nx">b2</span> <span class="o">-</span> <span class="nx">a2</span><span class="o">*</span><span class="nx">b1</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">denom</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="p">)</span>
        <span class="p">{</span>

            <span class="nx">denom</span><span class="o">+=</span><span class="mf">10.1</span><span class="p">;</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p2y</span> <span class="o">-</span> <span class="nx">perpy</span><span class="p">,</span>
                <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">+</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p2y</span> <span class="o">+</span> <span class="nx">perpy</span><span class="p">,</span>
                <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">px</span> <span class="o">=</span> <span class="p">(</span><span class="nx">b1</span><span class="o">*</span><span class="nx">c2</span> <span class="o">-</span> <span class="nx">b2</span><span class="o">*</span><span class="nx">c1</span><span class="p">)</span><span class="o">/</span><span class="nx">denom</span><span class="p">;</span>
        <span class="nx">py</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a2</span><span class="o">*</span><span class="nx">c1</span> <span class="o">-</span> <span class="nx">a1</span><span class="o">*</span><span class="nx">c2</span><span class="p">)</span><span class="o">/</span><span class="nx">denom</span><span class="p">;</span>


        <span class="nx">pdist</span> <span class="o">=</span> <span class="p">(</span><span class="nx">px</span> <span class="o">-</span><span class="nx">p2x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">px</span> <span class="o">-</span><span class="nx">p2x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">py</span> <span class="o">-</span><span class="nx">p2y</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">py</span> <span class="o">-</span><span class="nx">p2y</span><span class="p">);</span>


        <span class="k">if</span><span class="p">(</span><span class="nx">pdist</span> <span class="o">&gt;</span> <span class="mi">140</span> <span class="o">*</span> <span class="mi">140</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">perp3x</span> <span class="o">=</span> <span class="nx">perpx</span> <span class="o">-</span> <span class="nx">perp2x</span><span class="p">;</span>
            <span class="nx">perp3y</span> <span class="o">=</span> <span class="nx">perpy</span> <span class="o">-</span> <span class="nx">perp2y</span><span class="p">;</span>

            <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perp3x</span><span class="o">*</span><span class="nx">perp3x</span> <span class="o">+</span> <span class="nx">perp3y</span><span class="o">*</span><span class="nx">perp3y</span><span class="p">);</span>
            <span class="nx">perp3x</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
            <span class="nx">perp3y</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
            <span class="nx">perp3x</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>
            <span class="nx">perp3y</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="nx">perp3x</span><span class="p">,</span> <span class="nx">p2y</span> <span class="o">-</span><span class="nx">perp3y</span><span class="p">);</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">+</span> <span class="nx">perp3x</span><span class="p">,</span> <span class="nx">p2y</span> <span class="o">+</span><span class="nx">perp3y</span><span class="p">);</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="nx">perp3x</span><span class="p">,</span> <span class="nx">p2y</span> <span class="o">-</span><span class="nx">perp3y</span><span class="p">);</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">indexCount</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">px</span> <span class="p">,</span> <span class="nx">py</span><span class="p">);</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">px</span><span class="o">-</span><span class="nx">p2x</span><span class="p">),</span> <span class="nx">p2y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">py</span> <span class="o">-</span> <span class="nx">p2y</span><span class="p">));</span>
            <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">p1x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">];</span>
    <span class="nx">p1y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

    <span class="nx">p2x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">];</span>
    <span class="nx">p2y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[(</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

    <span class="nx">perpx</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">p1y</span> <span class="o">-</span> <span class="nx">p2y</span><span class="p">);</span>
    <span class="nx">perpy</span> <span class="o">=</span> <span class="nx">p1x</span> <span class="o">-</span> <span class="nx">p2x</span><span class="p">;</span>

    <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perpx</span><span class="o">*</span><span class="nx">perpx</span> <span class="o">+</span> <span class="nx">perpy</span><span class="o">*</span><span class="nx">perpy</span><span class="p">);</span>
    <span class="nx">perpx</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
    <span class="nx">perpy</span> <span class="o">/=</span> <span class="nx">dist</span><span class="p">;</span>
    <span class="nx">perpx</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="nx">perpy</span> <span class="o">*=</span> <span class="nx">width</span><span class="p">;</span>

    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p2y</span> <span class="o">-</span> <span class="nx">perpy</span><span class="p">);</span>
    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p2x</span> <span class="o">+</span> <span class="nx">perpx</span> <span class="p">,</span> <span class="nx">p2y</span> <span class="o">+</span> <span class="nx">perpy</span><span class="p">);</span>
    <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>

    <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">indexStart</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">indexCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">indexStart</span><span class="o">++</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">indexStart</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-490"><td class="docs"><div class="pilwrap"><a href="#section-490" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Builds a complex polygon to draw</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphicsData</span><span>- The graphics object containing all the necessary properties</span></div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">webGLData</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildComplexPoly</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-491"><td class="docs"><div class="pilwrap"><a href="#section-491" class="pilcrow">&#182;</a></div><p>TODO - no need to copy this as it gets turned into a FLoat32Array anyways..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-492"><td class="docs"><div class="pilwrap"><a href="#section-492" class="pilcrow">&#182;</a></div><p>get first and last point.. figure out the middle!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>
    <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">points</span><span class="p">;</span>
    <span class="nx">webGLData</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">;</span>
    <span class="nx">webGLData</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">);</span></pre></div></td></tr><tr id="section-493"><td class="docs"><div class="pilwrap"><a href="#section-493" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>calclate the bounds..</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-494"><td class="docs"><div class="pilwrap"><a href="#section-494" class="pilcrow">&#182;</a></div><p>get size..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>

        <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
        <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

        <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
        <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-495"><td class="docs"><div class="pilwrap"><a href="#section-495" class="pilcrow">&#182;</a></div><p>add a quad to the end cos there is no point making another buffer!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">minX</span><span class="p">,</span> <span class="nx">minY</span><span class="p">,</span>
                <span class="nx">maxX</span><span class="p">,</span> <span class="nx">minY</span><span class="p">,</span>
                <span class="nx">maxX</span><span class="p">,</span> <span class="nx">maxY</span><span class="p">,</span>
                <span class="nx">minX</span><span class="p">,</span> <span class="nx">maxY</span><span class="p">);</span></pre></div></td></tr><tr id="section-496"><td class="docs"><div class="pilwrap"><a href="#section-496" class="pilcrow">&#182;</a></div><p>push a quad onto the end..</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-497"><td class="docs"><div class="pilwrap"><a href="#section-497" class="pilcrow">&#182;</a></div><p>TODO - this aint needed!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
    <span class="p">}</span>

<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">buildPoly</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-498"><td class="docs"><div class="pilwrap"><a href="#section-498" class="pilcrow">&#182;</a></div><p>get first and last point.. figure out the middle!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">verts</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span></pre></div></td></tr><tr id="section-499"><td class="docs"><div class="pilwrap"><a href="#section-499" class="pilcrow">&#182;</a></div><p>sort color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">graphicsData</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">triangles</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PolyK</span><span class="p">.</span><span class="nx">Triangulate</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">vertPos</span> <span class="o">=</span> <span class="nx">verts</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">6</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">triangles</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vertPos</span><span class="p">);</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vertPos</span><span class="p">);</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vertPos</span><span class="p">);</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span><span class="nx">vertPos</span><span class="p">);</span>
        <span class="nx">indices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">triangles</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vertPos</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">verts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                   <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">graphicsDataPool</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphicsData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-500"><td class="docs"><div class="pilwrap"><a href="#section-500" class="pilcrow">&#182;</a></div><p>TODO does this need to be split before uploding??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// color split!</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphicsData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphicsData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">upload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-501"><td class="docs"><div class="pilwrap"><a href="#section-501" class="pilcrow">&#182;</a></div><p>this.lastIndex = graphics.graphicsData.length;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">glPoints</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">glPoints</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">glIndicies</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">glIndicies</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-502"><td class="docs"><div class="pilwrap"><a href="#section-502" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">glContexts</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// this is where we store the webGL contexts for easy access.</span></pre></div></td></tr><tr id="section-503"><td class="docs"><div class="pilwrap"><a href="#section-503" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the WebGLRenderer draws the stage and all its content onto a webGL enabled canvas. This renderer<br />should be used for browsers that support webGL. This Render works by automatically managing webGLBatch's.<br />So no need for Sprite Batch's or Sprite Cloud's<br />Dont forget to add the view to your DOM or you will not see anything :)</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width=0</span><span>- the width of the canvas view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height=0</span><span>- the height of the canvas view</span></div><div class="dox_tag_detail"><span>{HTMLCanvasElement} </span><span class="dox_type">view</span><span>- the canvas to use as a view, optional</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">transparent=false</span><span>- If the render view is transparent, default false</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">antialias=false</span><span>- sets antialias (only applicable in chrome at the moment)</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">preserveDrawingBuffer=false</span><span>- enables drawing buffer preservation, enable this if you need to call toDataUrl on the webgl context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">,</span> <span class="nx">antialias</span><span class="p">,</span> <span class="nx">preserveDrawingBuffer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">defaultRenderer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">(</span><span class="s1">&#39;webGL&#39;</span><span class="p">);</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">defaultRenderer</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WEBGL_RENDERER</span><span class="p">;</span></pre></div></td></tr><tr id="section-504"><td class="docs"><div class="pilwrap"><a href="#section-504" class="pilcrow">&#182;</a></div><p>do a catch.. only 1 webGL renderer..</p>

<div class="dox"><div class="summary"><p>Whether the render view is transparent</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">transparent</span><span class="p">;</span></pre></div></td></tr><tr id="section-505"><td class="docs"><div class="pilwrap"><a href="#section-505" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The value of the preserveDrawingBuffer flag affects whether or not the contents of the stencil buffer is retained after rendering.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">preserveDrawingBuffer</span> <span class="o">=</span> <span class="nx">preserveDrawingBuffer</span><span class="p">;</span></pre></div></td></tr><tr id="section-506"><td class="docs"><div class="pilwrap"><a href="#section-506" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the canvas view</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">800</span><span class="p">;</span></pre></div></td></tr><tr id="section-507"><td class="docs"><div class="pilwrap"><a href="#section-507" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the canvas view</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">600</span><span class="p">;</span></pre></div></td></tr><tr id="section-508"><td class="docs"><div class="pilwrap"><a href="#section-508" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The canvas element that everything is drawn to</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="nx">view</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span></pre></div></td></tr><tr id="section-509"><td class="docs"><div class="pilwrap"><a href="#section-509" class="pilcrow">&#182;</a></div><p>deal with losing context..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleContextLost</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contextRestoredLost</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleContextRestored</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;webglcontextlost&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;webglcontextrestored&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">contextRestoredLost</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">alpha</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span><span class="p">,</span>
        <span class="nx">antialias</span><span class="o">:!!</span><span class="nx">antialias</span><span class="p">,</span> <span class="c1">// SPEED UP??</span>
        <span class="nx">premultipliedAlpha</span><span class="o">:!!</span><span class="nx">transparent</span><span class="p">,</span>
        <span class="nx">stencil</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="nx">preserveDrawingBuffer</span><span class="o">:</span> <span class="nx">preserveDrawingBuffer</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="p">[</span><span class="s1">&#39;experimental-webgl&#39;</span><span class="p">,</span> <span class="s1">&#39;webgl&#39;</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
    <span class="p">},</span> <span class="k">this</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gl</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-510"><td class="docs"><div class="pilwrap"><a href="#section-510" class="pilcrow">&#182;</a></div><p>fail, not able to get a context</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;This browser does not support webGL. Try using the canvas renderer&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">glContextId</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">glContextId</span> <span class="o">++</span><span class="p">;</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">glContexts</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">glContextId</span><span class="p">]</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">]</span>        <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">ADD</span><span class="p">]</span>           <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">SRC_ALPHA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DST_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">MULTIPLY</span><span class="p">]</span>      <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DST_COLOR</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SCREEN</span><span class="p">]</span>        <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">SRC_ALPHA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">OVERLAY</span><span class="p">]</span>       <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DARKEN</span><span class="p">]</span>        <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LIGHTEN</span><span class="p">]</span>       <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_DODGE</span><span class="p">]</span>   <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_BURN</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HARD_LIGHT</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SOFT_LIGHT</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DIFFERENCE</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">EXCLUSION</span><span class="p">]</span>     <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HUE</span><span class="p">]</span>           <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SATURATION</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR</span><span class="p">]</span>         <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LUMINOSITY</span><span class="p">]</span>    <span class="o">=</span> <span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span>       <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">];</span>
    <span class="p">}</span>




    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span>  <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-511"><td class="docs"><div class="pilwrap"><a href="#section-511" class="pilcrow">&#182;</a></div><p>time to create the render managers! each one focuses on managine a state in webGL</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>                   <span class="c1">// deals with managing the shader programs and their attribs</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>                       <span class="c1">// manages the rendering of sprites</span></pre></div></td></tr><tr id="section-512"><td class="docs"><div class="pilwrap"><a href="#section-512" class="pilcrow">&#182;</a></div><p>this.primitiveBatch = new PIXI.WebGLPrimitiveBatch(gl);               // primitive batch renderer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>                       <span class="c1">// manages the masks using the stencil buffer</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span><span class="p">);</span> <span class="c1">// manages the filters</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stencilManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blendModeManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLBlendModeManager</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">;</span></pre></div></td></tr><tr id="section-513"><td class="docs"><div class="pilwrap"><a href="#section-513" class="pilcrow">&#182;</a></div><p>this.renderSession.primitiveBatch = this.primitiveBatch;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">stencilManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stencilManager</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">program</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_TEST</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">CULL_FACE</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">BLEND</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-514"><td class="docs"><div class="pilwrap"><a href="#section-514" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">;</span></pre></div></td></tr><tr id="section-515"><td class="docs"><div class="pilwrap"><a href="#section-515" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the stage to its webGL view</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Stage} </span><span class="dox_type">stage</span><span>- the Stage element to be rendered</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-516"><td class="docs"><div class="pilwrap"><a href="#section-516" class="pilcrow">&#182;</a></div><p>if rendering a new stage clear the batches..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__stage</span> <span class="o">!==</span> <span class="nx">stage</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span><span class="nx">stage</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">();</span></pre></div></td></tr><tr id="section-517"><td class="docs"><div class="pilwrap"><a href="#section-517" class="pilcrow">&#182;</a></div><p>TODO make this work
dont think this is needed any more?</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">__stage</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-518"><td class="docs"><div class="pilwrap"><a href="#section-518" class="pilcrow">&#182;</a></div><p>update any textures this includes uvs and uploading them to the gpu</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">updateTextures</span><span class="p">();</span></pre></div></td></tr><tr id="section-519"><td class="docs"><div class="pilwrap"><a href="#section-519" class="pilcrow">&#182;</a></div><p>update the scene graph</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">stage</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">();</span></pre></div></td></tr><tr id="section-520"><td class="docs"><div class="pilwrap"><a href="#section-520" class="pilcrow">&#182;</a></div><p>interaction</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">_interactive</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-521"><td class="docs"><div class="pilwrap"><a href="#section-521" class="pilcrow">&#182;</a></div><p>need to add some events!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">setTarget</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-522"><td class="docs"><div class="pilwrap"><a href="#section-522" class="pilcrow">&#182;</a></div><p>-- Does this need to be set every frame? -- //
gl.colorMask(true, true, true, this.transparent);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-523"><td class="docs"><div class="pilwrap"><a href="#section-523" class="pilcrow">&#182;</a></div><p>make sure we are bound to the main frame buffer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">transparent</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">clearColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">clearColor</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColorSplit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColorSplit</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColorSplit</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderDisplayObject</span><span class="p">(</span> <span class="nx">stage</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">projection</span> <span class="p">);</span></pre></div></td></tr><tr id="section-524"><td class="docs"><div class="pilwrap"><a href="#section-524" class="pilcrow">&#182;</a></div><p>interaction</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-525"><td class="docs"><div class="pilwrap"><a href="#section-525" class="pilcrow">&#182;</a></div><p>need to add some events!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">setTarget</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">setTarget</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-526"><td class="docs"><div class="pilwrap"><a href="#section-526" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>//can simulate context loss in Chrome like so:<br />     this.view.onmousedown = function(ev) {<br />     console.dir(this.gl.getSupportedExtensions());<br />        var ext = (<br />            gl.getExtension("WEBGL_scompressed_texture_s3tc")<br />       // gl.getExtension("WEBGL_compressed_texture_s3tc") ||<br />       // gl.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||<br />       // gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")<br />     );<br />     console.dir(ext);<br />     var loseCtx = this.gl.getExtension("WEBGL_lose_context");<br />      console.log("killing context");<br />      loseCtx.loseContext();<br />     setTimeout(function() {<br />          console.log("restoring context...");<br />          loseCtx.restoreContext();<br />      }.bind(this), 1000);<br />     }.bind(this);</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-527"><td class="docs"><div class="pilwrap"><a href="#section-527" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a display Object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- The DisplayObject to render</span></div><div class="dox_tag_detail"><span>{Point} </span><span class="dox_type">projection</span><span>- The projection</span></div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">buffer</span><span>- a standard WebGL buffer</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderDisplayObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">projection</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">setBlendMode</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">);</span></pre></div></td></tr><tr id="section-528"><td class="docs"><div class="pilwrap"><a href="#section-528" class="pilcrow">&#182;</a></div><p>reset the render session data..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="nx">projection</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span></pre></div></td></tr><tr id="section-529"><td class="docs"><div class="pilwrap"><a href="#section-529" class="pilcrow">&#182;</a></div><p>start the sprite batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">begin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">);</span></pre></div></td></tr><tr id="section-530"><td class="docs"><div class="pilwrap"><a href="#section-530" class="pilcrow">&#182;</a></div><p>this.primitiveBatch.begin(this.renderSession);</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-531"><td class="docs"><div class="pilwrap"><a href="#section-531" class="pilcrow">&#182;</a></div><p>start the filter manager</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">begin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-532"><td class="docs"><div class="pilwrap"><a href="#section-532" class="pilcrow">&#182;</a></div><p>render the scene!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">);</span></pre></div></td></tr><tr id="section-533"><td class="docs"><div class="pilwrap"><a href="#section-533" class="pilcrow">&#182;</a></div><p>finish the sprite batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span></pre></div></td></tr><tr id="section-534"><td class="docs"><div class="pilwrap"><a href="#section-534" class="pilcrow">&#182;</a></div><p>this.primitiveBatch.end();</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-535"><td class="docs"><div class="pilwrap"><a href="#section-535" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the textures loaded into this webgl renderer</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">updateTextures</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-536"><td class="docs"><div class="pilwrap"><a href="#section-536" class="pilcrow">&#182;</a></div><p>TODO break this out into a texture manager...
 for (i = 0; i &lt; PIXI.texturesToUpdate.length; i++)
     PIXI..updateWebGLTexture(PIXI.texturesToUpdate[i], this.gl);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">updateTextureFrame</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">destroyTexture</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToUpdate</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-537"><td class="docs"><div class="pilwrap"><a href="#section-537" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys a loaded webgl texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture to update</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">destroyTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-538"><td class="docs"><div class="pilwrap"><a href="#section-538" class="pilcrow">&#182;</a></div><p>TODO break this out into a texture manager...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">glTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">glContexts</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">gl</span> <span class="o">&amp;&amp;</span> <span class="nx">glTexture</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteTexture</span><span class="p">(</span><span class="nx">glTexture</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-539"><td class="docs"><div class="pilwrap"><a href="#section-539" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method updateTextureFrame</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture to update the frame from</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">updateTextureFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-540"><td class="docs"><div class="pilwrap"><a href="#section-540" class="pilcrow">&#182;</a></div><p>texture.updateFrame = false;</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-541"><td class="docs"><div class="pilwrap"><a href="#section-541" class="pilcrow">&#182;</a></div><p>now set the uvs. Figured that the uv data sits with a texture rather than a sprite.
so uv data is stored on the texture itself</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">texture</span><span class="p">.</span><span class="nx">_updateWebGLuvs</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-542"><td class="docs"><div class="pilwrap"><a href="#section-542" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>resizes the webGL view to the specified width and height</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the new width of the webGL view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the new height of the webGL view</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span>  <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-543"><td class="docs"><div class="pilwrap"><a href="#section-543" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a WebGL texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- the texture to render</span></div><div class="dox_tag_detail"><span>{webglContext} </span><span class="dox_type">gl</span><span>- the WebGL context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>


    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createTexture</span><span class="p">();</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">pixelStorei</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">premultipliedAlpha</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">texImage2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_BYTE</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span></pre></div></td></tr><tr id="section-544"><td class="docs"><div class="pilwrap"><a href="#section-544" class="pilcrow">&#182;</a></div><p>reguler...</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_powerOf2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">_dirty</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span>  <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-545"><td class="docs"><div class="pilwrap"><a href="#section-545" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates a WebGL texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- the texture to update</span></div><div class="dox_tag_detail"><span>{webglContext} </span><span class="dox_type">gl</span><span>- the WebGL context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">updateWebGLTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">pixelStorei</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">premultipliedAlpha</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">texImage2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_BYTE</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span></pre></div></td></tr><tr id="section-546"><td class="docs"><div class="pilwrap"><a href="#section-546" class="pilcrow">&#182;</a></div><p>reguler...</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_powerOf2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">REPEAT</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">_dirty</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-547"><td class="docs"><div class="pilwrap"><a href="#section-547" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Handles a lost webgl context</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">handleContextLost</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-548"><td class="docs"><div class="pilwrap"><a href="#section-548" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Handles a restored webgl context</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Event} </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">handleContextRestored</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-549"><td class="docs"><div class="pilwrap"><a href="#section-549" class="pilcrow">&#182;</a></div><p>try 'experimental-webgl'</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">try</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;experimental-webgl&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-550"><td class="docs"><div class="pilwrap"><a href="#section-550" class="pilcrow">&#182;</a></div><p>try 'webgl'</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">try</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;webgl&#39;</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e2</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-551"><td class="docs"><div class="pilwrap"><a href="#section-551" class="pilcrow">&#182;</a></div><p>fail, not able to get a context</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39; This browser does not support webGL. Try using the canvas renderer&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">glContextId</span> <span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-552"><td class="docs"><div class="pilwrap"><a href="#section-552" class="pilcrow">&#182;</a></div><p>need to set the context...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">primitiveBatch</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_TEST</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">CULL_FACE</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">BLEND</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">baseTexture</span><span class="p">;</span>
        <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-553"><td class="docs"><div class="pilwrap"><a href="#section-553" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the context was lost</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-554"><td class="docs"><div class="pilwrap"><a href="#section-554" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes everything from the renderer (event listeners, spritebatch, etc...)</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-555"><td class="docs"><div class="pilwrap"><a href="#section-555" class="pilcrow">&#182;</a></div><p>deal with losing context..</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-556"><td class="docs"><div class="pilwrap"><a href="#section-556" class="pilcrow">&#182;</a></div><p>remove listeners</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;webglcontextlost&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">contextLost</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;webglcontextrestored&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">contextRestoredLost</span><span class="p">);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">glContexts</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">glContextId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-557"><td class="docs"><div class="pilwrap"><a href="#section-557" class="pilcrow">&#182;</a></div><p>time to create the render managers! each one focuses on managine a state in webGL</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">primitiveBatch</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">shaderManager</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spriteBatch</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filterManager</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-558"><td class="docs"><div class="pilwrap"><a href="#section-558" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">glContextId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-559"><td class="docs"><div class="pilwrap"><a href="#section-559" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-560"><td class="docs"><div class="pilwrap"><a href="#section-560" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLMaskManager</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLBlendModeManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="mi">99999</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-561"><td class="docs"><div class="pilwrap"><a href="#section-561" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets-up the given blendMode from WebGL's point of view</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">blendMode</span><span>- the blendMode, should be a Pixi const, such as PIXI.BlendModes.ADD</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLBlendModeManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setBlendMode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">blendMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">===</span> <span class="nx">blendMode</span><span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-562"><td class="docs"><div class="pilwrap"><a href="#section-562" class="pilcrow">&#182;</a></div><p>console.log("SWAP!")</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="nx">blendMode</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">blendModeWebGL</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">blendFunc</span><span class="p">(</span><span class="nx">blendModeWebGL</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">blendModeWebGL</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLBlendModeManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-563"><td class="docs"><div class="pilwrap"><a href="#section-563" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-564"><td class="docs"><div class="pilwrap"><a href="#section-564" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLMaskManager</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskStack</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskPosition</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-565"><td class="docs"><div class="pilwrap"><a href="#section-565" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the drawing context to the one given in parameter</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-566"><td class="docs"><div class="pilwrap"><a href="#section-566" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies the Mask and adds it to the current filter stack</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">maskData</span></div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">pushMask</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">maskData</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">updateGraphics</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">gl</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">maskData</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">stencilManager</span><span class="p">.</span><span class="nx">pushStencil</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">maskData</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">].</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">renderSession</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-567"><td class="docs"><div class="pilwrap"><a href="#section-567" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes the last filter from the filter stack and doesn't return it</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span><span>- an object containing all the useful parameters</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">popMask</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">stencilManager</span><span class="p">.</span><span class="nx">popStencil</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">maskData</span><span class="p">.</span><span class="nx">_webGL</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">].</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">renderSession</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-568"><td class="docs"><div class="pilwrap"><a href="#section-568" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the mask stack</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskStack</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-569"><td class="docs"><div class="pilwrap"><a href="#section-569" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-570"><td class="docs"><div class="pilwrap"><a href="#section-570" class="pilcrow">&#182;</a></div><p>BA0285
Intercontinental Hotel, 888 Howard Street
San Francisco</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-571"><td class="docs"><div class="pilwrap"><a href="#section-571" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLStencilManager</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stencilStack</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-572"><td class="docs"><div class="pilwrap"><a href="#section-572" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the drawing context to the one given in parameter</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-573"><td class="docs"><div class="pilwrap"><a href="#section-573" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies the Mask and adds it to the current filter stack</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">maskData</span></div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">pushStencil</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bindGraphics</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stencilStack</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">STENCIL_TEST</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">STENCIL_BUFFER_BIT</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stencilStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">level</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ALWAYS</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INVERT</span><span class="p">);</span></pre></div></td></tr><tr id="section-574"><td class="docs"><div class="pilwrap"><a href="#section-574" class="pilcrow">&#182;</a></div><p>draw the triangle strip!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_FAN</span><span class="p">,</span>  <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span> <span class="mh">0xFF</span> <span class="o">-</span> <span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DECR</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INCR</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-575"><td class="docs"><div class="pilwrap"><a href="#section-575" class="pilcrow">&#182;</a></div><p>draw a quad to increment..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_FAN</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="p">(</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="mh">0xFF</span><span class="o">-</span><span class="p">(</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span> <span class="mh">0xFF</span> <span class="o">-</span> <span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DECR</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INCR</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_STRIP</span><span class="p">,</span>  <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="mh">0xFF</span><span class="o">-</span><span class="p">(</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-576"><td class="docs"><div class="pilwrap"><a href="#section-576" class="pilcrow">&#182;</a></div><p>TODO this does not belong here!</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bindGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-577"><td class="docs"><div class="pilwrap"><a href="#section-577" class="pilcrow">&#182;</a></div><p>if(this._currentGraphics === graphics)return;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_currentGraphics</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-578"><td class="docs"><div class="pilwrap"><a href="#section-578" class="pilcrow">&#182;</a></div><p>bind the graphics object..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">,</span>
        <span class="nx">offset</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span>
        <span class="nx">shader</span><span class="p">;</span><span class="c1">// = renderSession.shaderManager.primitiveShader;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">shader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">complexPrimativeShader</span><span class="p">;</span>

        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span> <span class="nx">shader</span> <span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">translationMatrix</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">tintColor</span><span class="p">,</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">tint</span><span class="p">));</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">color</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">alpha</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">*</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">alpha</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">buffer</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-579"><td class="docs"><div class="pilwrap"><a href="#section-579" class="pilcrow">&#182;</a></div><p>now do the rest..
set the index buffer!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-580"><td class="docs"><div class="pilwrap"><a href="#section-580" class="pilcrow">&#182;</a></div><p>renderSession.shaderManager.activatePrimitiveShader();</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">shader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">primitiveShader</span><span class="p">;</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span> <span class="nx">shader</span> <span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">translationMatrix</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">tintColor</span><span class="p">,</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">graphics</span><span class="p">.</span><span class="nx">tint</span><span class="p">));</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">alpha</span><span class="p">,</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">buffer</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span><span class="mi">4</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span></pre></div></td></tr><tr id="section-581"><td class="docs"><div class="pilwrap"><a href="#section-581" class="pilcrow">&#182;</a></div><p>set the index buffer!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">popStencil</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stencilStack</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">--</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stencilStack</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-582"><td class="docs"><div class="pilwrap"><a href="#section-582" class="pilcrow">&#182;</a></div><p>the stack is empty!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">STENCIL_TEST</span><span class="p">);</span>

    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">level</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">bindGraphics</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">webGLData</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">webGLData</span><span class="p">.</span><span class="nx">mode</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span> <span class="mh">0xFF</span> <span class="o">-</span> <span class="p">(</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INCR</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DECR</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-583"><td class="docs"><div class="pilwrap"><a href="#section-583" class="pilcrow">&#182;</a></div><p>draw a quad to increment..</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_FAN</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="p">(</span> <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">);</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ALWAYS</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mh">0xFF</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INVERT</span><span class="p">);</span></pre></div></td></tr><tr id="section-584"><td class="docs"><div class="pilwrap"><a href="#section-584" class="pilcrow">&#182;</a></div><p>draw the triangle strip!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_FAN</span><span class="p">,</span>  <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="mh">0xFF</span><span class="o">-</span><span class="p">(</span><span class="nx">level</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="p">}</span>

        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-585"><td class="docs"><div class="pilwrap"><a href="#section-585" class="pilcrow">&#182;</a></div><p>console.log("&lt;&lt;>>")</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span> <span class="mh">0xFF</span> <span class="o">-</span> <span class="p">(</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">INCR</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">DECR</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_STRIP</span><span class="p">,</span>  <span class="nx">webGLData</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">reverse</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="mh">0xFF</span><span class="o">-</span><span class="p">(</span><span class="nx">level</span><span class="p">),</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">EQUAL</span><span class="p">,</span><span class="nx">level</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">stencilOp</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">,</span><span class="nx">gl</span><span class="p">.</span><span class="nx">KEEP</span><span class="p">);</span>


    <span class="p">}</span></pre></div></td></tr><tr id="section-586"><td class="docs"><div class="pilwrap"><a href="#section-586" class="pilcrow">&#182;</a></div><p>renderSession.shaderManager.deactivatePrimitiveShader();</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-587"><td class="docs"><div class="pilwrap"><a href="#section-587" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the mask stack</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLStencilManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maskStack</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-588"><td class="docs"><div class="pilwrap"><a href="#section-588" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-589"><td class="docs"><div class="pilwrap"><a href="#section-589" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLShaderManager</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">maxAttibs</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attribState</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">shaderMap</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxAttibs</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attribState</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span></pre></div></td></tr><tr id="section-590"><td class="docs"><div class="pilwrap"><a href="#section-590" class="pilcrow">&#182;</a></div><p>the final one is used for the rendering strips</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-591"><td class="docs"><div class="pilwrap"><a href="#section-591" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the context and the properties</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">transparent</span><span>- Whether or not the drawing context should be transparent</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-592"><td class="docs"><div class="pilwrap"><a href="#section-592" class="pilcrow">&#182;</a></div><p>the next one is used for rendering primatives</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">primitiveShader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PrimitiveShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span></pre></div></td></tr><tr id="section-593"><td class="docs"><div class="pilwrap"><a href="#section-593" class="pilcrow">&#182;</a></div><p>the next one is used for rendering triangle strips</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">complexPrimativeShader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ComplexPrimitiveShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span></pre></div></td></tr><tr id="section-594"><td class="docs"><div class="pilwrap"><a href="#section-594" class="pilcrow">&#182;</a></div><p>this shader is used for the default sprite rendering</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span></pre></div></td></tr><tr id="section-595"><td class="docs"><div class="pilwrap"><a href="#section-595" class="pilcrow">&#182;</a></div><p>this shader is used for the fast sprite rendering</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fastShader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiFastShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span></pre></div></td></tr><tr id="section-596"><td class="docs"><div class="pilwrap"><a href="#section-596" class="pilcrow">&#182;</a></div><p>the next one is used for rendering triangle strips</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">stripShader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">StripShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-597"><td class="docs"><div class="pilwrap"><a href="#section-597" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Takes the attributes given in parameters</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">attribs</span><span>- attribs</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setAttribs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attribs</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-598"><td class="docs"><div class="pilwrap"><a href="#section-598" class="pilcrow">&#182;</a></div><p>reset temp state</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-599"><td class="docs"><div class="pilwrap"><a href="#section-599" class="pilcrow">&#182;</a></div><p>set the new attribs</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">attribs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">attribId</span> <span class="o">=</span> <span class="nx">attribs</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">[</span><span class="nx">attribId</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">attribState</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attribState</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">attribState</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">enableVertexAttribArray</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">gl</span><span class="p">.</span><span class="nx">disableVertexAttribArray</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setShader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">shader</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentId</span> <span class="o">===</span> <span class="nx">shader</span><span class="p">.</span><span class="nx">_UID</span><span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_currentId</span> <span class="o">=</span> <span class="nx">shader</span><span class="p">.</span><span class="nx">_UID</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentShader</span> <span class="o">=</span> <span class="nx">shader</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">program</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setAttribs</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-600"><td class="docs"><div class="pilwrap"><a href="#section-600" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLShaderManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attribState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">tempAttribState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">primitiveShader</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fastShader</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stripShader</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-601"><td class="docs"><div class="pilwrap"><a href="#section-601" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves</p></div><div class="body"><p>Big thanks to the very clever Matt DesLauriers <mattdesl> <a href='https://github.com/mattdesl/'>https://github.com/mattdesl/</a><br />for creating the original pixi version!</p>

<p>Heavily inspired by LibGDX's WebGLSpriteBatch:<br /><a href='https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/WebGLSpriteBatch.java'>https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/WebGLSpriteBatch.java</a></p></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-602"><td class="docs"><div class="pilwrap"><a href="#section-602" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLSpriteBatch</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-603"><td class="docs"><div class="pilwrap"><a href="#section-603" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property vertSize</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span></pre></div></td></tr><tr id="section-604"><td class="docs"><div class="pilwrap"><a href="#section-604" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The number of images in the SpriteBatch before it flushes</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span><span class="c1">//Math.pow(2, 16) /  this.vertSize;</span></pre></div></td></tr><tr id="section-605"><td class="docs"><div class="pilwrap"><a href="#section-605" class="pilcrow">&#182;</a></div><p>the total number of floats in our batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">numVerts</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span>  <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">;</span></pre></div></td></tr><tr id="section-606"><td class="docs"><div class="pilwrap"><a href="#section-606" class="pilcrow">&#182;</a></div><p>the total number of indices in our batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">numIndices</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="mi">6</span><span class="p">;</span></pre></div></td></tr><tr id="section-607"><td class="docs"><div class="pilwrap"><a href="#section-607" class="pilcrow">&#182;</a></div><p>vertex data</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-608"><td class="docs"><div class="pilwrap"><a href="#section-608" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Holds the vertices</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Float32Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">numVerts</span><span class="p">);</span></pre></div></td></tr><tr id="section-609"><td class="docs"><div class="pilwrap"><a href="#section-609" class="pilcrow">&#182;</a></div><p>index data</p>

<div class="dox"><div class="summary"><p>Holds the indices</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Uint16Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">(</span><span class="nx">numIndices</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">lastIndexCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numIndices</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">j</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">drawing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">textures</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blendModes</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-610"><td class="docs"><div class="pilwrap"><a href="#section-610" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method setContext</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-611"><td class="docs"><div class="pilwrap"><a href="#section-611" class="pilcrow">&#182;</a></div><p>create a couple of buffers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span></pre></div></td></tr><tr id="section-612"><td class="docs"><div class="pilwrap"><a href="#section-612" class="pilcrow">&#182;</a></div><p>65535 is max index, so 65535 / 6 = 10922.</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-613"><td class="docs"><div class="pilwrap"><a href="#section-613" class="pilcrow">&#182;</a></div><p>upload the index data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DYNAMIC_DRAW</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="mi">99999</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-614"><td class="docs"><div class="pilwrap"><a href="#section-614" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method begin</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span><span>- the RenderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">begin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">shader</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-615"><td class="docs"><div class="pilwrap"><a href="#section-615" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method end</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-616"><td class="docs"><div class="pilwrap"><a href="#section-616" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method render</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Sprite} </span><span class="dox_type">sprite</span><span>- the sprite to render when using this spritebatch</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sprite</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">;</span></pre></div></td></tr><tr id="section-617"><td class="docs"><div class="pilwrap"><a href="#section-617" class="pilcrow">&#182;</a></div><p>TODO set blend modes..
check texture..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-618"><td class="docs"><div class="pilwrap"><a href="#section-618" class="pilcrow">&#182;</a></div><p>return;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-619"><td class="docs"><div class="pilwrap"><a href="#section-619" class="pilcrow">&#182;</a></div><p>get the uvs for the texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">;</span></pre></div></td></tr><tr id="section-620"><td class="docs"><div class="pilwrap"><a href="#section-620" class="pilcrow">&#182;</a></div><p>if the uvs have not updated then no point rendering just yet!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">uvs</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-621"><td class="docs"><div class="pilwrap"><a href="#section-621" class="pilcrow">&#182;</a></div><p>get the sprites current alpha</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tint</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">tint</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">;</span></pre></div></td></tr><tr id="section-622"><td class="docs"><div class="pilwrap"><a href="#section-622" class="pilcrow">&#182;</a></div><p>TODO trim??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">aX</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">aY</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">w0</span><span class="p">,</span> <span class="nx">w1</span><span class="p">,</span> <span class="nx">h0</span><span class="p">,</span> <span class="nx">h1</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-623"><td class="docs"><div class="pilwrap"><a href="#section-623" class="pilcrow">&#182;</a></div><p>if the sprite is trimmed then we need to add the extra space before transforming the sprite coords..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">trim</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">;</span>

        <span class="nx">w1</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">aX</span> <span class="o">*</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="nx">w0</span> <span class="o">=</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>

        <span class="nx">h1</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">aY</span> <span class="o">*</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="nx">h0</span> <span class="o">=</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">w0</span> <span class="o">=</span> <span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">aX</span><span class="p">);</span>
        <span class="nx">w1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">aX</span><span class="p">;</span>

        <span class="nx">h0</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">aY</span><span class="p">);</span>
        <span class="nx">h1</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="o">-</span><span class="nx">aY</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span><span class="c1">//[0];</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span><span class="c1">//[3];</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span><span class="c1">//[1];</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span><span class="c1">//[4];</span>
    <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span><span class="c1">//[2];</span>
    <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span><span class="c1">///[5];</span></pre></div></td></tr><tr id="section-624"><td class="docs"><div class="pilwrap"><a href="#section-624" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-625"><td class="docs"><div class="pilwrap"><a href="#section-625" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x0</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y0</span><span class="p">;</span></pre></div></td></tr><tr id="section-626"><td class="docs"><div class="pilwrap"><a href="#section-626" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-627"><td class="docs"><div class="pilwrap"><a href="#section-627" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-628"><td class="docs"><div class="pilwrap"><a href="#section-628" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x1</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y1</span><span class="p">;</span></pre></div></td></tr><tr id="section-629"><td class="docs"><div class="pilwrap"><a href="#section-629" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-630"><td class="docs"><div class="pilwrap"><a href="#section-630" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-631"><td class="docs"><div class="pilwrap"><a href="#section-631" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x2</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y2</span><span class="p">;</span></pre></div></td></tr><tr id="section-632"><td class="docs"><div class="pilwrap"><a href="#section-632" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-633"><td class="docs"><div class="pilwrap"><a href="#section-633" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-634"><td class="docs"><div class="pilwrap"><a href="#section-634" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x3</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y3</span><span class="p">;</span></pre></div></td></tr><tr id="section-635"><td class="docs"><div class="pilwrap"><a href="#section-635" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-636"><td class="docs"><div class="pilwrap"><a href="#section-636" class="pilcrow">&#182;</a></div><p>increment the batchsize</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="o">++</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-637"><td class="docs"><div class="pilwrap"><a href="#section-637" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a tilingSprite using the spriteBatch</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{TilingSprite} </span><span class="dox_type">sprite</span><span>- the tilingSprite to render</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderTilingSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tilingSprite</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">;</span></pre></div></td></tr><tr id="section-638"><td class="docs"><div class="pilwrap"><a href="#section-638" class="pilcrow">&#182;</a></div><p>check texture..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-639"><td class="docs"><div class="pilwrap"><a href="#section-639" class="pilcrow">&#182;</a></div><p>return;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-640"><td class="docs"><div class="pilwrap"><a href="#section-640" class="pilcrow">&#182;</a></div><p>set the textures uvs temporarily
TODO create a separate texture so that we can tile part of a texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">)</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">_uvs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureUvs</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">;</span>

    <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">%=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">%=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">offsetX</span> <span class="o">=</span>  <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span><span class="o">/</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="o">*</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">offsetY</span> <span class="o">=</span>  <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span><span class="o">/</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="o">*</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">scaleX</span> <span class="o">=</span>  <span class="p">(</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>  <span class="o">/</span> <span class="p">(</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScale</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">scaleY</span> <span class="o">=</span>  <span class="p">(</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScale</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">uvs</span><span class="p">.</span><span class="nx">x0</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">.</span><span class="nx">y0</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">offsetY</span><span class="p">;</span>

    <span class="nx">uvs</span><span class="p">.</span><span class="nx">x1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">scaleX</span><span class="p">)</span> <span class="o">-</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">.</span><span class="nx">y1</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">offsetY</span><span class="p">;</span>

    <span class="nx">uvs</span><span class="p">.</span><span class="nx">x2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">scaleX</span><span class="p">)</span> <span class="o">-</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">.</span><span class="nx">y2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">scaleY</span><span class="p">)</span> <span class="o">-</span> <span class="nx">offsetY</span><span class="p">;</span>

    <span class="nx">uvs</span><span class="p">.</span><span class="nx">x3</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">.</span><span class="nx">y3</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span><span class="nx">scaleY</span><span class="p">)</span> <span class="o">-</span> <span class="nx">offsetY</span><span class="p">;</span></pre></div></td></tr><tr id="section-641"><td class="docs"><div class="pilwrap"><a href="#section-641" class="pilcrow">&#182;</a></div><p>get the tilingSprites current alpha</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tint</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">tint</span><span class="p">;</span>

    <span class="kd">var</span>  <span class="nx">verticies</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span></pre></div></td></tr><tr id="section-642"><td class="docs"><div class="pilwrap"><a href="#section-642" class="pilcrow">&#182;</a></div><p>TODO trim??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">aX</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">aY</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">w0</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">aX</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="o">-</span><span class="nx">aX</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">h0</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">aY</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="o">-</span><span class="nx">aY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span><span class="c1">//[0];</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span><span class="c1">//[3];</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span><span class="c1">//[1];</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span><span class="c1">//[4];</span>
    <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span><span class="c1">//[2];</span>
    <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span><span class="c1">///[5];</span></pre></div></td></tr><tr id="section-643"><td class="docs"><div class="pilwrap"><a href="#section-643" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-644"><td class="docs"><div class="pilwrap"><a href="#section-644" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x0</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y0</span><span class="p">;</span></pre></div></td></tr><tr id="section-645"><td class="docs"><div class="pilwrap"><a href="#section-645" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-646"><td class="docs"><div class="pilwrap"><a href="#section-646" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">);</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-647"><td class="docs"><div class="pilwrap"><a href="#section-647" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x1</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y1</span><span class="p">;</span></pre></div></td></tr><tr id="section-648"><td class="docs"><div class="pilwrap"><a href="#section-648" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-649"><td class="docs"><div class="pilwrap"><a href="#section-649" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-650"><td class="docs"><div class="pilwrap"><a href="#section-650" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x2</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y2</span><span class="p">;</span></pre></div></td></tr><tr id="section-651"><td class="docs"><div class="pilwrap"><a href="#section-651" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-652"><td class="docs"><div class="pilwrap"><a href="#section-652" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span></pre></div></td></tr><tr id="section-653"><td class="docs"><div class="pilwrap"><a href="#section-653" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x3</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y3</span><span class="p">;</span></pre></div></td></tr><tr id="section-654"><td class="docs"><div class="pilwrap"><a href="#section-654" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tint</span><span class="p">;</span></pre></div></td></tr><tr id="section-655"><td class="docs"><div class="pilwrap"><a href="#section-655" class="pilcrow">&#182;</a></div><p>increment the batchs</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="p">]</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tilingSprite</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-656"><td class="docs"><div class="pilwrap"><a href="#section-656" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the content and empties the current batch</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">flush</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-657"><td class="docs"><div class="pilwrap"><a href="#section-657" class="pilcrow">&#182;</a></div><p>If the batch is length 0 then return as there is nothing to draw</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-658"><td class="docs"><div class="pilwrap"><a href="#section-658" class="pilcrow">&#182;</a></div><p>bind the main texture</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span></pre></div></td></tr><tr id="section-659"><td class="docs"><div class="pilwrap"><a href="#section-659" class="pilcrow">&#182;</a></div><p>bind the buffers</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-660"><td class="docs"><div class="pilwrap"><a href="#section-660" class="pilcrow">&#182;</a></div><p>set the projection</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span></pre></div></td></tr><tr id="section-661"><td class="docs"><div class="pilwrap"><a href="#section-661" class="pilcrow">&#182;</a></div><p>set the pointers</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">stride</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>

    <span class="p">}</span></pre></div></td></tr><tr id="section-662"><td class="docs"><div class="pilwrap"><a href="#section-662" class="pilcrow">&#182;</a></div><p>upload the verts to the buffer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">&gt;</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="p">)</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">view</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">nextTexture</span><span class="p">,</span> <span class="nx">nextBlendMode</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">batchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">nextTexture</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">textures</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">nextBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">currentBaseTexture</span> <span class="o">!==</span> <span class="nx">nextTexture</span> <span class="o">||</span> <span class="nx">currentBlendMode</span> <span class="o">!==</span> <span class="nx">nextBlendMode</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">renderBatch</span><span class="p">(</span><span class="nx">currentBaseTexture</span><span class="p">,</span> <span class="nx">batchSize</span><span class="p">,</span> <span class="nx">start</span><span class="p">);</span>

            <span class="nx">start</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
            <span class="nx">batchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="nx">nextTexture</span><span class="p">;</span>
            <span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="nx">nextBlendMode</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">setBlendMode</span><span class="p">(</span> <span class="nx">currentBlendMode</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">batchSize</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderBatch</span><span class="p">(</span><span class="nx">currentBaseTexture</span><span class="p">,</span> <span class="nx">batchSize</span><span class="p">,</span> <span class="nx">start</span><span class="p">);</span></pre></div></td></tr><tr id="section-663"><td class="docs"><div class="pilwrap"><a href="#section-663" class="pilcrow">&#182;</a></div><p>then reset the batch!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderBatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">startIndex</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">size</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-664"><td class="docs"><div class="pilwrap"><a href="#section-664" class="pilcrow">&#182;</a></div><p>bind the current texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">));</span></pre></div></td></tr><tr id="section-665"><td class="docs"><div class="pilwrap"><a href="#section-665" class="pilcrow">&#182;</a></div><p>check if a texture is dirty..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_dirty</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">])</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">updateWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-666"><td class="docs"><div class="pilwrap"><a href="#section-666" class="pilcrow">&#182;</a></div><p>now draw those suckas!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLES</span><span class="p">,</span> <span class="nx">size</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span></pre></div></td></tr><tr id="section-667"><td class="docs"><div class="pilwrap"><a href="#section-667" class="pilcrow">&#182;</a></div><p>increment the draw count</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-668"><td class="docs"><div class="pilwrap"><a href="#section-668" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method stop</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-669"><td class="docs"><div class="pilwrap"><a href="#section-669" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method start</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-670"><td class="docs"><div class="pilwrap"><a href="#section-670" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the SpriteBatch</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-671"><td class="docs"><div class="pilwrap"><a href="#section-671" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves</p></div><div class="body"><p>Big thanks to the very clever Matt DesLauriers <mattdesl> <a href='https://github.com/mattdesl/'>https://github.com/mattdesl/</a><br />for creating the original pixi version!</p>

<p>Heavily inspired by LibGDX's WebGLSpriteBatch:<br /><a href='https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/WebGLSpriteBatch.java'>https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/WebGLSpriteBatch.java</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maxSize</span> <span class="o">=</span> <span class="mi">6000</span><span class="p">;</span><span class="c1">//Math.pow(2, 16) /  this.vertSize;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxSize</span><span class="p">;</span></pre></div></td></tr><tr id="section-672"><td class="docs"><div class="pilwrap"><a href="#section-672" class="pilcrow">&#182;</a></div><p>the total number of floats in our batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">numVerts</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span>  <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">;</span></pre></div></td></tr><tr id="section-673"><td class="docs"><div class="pilwrap"><a href="#section-673" class="pilcrow">&#182;</a></div><p>the total number of indices in our batch</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">numIndices</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxSize</span> <span class="o">*</span> <span class="mi">6</span><span class="p">;</span></pre></div></td></tr><tr id="section-674"><td class="docs"><div class="pilwrap"><a href="#section-674" class="pilcrow">&#182;</a></div><p>vertex data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">numVerts</span><span class="p">);</span></pre></div></td></tr><tr id="section-675"><td class="docs"><div class="pilwrap"><a href="#section-675" class="pilcrow">&#182;</a></div><p>index data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">(</span><span class="nx">numIndices</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">lastIndexCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numIndices</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">j</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">drawing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">shader</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">matrix</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-676"><td class="docs"><div class="pilwrap"><a href="#section-676" class="pilcrow">&#182;</a></div><p>create a couple of buffers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span></pre></div></td></tr><tr id="section-677"><td class="docs"><div class="pilwrap"><a href="#section-677" class="pilcrow">&#182;</a></div><p>65535 is max index, so 65535 / 6 = 10922.</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-678"><td class="docs"><div class="pilwrap"><a href="#section-678" class="pilcrow">&#182;</a></div><p>upload the index data</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DYNAMIC_DRAW</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">begin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spriteBatch</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">shader</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">fastShader</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">matrix</span> <span class="o">=</span> <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spriteBatch</span><span class="p">)</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span></pre></div></td></tr><tr id="section-679"><td class="docs"><div class="pilwrap"><a href="#section-679" class="pilcrow">&#182;</a></div><p>if the uvs have not updated then no point rendering just yet!</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-680"><td class="docs"><div class="pilwrap"><a href="#section-680" class="pilcrow">&#182;</a></div><p>check texture.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span></pre></div></td></tr><tr id="section-681"><td class="docs"><div class="pilwrap"><a href="#section-681" class="pilcrow">&#182;</a></div><p>check blend mode</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">setBlendMode</span><span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSprite</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sprite</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-682"><td class="docs"><div class="pilwrap"><a href="#section-682" class="pilcrow">&#182;</a></div><p>sprite = children[i];</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-683"><td class="docs"><div class="pilwrap"><a href="#section-683" class="pilcrow">&#182;</a></div><p>TODO trim??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">uvs</span><span class="p">,</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">w0</span><span class="p">,</span> <span class="nx">w1</span><span class="p">,</span> <span class="nx">h0</span><span class="p">,</span> <span class="nx">h1</span><span class="p">,</span> <span class="nx">index</span><span class="p">;</span>

    <span class="nx">uvs</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">;</span>


    <span class="nx">width</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="nx">height</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-684"><td class="docs"><div class="pilwrap"><a href="#section-684" class="pilcrow">&#182;</a></div><p>if the sprite is trimmed then we need to add the extra space before transforming the sprite coords..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">trim</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">trim</span><span class="p">;</span>

        <span class="nx">w1</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="nx">w0</span> <span class="o">=</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>

        <span class="nx">h1</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">trim</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="nx">h0</span> <span class="o">=</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">w0</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
        <span class="nx">w1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>

        <span class="nx">h0</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="nx">h1</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="o">-</span><span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">;</span></pre></div></td></tr><tr id="section-685"><td class="docs"><div class="pilwrap"><a href="#section-685" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w1</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">h1</span><span class="p">;</span>

    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-686"><td class="docs"><div class="pilwrap"><a href="#section-686" class="pilcrow">&#182;</a></div><p>scale</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-687"><td class="docs"><div class="pilwrap"><a href="#section-687" class="pilcrow">&#182;</a></div><p>rotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span></pre></div></td></tr><tr id="section-688"><td class="docs"><div class="pilwrap"><a href="#section-688" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x0</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y1</span><span class="p">;</span></pre></div></td></tr><tr id="section-689"><td class="docs"><div class="pilwrap"><a href="#section-689" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-690"><td class="docs"><div class="pilwrap"><a href="#section-690" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w0</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">h1</span><span class="p">;</span>

    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-691"><td class="docs"><div class="pilwrap"><a href="#section-691" class="pilcrow">&#182;</a></div><p>scale</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-692"><td class="docs"><div class="pilwrap"><a href="#section-692" class="pilcrow">&#182;</a></div><p>rotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span></pre></div></td></tr><tr id="section-693"><td class="docs"><div class="pilwrap"><a href="#section-693" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x1</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y1</span><span class="p">;</span></pre></div></td></tr><tr id="section-694"><td class="docs"><div class="pilwrap"><a href="#section-694" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-695"><td class="docs"><div class="pilwrap"><a href="#section-695" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w0</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">h0</span><span class="p">;</span>

    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-696"><td class="docs"><div class="pilwrap"><a href="#section-696" class="pilcrow">&#182;</a></div><p>scale</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-697"><td class="docs"><div class="pilwrap"><a href="#section-697" class="pilcrow">&#182;</a></div><p>rotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span></pre></div></td></tr><tr id="section-698"><td class="docs"><div class="pilwrap"><a href="#section-698" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x2</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y2</span><span class="p">;</span></pre></div></td></tr><tr id="section-699"><td class="docs"><div class="pilwrap"><a href="#section-699" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-700"><td class="docs"><div class="pilwrap"><a href="#section-700" class="pilcrow">&#182;</a></div><p>xy</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w1</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">h0</span><span class="p">;</span>

    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-701"><td class="docs"><div class="pilwrap"><a href="#section-701" class="pilcrow">&#182;</a></div><p>scale</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-702"><td class="docs"><div class="pilwrap"><a href="#section-702" class="pilcrow">&#182;</a></div><p>rotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span></pre></div></td></tr><tr id="section-703"><td class="docs"><div class="pilwrap"><a href="#section-703" class="pilcrow">&#182;</a></div><p>uv</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">x3</span><span class="p">;</span>
    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">.</span><span class="nx">y3</span><span class="p">;</span></pre></div></td></tr><tr id="section-704"><td class="docs"><div class="pilwrap"><a href="#section-704" class="pilcrow">&#182;</a></div><p>color</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-705"><td class="docs"><div class="pilwrap"><a href="#section-705" class="pilcrow">&#182;</a></div><p>increment the batchs</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="o">++</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">flush</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-706"><td class="docs"><div class="pilwrap"><a href="#section-706" class="pilcrow">&#182;</a></div><p>If the batch is length 0 then return as there is nothing to draw</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-707"><td class="docs"><div class="pilwrap"><a href="#section-707" class="pilcrow">&#182;</a></div><p>bind the current texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">])</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBaseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]);</span></pre></div></td></tr><tr id="section-708"><td class="docs"><div class="pilwrap"><a href="#section-708" class="pilcrow">&#182;</a></div><p>upload the verts to the buffer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">&gt;</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="p">)</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertices</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">view</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-709"><td class="docs"><div class="pilwrap"><a href="#section-709" class="pilcrow">&#182;</a></div><p>now draw those suckas!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLES</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-710"><td class="docs"><div class="pilwrap"><a href="#section-710" class="pilcrow">&#182;</a></div><p>then reset the batch!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentBatchSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-711"><td class="docs"><div class="pilwrap"><a href="#section-711" class="pilcrow">&#182;</a></div><p>increment the draw count</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFastSpriteBatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-712"><td class="docs"><div class="pilwrap"><a href="#section-712" class="pilcrow">&#182;</a></div><p>bind the main texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span></pre></div></td></tr><tr id="section-713"><td class="docs"><div class="pilwrap"><a href="#section-713" class="pilcrow">&#182;</a></div><p>bind the buffers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-714"><td class="docs"><div class="pilwrap"><a href="#section-714" class="pilcrow">&#182;</a></div><p>set the projection</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span></pre></div></td></tr><tr id="section-715"><td class="docs"><div class="pilwrap"><a href="#section-715" class="pilcrow">&#182;</a></div><p>set the matrix</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">uMatrix</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">matrix</span><span class="p">);</span></pre></div></td></tr><tr id="section-716"><td class="docs"><div class="pilwrap"><a href="#section-716" class="pilcrow">&#182;</a></div><p>set the pointers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">stride</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">vertSize</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aPositionCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aScale</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aRotation</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shader</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stride</span><span class="p">,</span> <span class="mi">9</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>


<span class="p">};</span></pre></div></td></tr><tr id="section-717"><td class="docs"><div class="pilwrap"><a href="#section-717" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-718"><td class="docs"><div class="pilwrap"><a href="#section-718" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class WebGLFilterManager</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">transparent</span><span>- Whether or not the drawing context should be transparent</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="o">=</span> <span class="nx">transparent</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">offsetX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setContext</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-719"><td class="docs"><div class="pilwrap"><a href="#section-719" class="pilcrow">&#182;</a></div><p>API</p>

<div class="dox"><div class="summary"><p>Initialises the context and the properties</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setContext</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">initShaderBuffers</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-720"><td class="docs"><div class="pilwrap"><a href="#section-720" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method begin</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div><div class="dox_tag_detail"><span>{ArrayBuffer} </span><span class="dox_type">buffer</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">begin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span></pre></div></td></tr><tr id="section-721"><td class="docs"><div class="pilwrap"><a href="#section-721" class="pilcrow">&#182;</a></div><p>console.log(this.width)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="o">-</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span> <span class="o">=</span> <span class="nx">buffer</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-722"><td class="docs"><div class="pilwrap"><a href="#section-722" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies the filter and adds it to the current filter stack</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Object} </span><span class="dox_type">filterBlock</span><span>- the filter that will be pushed to the current filter stack</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">pushFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filterBlock</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>

    <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">filterArea</span> <span class="o">||</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">();</span></pre></div></td></tr><tr id="section-723"><td class="docs"><div class="pilwrap"><a href="#section-723" class="pilcrow">&#182;</a></div><p>filter program
OPTIMISATION - the first filter is free if its a simple color change?</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">filterBlock</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">offsetX</span> <span class="o">+=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetY</span> <span class="o">+=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">texture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">texture</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span>  <span class="nx">texture</span><span class="p">.</span><span class="nx">texture</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">filterArea</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">;</span><span class="c1">// filterBlock.target.getBounds();///filterBlock.target.filterArea;</span>

    <span class="kd">var</span> <span class="nx">padding</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">padding</span><span class="p">;</span>
    <span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">padding</span><span class="p">;</span>
    <span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">padding</span><span class="p">;</span>
    <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span> <span class="o">+=</span> <span class="nx">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span> <span class="o">+=</span> <span class="nx">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span></pre></div></td></tr><tr id="section-724"><td class="docs"><div class="pilwrap"><a href="#section-724" class="pilcrow">&#182;</a></div><p>cap filter to screen size..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span></pre></div></td></tr><tr id="section-725"><td class="docs"><div class="pilwrap"><a href="#section-725" class="pilcrow">&#182;</a></div><p>gl.texImage2D(gl.TEXTURE<em>2D, 0, gl.RGBA,  filterArea.width, filterArea.height, 0, gl.RGBA, gl.UNSIGNED</em>BYTE, null);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frameBuffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-726"><td class="docs"><div class="pilwrap"><a href="#section-726" class="pilcrow">&#182;</a></div><p>set view port</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

    <span class="nx">offset</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div></td></tr><tr id="section-727"><td class="docs"><div class="pilwrap"><a href="#section-727" class="pilcrow">&#182;</a></div><p>update projection
now restore the regular shader..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">clearColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span><span class="p">);</span>

    <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_glFilterTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-728"><td class="docs"><div class="pilwrap"><a href="#section-728" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Removes the last filter from the filter stack and doesn't return it</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">popFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">filterBlock</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">filterArea</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_glFilterTexture</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-729"><td class="docs"><div class="pilwrap"><a href="#section-729" class="pilcrow">&#182;</a></div><p>now set the uvs..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">inputTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">outputTexture</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">outputTexture</span><span class="p">)</span><span class="nx">outputTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="nx">outputTexture</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-730"><td class="docs"><div class="pilwrap"><a href="#section-730" class="pilcrow">&#182;</a></div><p>need to clear this FBO as it may have some left over elements from a previous filter.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">outputTexture</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">BLEND</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">filterPass</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

            <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">outputTexture</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="p">);</span></pre></div></td></tr><tr id="section-731"><td class="docs"><div class="pilwrap"><a href="#section-731" class="pilcrow">&#182;</a></div><p>set texture</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span>
            <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">inputTexture</span><span class="p">.</span><span class="nx">texture</span><span class="p">);</span></pre></div></td></tr><tr id="section-732"><td class="docs"><div class="pilwrap"><a href="#section-732" class="pilcrow">&#182;</a></div><p>draw texture..
filterPass.applyFilterPass(filterArea.width, filterArea.height);</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">applyFilterPass</span><span class="p">(</span><span class="nx">filterPass</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-733"><td class="docs"><div class="pilwrap"><a href="#section-733" class="pilcrow">&#182;</a></div><p>swap the textures..</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">inputTexture</span><span class="p">;</span>
            <span class="nx">inputTexture</span> <span class="o">=</span> <span class="nx">outputTexture</span><span class="p">;</span>
            <span class="nx">outputTexture</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">BLEND</span><span class="p">);</span>

        <span class="nx">texture</span> <span class="o">=</span> <span class="nx">inputTexture</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">outputTexture</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">[</span><span class="nx">filterBlock</span><span class="p">.</span><span class="nx">filterPasses</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">offsetX</span> <span class="o">-=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetY</span> <span class="o">-=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>


    <span class="kd">var</span> <span class="nx">sizeX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">sizeY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">offsetX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">offsetY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buffer</span><span class="p">;</span></pre></div></td></tr><tr id="section-734"><td class="docs"><div class="pilwrap"><a href="#section-734" class="pilcrow">&#182;</a></div><p>time to render the filters texture to the previous scene</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span><span class="c1">//this.transparent);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">currentFilter</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">filterArea</span> <span class="o">=</span> <span class="nx">currentFilter</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">;</span>

        <span class="nx">sizeX</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="nx">sizeY</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="nx">offsetX</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">offsetY</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">buffer</span> <span class="o">=</span>  <span class="nx">currentFilter</span><span class="p">.</span><span class="nx">_glFilterTexture</span><span class="p">.</span><span class="nx">frameBuffer</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-735"><td class="docs"><div class="pilwrap"><a href="#section-735" class="pilcrow">&#182;</a></div><p>TODO need toremove thease global elements..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">sizeX</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">sizeY</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

    <span class="nx">offset</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">offsetY</span><span class="p">;</span>

    <span class="nx">filterArea</span> <span class="o">=</span> <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_filterArea</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">x</span><span class="o">-</span><span class="nx">offsetX</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">y</span><span class="o">-</span><span class="nx">offsetY</span><span class="p">;</span></pre></div></td></tr><tr id="section-736"><td class="docs"><div class="pilwrap"><a href="#section-736" class="pilcrow">&#182;</a></div><p>update the buffers..
make sure to flip the y!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">filterArea</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">);</span></pre></div></td></tr><tr id="section-737"><td class="docs"><div class="pilwrap"><a href="#section-737" class="pilcrow">&#182;</a></div><p>console.log(this.vertexArray)
console.log(this.uvArray)
console.log(sizeX + " : " + sizeY)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">sizeX</span><span class="p">,</span> <span class="nx">sizeY</span><span class="p">);</span></pre></div></td></tr><tr id="section-738"><td class="docs"><div class="pilwrap"><a href="#section-738" class="pilcrow">&#182;</a></div><p>bind the buffer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">buffer</span> <span class="p">);</span></pre></div></td></tr><tr id="section-739"><td class="docs"><div class="pilwrap"><a href="#section-739" class="pilcrow">&#182;</a></div><p>set the blend mode!
gl.blendFunc(gl.ONE, gl.ONE<em>MINUS</em>SRC_ALPHA)</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-740"><td class="docs"><div class="pilwrap"><a href="#section-740" class="pilcrow">&#182;</a></div><p>set texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">texture</span><span class="p">);</span></pre></div></td></tr><tr id="section-741"><td class="docs"><div class="pilwrap"><a href="#section-741" class="pilcrow">&#182;</a></div><p>apply!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">applyFilterPass</span><span class="p">(</span><span class="nx">filter</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">,</span> <span class="nx">sizeX</span><span class="p">,</span> <span class="nx">sizeY</span><span class="p">);</span></pre></div></td></tr><tr id="section-742"><td class="docs"><div class="pilwrap"><a href="#section-742" class="pilcrow">&#182;</a></div><p>now restore the regular shader..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">sizeX</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="nx">sizeY</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultShader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">offsetX</span><span class="p">,</span> <span class="o">-</span><span class="nx">offsetY</span><span class="p">);</span></pre></div></td></tr><tr id="section-743"><td class="docs"><div class="pilwrap"><a href="#section-743" class="pilcrow">&#182;</a></div><p>return the texture to the pool</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
    <span class="nx">filterBlock</span><span class="p">.</span><span class="nx">_glFilterTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-744"><td class="docs"><div class="pilwrap"><a href="#section-744" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies the filter to the specified area</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{AbstractFilter} </span><span class="dox_type">filter</span><span>- the filter that needs to be applied</span></div><div class="dox_tag_detail"><span>{texture} </span><span class="dox_type">filterArea</span><span>- TODO - might need an update</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the horizontal range of the filter</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the vertical range of the filter</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">applyFilterPass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">,</span> <span class="nx">filterArea</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-745"><td class="docs"><div class="pilwrap"><a href="#section-745" class="pilcrow">&#182;</a></div><p>use program</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">shader</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">shaders</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">];</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">shader</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">shader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixiShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">);</span>

        <span class="nx">shader</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">fragmentSrc</span><span class="p">;</span>
        <span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">;</span>
        <span class="nx">shader</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

        <span class="nx">filter</span><span class="p">.</span><span class="nx">shaders</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">shader</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-746"><td class="docs"><div class="pilwrap"><a href="#section-746" class="pilcrow">&#182;</a></div><p>set the shader</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="nx">shader</span><span class="p">);</span></pre></div></td></tr><tr id="section-747"><td class="docs"><div class="pilwrap"><a href="#section-747" class="pilcrow">&#182;</a></div><p>gl.useProgram(shader.program);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">dimensions</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">dimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="c1">//width;</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">dimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="c1">//height;</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">dimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">dimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="c1">//filterArea.height;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-748"><td class="docs"><div class="pilwrap"><a href="#section-748" class="pilcrow">&#182;</a></div><p>console.log(this.uvArray )</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">shader</span><span class="p">.</span><span class="nx">syncUniforms</span><span class="p">();</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">colorAttribute</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span></pre></div></td></tr><tr id="section-749"><td class="docs"><div class="pilwrap"><a href="#section-749" class="pilcrow">&#182;</a></div><p>draw the filter...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLES</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-750"><td class="docs"><div class="pilwrap"><a href="#section-750" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Initialises the shader buffers</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initShaderBuffers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-751"><td class="docs"><div class="pilwrap"><a href="#section-751" class="pilcrow">&#182;</a></div><p>create some buffers</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span></pre></div></td></tr><tr id="section-752"><td class="docs"><div class="pilwrap"><a href="#section-752" class="pilcrow">&#182;</a></div><p>bind and upload the vertexs..
keep a reference to the vertexFloatData..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                                         <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                                         <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span>
                                         <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">vertexArray</span><span class="p">,</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span></pre></div></td></tr><tr id="section-753"><td class="docs"><div class="pilwrap"><a href="#section-753" class="pilcrow">&#182;</a></div><p>bind and upload the uv buffer</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                                     <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                                     <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span>
                                     <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvArray</span><span class="p">,</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">colorArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
                                        <span class="mf">1.0</span><span class="p">,</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
                                        <span class="mf">1.0</span><span class="p">,</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
                                        <span class="mf">1.0</span><span class="p">,</span> <span class="mh">0xFFFFFF</span><span class="p">]);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colorBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colorArray</span><span class="p">,</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span></pre></div></td></tr><tr id="section-754"><td class="docs"><div class="pilwrap"><a href="#section-754" class="pilcrow">&#182;</a></div><p>bind and upload the index</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-755"><td class="docs"><div class="pilwrap"><a href="#section-755" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the filter and removes it from the filter stack</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLFilterManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">filterStack</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">offsetX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offsetY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-756"><td class="docs"><div class="pilwrap"><a href="#section-756" class="pilcrow">&#182;</a></div><p>destroy textures</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">texturePool</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-757"><td class="docs"><div class="pilwrap"><a href="#section-757" class="pilcrow">&#182;</a></div><p>destroy buffers..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">uvBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">colorBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteBuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">indexBuffer</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-758"><td class="docs"><div class="pilwrap"><a href="#section-758" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-759"><td class="docs"><div class="pilwrap"><a href="#section-759" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class FilterTexture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{WebGLContext} </span><span class="dox_type">gl</span><span>- the current WebGL drawing context</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the horizontal range of the filter</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the vertical range of the filter</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-760"><td class="docs"><div class="pilwrap"><a href="#section-760" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property gl</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">WebGLContext</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">;</span></pre></div></td></tr><tr id="section-761"><td class="docs"><div class="pilwrap"><a href="#section-761" class="pilcrow">&#182;</a></div><p>next time to create a frame buffer and texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createFramebuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createTexture</span><span class="p">();</span>

    <span class="nx">scaleMode</span> <span class="o">=</span> <span class="nx">scaleMode</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">DEFAULT</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="nx">scaleMode</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">?</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">LINEAR</span> <span class="o">:</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">NEAREST</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_S</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">texParameteri</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_WRAP_T</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">CLAMP_TO_EDGE</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">framebuffer</span> <span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">framebufferTexture2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_ATTACHMENT0</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-762"><td class="docs"><div class="pilwrap"><a href="#section-762" class="pilcrow">&#182;</a></div><p>required for masking a mask??</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createRenderbuffer</span><span class="p">();</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindRenderbuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">RENDERBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">framebufferRenderbuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_STENCIL_ATTACHMENT</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RENDERBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderBuffer</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-763"><td class="docs"><div class="pilwrap"><a href="#section-763" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Clears the filter texture</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">clearColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-764"><td class="docs"><div class="pilwrap"><a href="#section-764" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Resizes the texture to the specified width and height</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the new width of the texture</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the new height of the texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">===</span> <span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">===</span> <span class="nx">height</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">texImage2D</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span>  <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_BYTE</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></pre></div></td></tr><tr id="section-765"><td class="docs"><div class="pilwrap"><a href="#section-765" class="pilcrow">&#182;</a></div><p>update the stencil buffer width and height</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindRenderbuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">RENDERBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">renderbufferStorage</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">RENDERBUFFER</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_STENCIL</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-766"><td class="docs"><div class="pilwrap"><a href="#section-766" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys the filter texture</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteFramebuffer</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">deleteTexture</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-767"><td class="docs"><div class="pilwrap"><a href="#section-767" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves</p></div><div class="body"></div></div><div class="dox"><div class="summary"><p>A set of functions used to handle masking</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasMaskManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-768"><td class="docs"><div class="pilwrap"><a href="#section-768" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This method adds it to the current stack of masks</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>the </span><span class="dox_type">maskData</span><span>- maskData that will be pushed</span></div><div class="dox_tag_detail"><span>{Context2D} </span><span class="dox_type">context</span><span>- the 2d drawing method of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">pushMask</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">cacheAlpha</span> <span class="o">=</span> <span class="nx">maskData</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="nx">maskData</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphicsMask</span><span class="p">(</span><span class="nx">maskData</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">clip</span><span class="p">();</span>

    <span class="nx">maskData</span><span class="p">.</span><span class="nx">worldAlpha</span> <span class="o">=</span> <span class="nx">cacheAlpha</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-769"><td class="docs"><div class="pilwrap"><a href="#section-769" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Restores the current drawing context to the state it was before the mask was applied</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Context2D} </span><span class="dox_type">context</span><span>- the 2d drawing method of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasMaskManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">popMask</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-770"><td class="docs"><div class="pilwrap"><a href="#section-770" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-771"><td class="docs"><div class="pilwrap"><a href="#section-771" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class CanvasTinter</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-772"><td class="docs"><div class="pilwrap"><a href="#section-772" class="pilcrow">&#182;</a></div><p>/ this.textureCach</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-773"><td class="docs"><div class="pilwrap"><a href="#section-773" class="pilcrow">&#182;</a></div><p>PIXI.CanvasTinter.cachTint = true;</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-774"><td class="docs"><div class="pilwrap"><a href="#section-774" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Basically this method just needs a sprite and a color and tints the sprite<br />with the given color</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Sprite} </span><span class="dox_type">sprite</span><span>- the sprite to tint</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- the color to use to tint the sprite with</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">getTintedTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sprite</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">;</span>

    <span class="nx">color</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">roundColor</span><span class="p">(</span><span class="nx">color</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">stringColor</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;00000&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">color</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>

    <span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span><span class="p">[</span><span class="nx">stringColor</span><span class="p">])</span> <span class="k">return</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span><span class="p">[</span><span class="nx">stringColor</span><span class="p">];</span></pre></div></td></tr><tr id="section-775"><td class="docs"><div class="pilwrap"><a href="#section-775" class="pilcrow">&#182;</a></div><p>clone texture..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">canvas</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;canvas&quot;</span><span class="p">);</span></pre></div></td></tr><tr id="section-776"><td class="docs"><div class="pilwrap"><a href="#section-776" class="pilcrow">&#182;</a></div><p>PIXI.CanvasTinter.tintWithPerPixel(texture, stringColor, canvas);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintMethod</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">convertTintToImage</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-777"><td class="docs"><div class="pilwrap"><a href="#section-777" class="pilcrow">&#182;</a></div><p>is this better?</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">tintImage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
        <span class="nx">tintImage</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">();</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span><span class="p">[</span><span class="nx">stringColor</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tintImage</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">tintCache</span><span class="p">[</span><span class="nx">stringColor</span><span class="p">]</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">;</span></pre></div></td></tr><tr id="section-778"><td class="docs"><div class="pilwrap"><a href="#section-778" class="pilcrow">&#182;</a></div><p>if we are not converting the texture to an image then we need to lose the reference to the canvas</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">canvas</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">canvas</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-779"><td class="docs"><div class="pilwrap"><a href="#section-779" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tint a texture using the "multiply" operation</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{texture} </span><span class="dox_type">texture</span><span>- the texture to tint</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- the color to use to tint the sprite with</span></div><div class="dox_tag_detail"><span>{HTMLCanvasElement} </span><span class="dox_type">canvas</span><span>- the current canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintWithMultiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s2">&quot;2d&quot;</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>

    <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;00000&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">color</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s2">&quot;multiply&quot;</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s2">&quot;destination-atop&quot;</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-780"><td class="docs"><div class="pilwrap"><a href="#section-780" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tint a texture using the "overlay" operation</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{texture} </span><span class="dox_type">texture</span><span>- the texture to tint</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- the color to use to tint the sprite with</span></div><div class="dox_tag_detail"><span>{HTMLCanvasElement} </span><span class="dox_type">canvas</span><span>- the current canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintWithOverlay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s2">&quot;2d&quot;</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>

    <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>



    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s2">&quot;copy&quot;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;00000&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">color</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s2">&quot;destination-atop&quot;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-781"><td class="docs"><div class="pilwrap"><a href="#section-781" class="pilcrow">&#182;</a></div><p>context.globalCompositeOperation = "copy";</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-782"><td class="docs"><div class="pilwrap"><a href="#section-782" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Tint a texture pixel per pixel</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{texture} </span><span class="dox_type">texture</span><span>- the texture to tint</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- the color to use to tint the sprite with</span></div><div class="dox_tag_detail"><span>{HTMLCanvasElement} </span><span class="dox_type">canvas</span><span>- the current canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintWithPerPixel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s2">&quot;2d&quot;</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>

    <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="s2">&quot;copy&quot;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="mi">0</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                           <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">rgbValues</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">color</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

    <span class="kd">var</span> <span class="nx">pixelData</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">pixels</span> <span class="o">=</span> <span class="nx">pixelData</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pixels</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">pixels</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">r</span><span class="p">;</span>
        <span class="nx">pixels</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">g</span><span class="p">;</span>
        <span class="nx">pixels</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">putImageData</span><span class="p">(</span><span class="nx">pixelData</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-783"><td class="docs"><div class="pilwrap"><a href="#section-783" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Rounds the specified color according to the PIXI.CanvasTinter.cacheStepsPerColorChannel</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{number} </span><span class="dox_type">color</span><span>- the color to round, should be a hex color</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">roundColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">color</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">step</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">cacheStepsPerColorChannel</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">rgbValues</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">hex2rgb</span><span class="p">(</span><span class="nx">color</span><span class="p">);</span>

    <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="p">(</span><span class="nx">rgbValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">);</span>
    <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="p">(</span><span class="nx">rgbValues</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">);</span>
    <span class="nx">rgbValues</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="p">(</span><span class="nx">rgbValues</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">rgb2hex</span><span class="p">(</span><span class="nx">rgbValues</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-784"><td class="docs"><div class="pilwrap"><a href="#section-784" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Number of steps which will be used as a cap when rounding colors</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">cacheStepsPerColorChannel</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span></pre></div></td></tr><tr id="section-785"><td class="docs"><div class="pilwrap"><a href="#section-785" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Number of steps which will be used as a cap when rounding colors</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">convertTintToImage</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-786"><td class="docs"><div class="pilwrap"><a href="#section-786" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether or not the Canvas BlendModes are supported, consequently the ability to tint using the multiply method</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">canUseMultiply</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">canUseNewCanvasBlendModes</span><span class="p">();</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintMethod</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">canUseMultiply</span> <span class="o">?</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintWithMultiply</span> <span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasTinter</span><span class="p">.</span><span class="nx">tintWithPerPixel</span><span class="p">;</span></pre></div></td></tr><tr id="section-787"><td class="docs"><div class="pilwrap"><a href="#section-787" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-788"><td class="docs"><div class="pilwrap"><a href="#section-788" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the CanvasRenderer draws the stage and all its content onto a 2d canvas. This renderer should be used for browsers that do not support webGL.<br />Dont forget to add the view to your DOM or you will not see anything :)</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width=800</span><span>- the width of the canvas view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height=600</span><span>- the height of the canvas view</span></div><div class="dox_tag_detail"><span>{HTMLCanvasElement} </span><span class="dox_type">[view]</span><span>- the canvas to use as a view, optional</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">[transparent=false]</span><span>- the transparency of the render view, default false</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">transparent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">defaultRenderer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">(</span><span class="s2">&quot;Canvas&quot;</span><span class="p">);</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">defaultRenderer</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CANVAS_RENDERER</span><span class="p">;</span></pre></div></td></tr><tr id="section-789"><td class="docs"><div class="pilwrap"><a href="#section-789" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This sets if the CanvasRenderer will clear the canvas or not before the new render pass.<br />If the Stage is NOT transparent Pixi will use a canvas sized fillRect operation every frame to set the canvas background color.<br />If the Stage is transparent Pixi will use clearRect to clear the canvas every frame.<br />Disable this by setting this to false. For example if your game has a canvas filling background image you often don't need this set.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">clearBeforeRender</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-790"><td class="docs"><div class="pilwrap"><a href="#section-790" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the render view is transparent</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">transparent</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">canUseNewCanvasBlendModes</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">ADD</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">&quot;lighter&quot;</span><span class="p">;</span> <span class="c1">//IS THIS OK???</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">MULTIPLY</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;multiply&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SCREEN</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;screen&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">OVERLAY</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;overlay&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DARKEN</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;darken&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LIGHTEN</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;lighten&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_DODGE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;color-dodge&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_BURN</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;color-burn&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HARD_LIGHT</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;hard-light&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SOFT_LIGHT</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;soft-light&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DIFFERENCE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;difference&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">EXCLUSION</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;exclusion&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HUE</span><span class="p">]</span>       <span class="o">=</span> <span class="s2">&quot;hue&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SATURATION</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;saturation&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">&quot;color&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LUMINOSITY</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;luminosity&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-791"><td class="docs"><div class="pilwrap"><a href="#section-791" class="pilcrow">&#182;</a></div><p>this means that the browser does not support the cool new blend modes in canvas "cough" ie "cough"</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">ADD</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">&quot;lighter&quot;</span><span class="p">;</span> <span class="c1">//IS THIS OK???</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">MULTIPLY</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SCREEN</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">OVERLAY</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DARKEN</span><span class="p">]</span>   <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LIGHTEN</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_DODGE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR_BURN</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HARD_LIGHT</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SOFT_LIGHT</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">DIFFERENCE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">EXCLUSION</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">HUE</span><span class="p">]</span>       <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">SATURATION</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">COLOR</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">LUMINOSITY</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source-over&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-792"><td class="docs"><div class="pilwrap"><a href="#section-792" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the canvas view</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">800</span><span class="p">;</span></pre></div></td></tr><tr id="section-793"><td class="docs"><div class="pilwrap"><a href="#section-793" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the canvas view</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">600</span><span class="p">;</span></pre></div></td></tr><tr id="section-794"><td class="docs"><div class="pilwrap"><a href="#section-794" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The canvas element that everything is drawn to</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="nx">view</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;canvas&quot;</span> <span class="p">);</span></pre></div></td></tr><tr id="section-795"><td class="docs"><div class="pilwrap"><a href="#section-795" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The canvas 2d context that everything is drawn with</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">HTMLCanvasElement</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s2">&quot;2d&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">alpha</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="p">}</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">refresh</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-796"><td class="docs"><div class="pilwrap"><a href="#section-796" class="pilcrow">&#182;</a></div><p>hack to enable some hardware acceleration!
this.view.style["transform"] = "translatez(0)";</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-797"><td class="docs"><div class="pilwrap"><a href="#section-797" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Instance of a PIXI.CanvasMaskManager, handles masking when using the canvas renderer</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">CanvasMaskManager</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasMaskManager</span><span class="p">();</span></pre></div></td></tr><tr id="section-798"><td class="docs"><div class="pilwrap"><a href="#section-798" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The render session is just a bunch of parameter used for rendering</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">context</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span>
        <span class="nx">maskManager</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">,</span>
        <span class="nx">scaleMode</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">smoothProperty</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div></td></tr><tr id="section-799"><td class="docs"><div class="pilwrap"><a href="#section-799" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>If true Pixi will Math.floor() x/y values when rendering, stopping pixel interpolation.<br />Handy for crisp pixel art and speed on legacy devices.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">roundPixels</span><span class="o">:</span> <span class="kc">false</span>
    <span class="p">};</span>

    <span class="k">if</span><span class="p">(</span><span class="s2">&quot;imageSmoothingEnabled&quot;</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span> <span class="o">=</span> <span class="s2">&quot;imageSmoothingEnabled&quot;</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;webkitImageSmoothingEnabled&quot;</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span> <span class="o">=</span> <span class="s2">&quot;webkitImageSmoothingEnabled&quot;</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;mozImageSmoothingEnabled&quot;</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span> <span class="o">=</span> <span class="s2">&quot;mozImageSmoothingEnabled&quot;</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;oImageSmoothingEnabled&quot;</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">smoothProperty</span> <span class="o">=</span> <span class="s2">&quot;oImageSmoothingEnabled&quot;</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-800"><td class="docs"><div class="pilwrap"><a href="#section-800" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">;</span></pre></div></td></tr><tr id="section-801"><td class="docs"><div class="pilwrap"><a href="#section-801" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the stage to its canvas view</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Stage} </span><span class="dox_type">stage</span><span>- the Stage element to be rendered</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stage</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-802"><td class="docs"><div class="pilwrap"><a href="#section-802" class="pilcrow">&#182;</a></div><p>update textures if need be</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToUpdate</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nx">stage</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">isCocoonJS</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">screencanvas</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">clearBeforeRender</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColorString</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">transparent</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">clearBeforeRender</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderDisplayObject</span><span class="p">(</span><span class="nx">stage</span><span class="p">);</span></pre></div></td></tr><tr id="section-803"><td class="docs"><div class="pilwrap"><a href="#section-803" class="pilcrow">&#182;</a></div><p>run interaction!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-804"><td class="docs"><div class="pilwrap"><a href="#section-804" class="pilcrow">&#182;</a></div><p>need to add some events!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">_interactiveEventsAdded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">stage</span><span class="p">.</span><span class="nx">interactionManager</span><span class="p">.</span><span class="nx">setTarget</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-805"><td class="docs"><div class="pilwrap"><a href="#section-805" class="pilcrow">&#182;</a></div><p>remove frame updates..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-806"><td class="docs"><div class="pilwrap"><a href="#section-806" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Resizes the canvas view to the specified width and height</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the new width of the canvas view</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the new height of the canvas view</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-807"><td class="docs"><div class="pilwrap"><a href="#section-807" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a display object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- The displayObject to render</span></div><div class="dox_tag_detail"><span>{Context2D} </span><span class="dox_type">context</span><span>- the context 2d method of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderDisplayObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-808"><td class="docs"><div class="pilwrap"><a href="#section-808" class="pilcrow">&#182;</a></div><p>no longer recursive!
var transform;
var context = this.context;</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">_renderCanvas</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSession</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-809"><td class="docs"><div class="pilwrap"><a href="#section-809" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a flat strip</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Strip} </span><span class="dox_type">strip</span><span>- The Strip to render</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderStripFlat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">strip</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">verticies</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-810"><td class="docs"><div class="pilwrap"><a href="#section-810" class="pilcrow">&#182;</a></div><p>draw some triangles!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="p">],</span>   <span class="nx">x1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">4</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">5</span><span class="p">];</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">;</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-811"><td class="docs"><div class="pilwrap"><a href="#section-811" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a strip</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Strip} </span><span class="dox_type">strip</span><span>- The Strip to render</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasRenderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderStrip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">strip</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span></pre></div></td></tr><tr id="section-812"><td class="docs"><div class="pilwrap"><a href="#section-812" class="pilcrow">&#182;</a></div><p>draw triangles!!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">verticies</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">uvs</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-813"><td class="docs"><div class="pilwrap"><a href="#section-813" class="pilcrow">&#182;</a></div><p>draw some triangles!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="p">],</span>   <span class="nx">x1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">4</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">5</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">u0</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>   <span class="nx">u1</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">u2</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">v0</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">v1</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">v2</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">clip</span><span class="p">();</span></pre></div></td></tr><tr id="section-814"><td class="docs"><div class="pilwrap"><a href="#section-814" class="pilcrow">&#182;</a></div><p>Compute matrix transform</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">delta</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaA</span> <span class="o">=</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x2</span> <span class="o">+</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaB</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x1</span> <span class="o">+</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaC</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x1</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaD</span> <span class="o">=</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y2</span> <span class="o">+</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaE</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y1</span> <span class="o">+</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaF</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y1</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">deltaA</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaD</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span>
                            <span class="nx">deltaB</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaE</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span>
                            <span class="nx">deltaC</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaF</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">);</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-815"><td class="docs"><div class="pilwrap"><a href="#section-815" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Creates a Canvas element of the given size</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the width for the newly created canvas</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the height for the newly created canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;canvas&quot;</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span> <span class="s2">&quot;2d&quot;</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-816"><td class="docs"><div class="pilwrap"><a href="#section-816" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Clears the canvas that was created by the CanvasBuffer class</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-817"><td class="docs"><div class="pilwrap"><a href="#section-817" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Resizes the canvas that was created by the CanvasBuffer class to the specified width and height</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the new width of the canvas</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the new height of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-818"><td class="docs"><div class="pilwrap"><a href="#section-818" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-819"><td class="docs"><div class="pilwrap"><a href="#section-819" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A set of functions used by the canvas renderer to draw the primitive graphics data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-820"><td class="docs"><div class="pilwrap"><a href="#section-820" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the graphics object</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphics</span><span>- the actual graphics object to render</span></div><div class="dox_tag_detail"><span>{Context2D} </span><span class="dox_type">context</span><span>- the 2d drawing method of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">worldAlpha</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">j</span> <span class="o">*</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">j</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-821"><td class="docs"><div class="pilwrap"><a href="#section-821" class="pilcrow">&#182;</a></div><p>if the first and last point are the same close the path - much neater :)</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span><span class="p">)</span>
        <span class="p">{</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>

            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">strokeRect</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
            <span class="p">}</span>

        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-822"><td class="docs"><div class="pilwrap"><a href="#section-822" class="pilcrow">&#182;</a></div><p>TODO - need to be Undefined!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-823"><td class="docs"><div class="pilwrap"><a href="#section-823" class="pilcrow">&#182;</a></div><p>ellipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">ellipseData</span> <span class="o">=</span>  <span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

            <span class="kd">var</span> <span class="nx">kappa</span> <span class="o">=</span> <span class="mf">0.5522848</span><span class="p">,</span>
                <span class="nx">ox</span> <span class="o">=</span> <span class="p">(</span><span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="nx">kappa</span><span class="p">,</span> <span class="c1">// control point offset horizontal</span>
                <span class="nx">oy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="nx">kappa</span><span class="p">,</span> <span class="c1">// control point offset vertical</span>
                <span class="nx">xe</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span><span class="p">,</span>           <span class="c1">// x-end</span>
                <span class="nx">ye</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span><span class="p">,</span>           <span class="c1">// y-end</span>
                <span class="nx">xm</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>       <span class="c1">// x-middle</span>
                <span class="nx">ym</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>       <span class="c1">// y-middle</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">-</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xm</span> <span class="o">-</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">xm</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xm</span> <span class="o">+</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">-</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">+</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xm</span> <span class="o">+</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">ye</span><span class="p">,</span> <span class="nx">xm</span><span class="p">,</span> <span class="nx">ye</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xm</span> <span class="o">-</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">ye</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">+</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fill</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RREC</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

            <span class="kd">var</span> <span class="nx">maxRadius</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">radius</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">&gt;</span> <span class="nx">maxRadius</span> <span class="o">?</span> <span class="nx">maxRadius</span> <span class="o">:</span> <span class="nx">radius</span><span class="p">;</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span><span class="p">,</span> <span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;00000&#39;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">|</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">substr</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">);</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>

            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">*</span> <span class="nx">worldAlpha</span><span class="p">;</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-824"><td class="docs"><div class="pilwrap"><a href="#section-824" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders a graphics mask</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Graphics} </span><span class="dox_type">graphics</span><span>- the graphics which will be used as a mask</span></div><div class="dox_tag_detail"><span>{Context2D} </span><span class="dox_type">context</span><span>- the context 2d method of the canvas</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphicsMask</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">graphics</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">len</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">len</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Pixi.js warning: masks in canvas can only mask using the first path in the graphics object&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">graphics</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">j</span> <span class="o">*</span> <span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">j</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-825"><td class="docs"><div class="pilwrap"><a href="#section-825" class="pilcrow">&#182;</a></div><p>if the first and last point are the same close the path - much neater :)</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
            <span class="p">}</span>

        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-826"><td class="docs"><div class="pilwrap"><a href="#section-826" class="pilcrow">&#182;</a></div><p>TODO - need to be Undefined!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-827"><td class="docs"><div class="pilwrap"><a href="#section-827" class="pilcrow">&#182;</a></div><p>ellipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">ellipseData</span> <span class="o">=</span>  <span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">ellipseData</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>

            <span class="kd">var</span> <span class="nx">kappa</span> <span class="o">=</span> <span class="mf">0.5522848</span><span class="p">,</span>
                <span class="nx">ox</span> <span class="o">=</span> <span class="p">(</span><span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="nx">kappa</span><span class="p">,</span> <span class="c1">// control point offset horizontal</span>
                <span class="nx">oy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="nx">kappa</span><span class="p">,</span> <span class="c1">// control point offset vertical</span>
                <span class="nx">xe</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span><span class="p">,</span>           <span class="c1">// x-end</span>
                <span class="nx">ye</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span><span class="p">,</span>           <span class="c1">// y-end</span>
                <span class="nx">xm</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>       <span class="c1">// x-middle</span>
                <span class="nx">ym</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>       <span class="c1">// y-middle</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">-</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xm</span> <span class="o">-</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">xm</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xm</span> <span class="o">+</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">-</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xe</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">+</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">xm</span> <span class="o">+</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">ye</span><span class="p">,</span> <span class="nx">xm</span><span class="p">,</span> <span class="nx">ye</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">bezierCurveTo</span><span class="p">(</span><span class="nx">xm</span> <span class="o">-</span> <span class="nx">ox</span><span class="p">,</span> <span class="nx">ye</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span> <span class="o">+</span> <span class="nx">oy</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">ym</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RREC</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

            <span class="kd">var</span> <span class="nx">maxRadius</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">radius</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">&gt;</span> <span class="nx">maxRadius</span> <span class="o">?</span> <span class="nx">maxRadius</span> <span class="o">:</span> <span class="nx">radius</span><span class="p">;</span>

            <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">ry</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">+</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">ry</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">quadraticCurveTo</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span><span class="p">,</span> <span class="nx">rx</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">+</span> <span class="nx">radius</span><span class="p">);</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-828"><td class="docs"><div class="pilwrap"><a href="#section-828" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-829"><td class="docs"><div class="pilwrap"><a href="#section-829" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Graphics class contains a set of methods that you can use to create primitive shapes and lines.<br />It is important to know that with the webGL renderer only simple polygons can be filled at this stage<br />Complex polygons will not be filled. Heres an example of a complex polygon: <a href='http://www.goodboydigital.com/wp-content/uploads/2013/06/complexPolygon.png'>http://www.goodboydigital.com/wp-content/uploads/2013/06/complexPolygon.png</a></p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-830"><td class="docs"><div class="pilwrap"><a href="#section-830" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The alpha of the fill of this graphics object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></pre></div></td></tr><tr id="section-831"><td class="docs"><div class="pilwrap"><a href="#section-831" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of any lines drawn</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-832"><td class="docs"><div class="pilwrap"><a href="#section-832" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The color of any lines drawn</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">;</span></pre></div></td></tr><tr id="section-833"><td class="docs"><div class="pilwrap"><a href="#section-833" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Graphics data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-834"><td class="docs"><div class="pilwrap"><a href="#section-834" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The tint applied to the graphic shape. This is a hex value</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">;</span><span class="c1">// * Math.random();</span></pre></div></td></tr><tr id="section-835"><td class="docs"><div class="pilwrap"><a href="#section-835" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The blend mode to be applied to the graphic shape</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">;</span></pre></div></td></tr><tr id="section-836"><td class="docs"><div class="pilwrap"><a href="#section-836" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Current path</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">points</span><span class="o">:</span><span class="p">[]};</span></pre></div></td></tr><tr id="section-837"><td class="docs"><div class="pilwrap"><a href="#section-837" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Array containing some WebGL-related properties used by the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_webGL</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-838"><td class="docs"><div class="pilwrap"><a href="#section-838" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether this shape is being used as a mask</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">isMask</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">isMask</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-839"><td class="docs"><div class="pilwrap"><a href="#section-839" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The bounds of the graphic shape as rectangle object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-840"><td class="docs"><div class="pilwrap"><a href="#section-840" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the bounds' padding used for bounds calculation</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">boundsPadding</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span></pre></div></td></tr><tr id="section-841"><td class="docs"><div class="pilwrap"><a href="#section-841" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Used to detect if the graphics object has changed if this is set to true then the graphics object will be recalculated</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-842"><td class="docs"><div class="pilwrap"><a href="#section-842" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">;</span></pre></div></td></tr><tr id="section-843"><td class="docs"><div class="pilwrap"><a href="#section-843" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>If cacheAsBitmap is true the graphics object will then be rendered as if it was a sprite.<br />This is useful if your graphics element does not change often as it will speed up the rendering of the object<br />It is also usful as the graphics object will always be antialiased because it will be rendered using canvas<br />Not recommended if you are constanly redrawing the graphics element.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;cacheAsBitmap&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_generateCachedSprite</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">destroyCachedSprite</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-844"><td class="docs"><div class="pilwrap"><a href="#section-844" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Specifies the line style used for subsequent calls to Graphics methods such as the lineTo() method or the drawCircle() method.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">lineWidth</span><span>- width of the line to draw, will update the object's stored style</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- color of the line to draw, will update the object's stored style</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">alpha</span><span>- alpha of the line to draw, will update the object's stored style</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">lineStyle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">lineWidth</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">alpha</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span> <span class="nx">points</span><span class="o">:</span><span class="p">[],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-845"><td class="docs"><div class="pilwrap"><a href="#section-845" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Moves the current drawing position to (x, y).</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- the X coordinate to move to</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- the Y coordinate to move to</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">moveTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span> <span class="nx">points</span><span class="o">:</span><span class="p">[],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-846"><td class="docs"><div class="pilwrap"><a href="#section-846" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Draws a line using the current line style from the current drawing position to (x, y);<br />the current drawing position is then set to (x, y).</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- the X coordinate to draw to</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- the Y coordinate to draw to</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">lineTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-847"><td class="docs"><div class="pilwrap"><a href="#section-847" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Calculate the points for a quadratic bezier curve.<br />Based on : <a href='https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c'>https://stackoverflow.com/questions/785097/how-do-i-implement-a-bezier-curve-in-c</a></p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>cpX </span><span class="dox_type">number</span><span>- Control point x</span></div><div class="dox_tag_detail"><span>cpY </span><span class="dox_type">number</span><span>- Control point y</span></div><div class="dox_tag_detail"><span>toX </span><span class="dox_type">number</span><span>- Destination point x</span></div><div class="dox_tag_detail"><span>toY </span><span class="dox_type">number</span><span>- Destination point y</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">PIXI.Graphics</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">quadraticCurveTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cpX</span><span class="p">,</span> <span class="nx">cpY</span><span class="p">,</span> <span class="nx">toX</span><span class="p">,</span> <span class="nx">toY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">xa</span><span class="p">,</span>
    <span class="nx">ya</span><span class="p">,</span>
    <span class="nx">n</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>


    <span class="kd">var</span> <span class="nx">fromX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">fromY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>

    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>

        <span class="nx">xa</span> <span class="o">=</span> <span class="nx">fromX</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cpX</span> <span class="o">-</span> <span class="nx">fromX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">);</span>
        <span class="nx">ya</span> <span class="o">=</span> <span class="nx">fromY</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cpY</span> <span class="o">-</span> <span class="nx">fromY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">);</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">xa</span> <span class="o">+</span> <span class="p">(</span> <span class="p">((</span><span class="nx">cpX</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="nx">toX</span> <span class="o">-</span> <span class="nx">cpX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">))</span> <span class="o">-</span> <span class="nx">xa</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">),</span>
                     <span class="nx">ya</span> <span class="o">+</span> <span class="p">(</span> <span class="p">((</span><span class="nx">cpY</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="nx">toY</span> <span class="o">-</span> <span class="nx">cpY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">))</span> <span class="o">-</span> <span class="nx">ya</span><span class="p">)</span> <span class="o">*</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-848"><td class="docs"><div class="pilwrap"><a href="#section-848" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Calculate the points for a bezier curve.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>cpX </span><span class="dox_type">number</span><span>- Control point x</span></div><div class="dox_tag_detail"><span>cpY </span><span class="dox_type">number</span><span>- Control point y</span></div><div class="dox_tag_detail"><span>cpX2 </span><span class="dox_type">number</span><span>- Second Control point x</span></div><div class="dox_tag_detail"><span>cpY2 </span><span class="dox_type">number</span><span>- Second Control point y</span></div><div class="dox_tag_detail"><span>toX </span><span class="dox_type">number</span><span>- Destination point x</span></div><div class="dox_tag_detail"><span>toY </span><span class="dox_type">number</span><span>- Destination point y</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">PIXI.Graphics</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bezierCurveTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cpX</span><span class="p">,</span> <span class="nx">cpY</span><span class="p">,</span> <span class="nx">cpX2</span><span class="p">,</span> <span class="nx">cpY2</span><span class="p">,</span> <span class="nx">toX</span><span class="p">,</span> <span class="nx">toY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="nx">dt</span><span class="p">,</span>
    <span class="nx">dt2</span><span class="p">,</span>
    <span class="nx">dt3</span><span class="p">,</span>
    <span class="nx">t2</span><span class="p">,</span>
    <span class="nx">t3</span><span class="p">,</span>
    <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">fromX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">fromY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>

    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>

        <span class="nx">dt</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">j</span><span class="p">);</span>
        <span class="nx">dt2</span> <span class="o">=</span> <span class="nx">dt</span> <span class="o">*</span> <span class="nx">dt</span><span class="p">;</span>
        <span class="nx">dt3</span> <span class="o">=</span> <span class="nx">dt2</span> <span class="o">*</span> <span class="nx">dt</span><span class="p">;</span>

        <span class="nx">t2</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">*</span> <span class="nx">j</span><span class="p">;</span>
        <span class="nx">t3</span> <span class="o">=</span> <span class="nx">t2</span> <span class="o">*</span> <span class="nx">j</span><span class="p">;</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">dt3</span> <span class="o">*</span> <span class="nx">fromX</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">dt2</span> <span class="o">*</span> <span class="nx">j</span> <span class="o">*</span> <span class="nx">cpX</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">dt</span> <span class="o">*</span> <span class="nx">t2</span> <span class="o">*</span> <span class="nx">cpX2</span> <span class="o">+</span> <span class="nx">t3</span> <span class="o">*</span> <span class="nx">toX</span><span class="p">,</span>
                     <span class="nx">dt3</span> <span class="o">*</span> <span class="nx">fromY</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">dt2</span> <span class="o">*</span> <span class="nx">j</span> <span class="o">*</span> <span class="nx">cpY</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">dt</span> <span class="o">*</span> <span class="nx">t2</span> <span class="o">*</span> <span class="nx">cpY2</span> <span class="o">+</span> <span class="nx">t3</span> <span class="o">*</span> <span class="nx">toY</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-849"><td class="docs"><div class="pilwrap"><a href="#section-849" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>the arcTo() method creates an arc/curve between two tangents on the canvas.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>x1 </span><span class="dox_type">number</span><span>- The x-coordinate of the beginning of the arc</span></div><div class="dox_tag_detail"><span>y1 </span><span class="dox_type">number</span><span>- The y-coordinate of the beginning of the arc</span></div><div class="dox_tag_detail"><span>x2 </span><span class="dox_type">number</span><span>- The x-coordinate of the end of the arc</span></div><div class="dox_tag_detail"><span>y2 </span><span class="dox_type">number</span><span>- The y-coordinate of the end of the arc</span></div><div class="dox_tag_detail"><span>radius </span><span class="dox_type">number</span><span>- The radius of the arc</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">PIXI.Graphics</span></div></div><div class="body"><p>"borrowed" from <a href='https://code.google.com/p/fxcanvas/'>https://code.google.com/p/fxcanvas/</a> - thanks google!</p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">arcTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="nx">radius</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-850"><td class="docs"><div class="pilwrap"><a href="#section-850" class="pilcrow">&#182;</a></div><p>check that path contains subpaths</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">fromX</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">fromY</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span></pre></div></td></tr><tr id="section-851"><td class="docs"><div class="pilwrap"><a href="#section-851" class="pilcrow">&#182;</a></div><p>points.push( x1,  y1);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="nx">fromY</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b1</span> <span class="o">=</span> <span class="nx">fromX</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">y2</span>   <span class="o">-</span> <span class="nx">y1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b2</span> <span class="o">=</span> <span class="nx">x2</span>   <span class="o">-</span> <span class="nx">x1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">mm</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a1</span> <span class="o">*</span> <span class="nx">b2</span> <span class="o">-</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">a2</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">mm</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="nx">e</span><span class="o">-</span><span class="mi">8</span> <span class="o">||</span> <span class="nx">radius</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dd</span> <span class="o">=</span> <span class="nx">a1</span> <span class="o">*</span> <span class="nx">a1</span> <span class="o">+</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">b1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cc</span> <span class="o">=</span> <span class="nx">a2</span> <span class="o">*</span> <span class="nx">a2</span> <span class="o">+</span> <span class="nx">b2</span> <span class="o">*</span> <span class="nx">b2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">tt</span> <span class="o">=</span> <span class="nx">a1</span> <span class="o">*</span> <span class="nx">a2</span> <span class="o">+</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">b2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">k1</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">dd</span><span class="p">)</span> <span class="o">/</span> <span class="nx">mm</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">k2</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">cc</span><span class="p">)</span> <span class="o">/</span> <span class="nx">mm</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">j1</span> <span class="o">=</span> <span class="nx">k1</span> <span class="o">*</span> <span class="nx">tt</span> <span class="o">/</span> <span class="nx">dd</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">j2</span> <span class="o">=</span> <span class="nx">k2</span> <span class="o">*</span> <span class="nx">tt</span> <span class="o">/</span> <span class="nx">cc</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">k1</span> <span class="o">*</span> <span class="nx">b2</span> <span class="o">+</span> <span class="nx">k2</span> <span class="o">*</span> <span class="nx">b1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">k1</span> <span class="o">*</span> <span class="nx">a2</span> <span class="o">+</span> <span class="nx">k2</span> <span class="o">*</span> <span class="nx">a1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">px</span> <span class="o">=</span> <span class="nx">b1</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k2</span> <span class="o">+</span> <span class="nx">j1</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">py</span> <span class="o">=</span> <span class="nx">a1</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k2</span> <span class="o">+</span> <span class="nx">j1</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">qx</span> <span class="o">=</span> <span class="nx">b2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k1</span> <span class="o">+</span> <span class="nx">j2</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">qy</span> <span class="o">=</span> <span class="nx">a2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k1</span> <span class="o">+</span> <span class="nx">j2</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">startAngle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">py</span> <span class="o">-</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">px</span> <span class="o">-</span> <span class="nx">cx</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">endAngle</span>   <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">qy</span> <span class="o">-</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">qx</span> <span class="o">-</span> <span class="nx">cx</span><span class="p">);</span></pre></div></td></tr><tr id="section-852"><td class="docs"><div class="pilwrap"><a href="#section-852" class="pilcrow">&#182;</a></div><p>not required?
  points.push(px + x1 , py + y1);</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">cx</span> <span class="o">+</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">+</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">startAngle</span><span class="p">,</span> <span class="nx">endAngle</span><span class="p">,</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">a2</span> <span class="o">&gt;</span> <span class="nx">b2</span> <span class="o">*</span> <span class="nx">a1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-853"><td class="docs"><div class="pilwrap"><a href="#section-853" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The arc() method creates an arc/curve (used to create circles, or parts of circles).</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>cx </span><span class="dox_type">number</span><span>- The x-coordinate of the center of the circle</span></div><div class="dox_tag_detail"><span>cy </span><span class="dox_type">number</span><span>- The y-coordinate of the center of the circle</span></div><div class="dox_tag_detail"><span>radius </span><span class="dox_type">number</span><span>- The radius of the circle</span></div><div class="dox_tag_detail"><span>startAngle </span><span class="dox_type">number</span><span>- The starting angle, in radians (0 is at the 3 o'clock position of the arc's circle)</span></div><div class="dox_tag_detail"><span>endAngle </span><span class="dox_type">number</span><span>- The ending angle, in radians</span></div><div class="dox_tag_detail"><span>anticlockwise </span><span class="dox_type">number</span><span>- Optional. Specifies whether the drawing should be counterclockwise or clockwise. False is default, and indicates clockwise, while true indicates counter-clockwise.</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">PIXI.Graphics</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">arc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">startAngle</span><span class="p">,</span> <span class="nx">endAngle</span><span class="p">,</span> <span class="nx">anticlockwise</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">startX</span> <span class="o">=</span> <span class="nx">cx</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">startAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">radius</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">startY</span> <span class="o">=</span> <span class="nx">cy</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">startAngle</span><span class="p">)</span> <span class="o">*</span> <span class="nx">radius</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">startX</span> <span class="o">||</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">startY</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">startX</span><span class="p">,</span> <span class="nx">startY</span><span class="p">);</span>
        <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">startAngle</span> <span class="o">===</span> <span class="nx">endAngle</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">anticlockwise</span> <span class="o">&amp;&amp;</span> <span class="nx">endAngle</span> <span class="o">&lt;=</span> <span class="nx">startAngle</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">endAngle</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">anticlockwise</span> <span class="o">&amp;&amp;</span> <span class="nx">startAngle</span> <span class="o">&lt;=</span> <span class="nx">endAngle</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">startAngle</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">sweep</span> <span class="o">=</span> <span class="nx">anticlockwise</span> <span class="o">?</span> <span class="p">(</span><span class="nx">startAngle</span> <span class="o">-</span> <span class="nx">endAngle</span><span class="p">)</span> <span class="o">*-</span><span class="mi">1</span> <span class="o">:</span> <span class="p">(</span><span class="nx">endAngle</span> <span class="o">-</span> <span class="nx">startAngle</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">segs</span> <span class="o">=</span>  <span class="p">(</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sweep</span><span class="p">)</span><span class="o">/</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">40</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="nx">sweep</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">theta</span> <span class="o">=</span> <span class="nx">sweep</span><span class="o">/</span><span class="p">(</span><span class="nx">segs</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">theta2</span> <span class="o">=</span> <span class="nx">theta</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">cTheta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">sTheta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">segMinus</span> <span class="o">=</span> <span class="nx">segs</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">remainder</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">segMinus</span> <span class="o">%</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">/</span> <span class="nx">segMinus</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="nx">segMinus</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">real</span> <span class="o">=</span>  <span class="nx">i</span> <span class="o">+</span> <span class="nx">remainder</span> <span class="o">*</span> <span class="nx">i</span><span class="p">;</span>


        <span class="kd">var</span> <span class="nx">angle</span> <span class="o">=</span> <span class="p">((</span><span class="nx">theta</span><span class="p">)</span> <span class="o">+</span> <span class="nx">startAngle</span> <span class="o">+</span> <span class="p">(</span><span class="nx">theta2</span> <span class="o">*</span> <span class="nx">real</span><span class="p">));</span>

        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>

        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span> <span class="p">(</span><span class="nx">cTheta</span> <span class="o">*</span>  <span class="nx">c</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">sTheta</span> <span class="o">*</span> <span class="nx">s</span><span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">,</span>
                    <span class="p">(</span> <span class="p">(</span><span class="nx">cTheta</span> <span class="o">*</span> <span class="o">-</span><span class="nx">s</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">sTheta</span> <span class="o">*</span> <span class="nx">c</span><span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-854"><td class="docs"><div class="pilwrap"><a href="#section-854" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Draws a line using the current line style from the current drawing position to (x, y);<br />the current drawing position is then set to (x, y).</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- the X coordinate to draw to</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- the Y coordinate to draw to</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drawPath</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span> <span class="nx">points</span><span class="o">:</span><span class="p">[],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-855"><td class="docs"><div class="pilwrap"><a href="#section-855" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Specifies a simple one-color fill that subsequent calls to other Graphics methods<br />(such as lineTo() or drawCircle()) use when drawing.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">color</span><span>- the color of the fill</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">alpha</span><span>- the alpha of the fill</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginFill</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">filling</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">alpha</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-856"><td class="docs"><div class="pilwrap"><a href="#section-856" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Applies a fill to the lines and shapes that were added since the last call to the beginFill() method.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">endFill</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filling</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-857"><td class="docs"><div class="pilwrap"><a href="#section-857" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method drawRect</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coord of the top-left of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coord of the top-left of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The width of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The height of the rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drawRect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span>
                        <span class="nx">points</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-858"><td class="docs"><div class="pilwrap"><a href="#section-858" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method drawRoundedRect</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coord of the top-left of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coord of the top-left of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The width of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The height of the rectangle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">radius</span><span>- Radius of the rectangle corners</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drawRoundedRect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">radius</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span>
                        <span class="nx">points</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">radius</span><span class="p">],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RREC</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-859"><td class="docs"><div class="pilwrap"><a href="#section-859" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Draws a circle.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the center of the circle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the center of the circle</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">radius</span><span>- The radius of the circle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drawCircle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span>
                        <span class="nx">points</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">radius</span><span class="p">],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-860"><td class="docs"><div class="pilwrap"><a href="#section-860" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Draws an ellipse.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">x</span><span>- The X coordinate of the center of the ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">y</span><span>- The Y coordinate of the center of the ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The half width of the ellipse</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The half height of the ellipse</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drawEllipse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span> <span class="o">=</span> <span class="p">{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span> <span class="nx">lineColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineColor</span><span class="p">,</span> <span class="nx">lineAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">lineAlpha</span><span class="p">,</span>
                        <span class="nx">fillColor</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillColor</span><span class="p">,</span> <span class="nx">fillAlpha</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fillAlpha</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filling</span><span class="p">,</span>
                        <span class="nx">points</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">],</span> <span class="nx">type</span><span class="o">:</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPath</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-861"><td class="docs"><div class="pilwrap"><a href="#section-861" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filling</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clearDirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//new PIXI.Rectangle();</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-862"><td class="docs"><div class="pilwrap"><a href="#section-862" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Useful function that returns a texture of the graphics object that can then be used to create sprites<br />This can be quite useful if your geometry is complicated and needs to be reused multiple times.</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Texture</span><span>a texture of the graphics object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">generateTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBounds</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromCanvas</span><span class="p">(</span><span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">canvas</span><span class="p">);</span>

    <span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">texture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-863"><td class="docs"><div class="pilwrap"><a href="#section-863" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-864"><td class="docs"><div class="pilwrap"><a href="#section-864" class="pilcrow">&#182;</a></div><p>if the sprite is not visible or the alpha is 0 then no need to render this element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">isMask</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>


    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cacheAsBitmap</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_generateCachedSprite</span><span class="p">();</span></pre></div></td></tr><tr id="section-865"><td class="docs"><div class="pilwrap"><a href="#section-865" class="pilcrow">&#182;</a></div><p>we will also need to update the texture on the gpu too!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">updateWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span>  <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>

        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">blendModeManager</span><span class="p">.</span><span class="nx">setBlendMode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">pushFilter</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filterBlock</span><span class="p">);</span></pre></div></td></tr><tr id="section-866"><td class="docs"><div class="pilwrap"><a href="#section-866" class="pilcrow">&#182;</a></div><p>check blend mode</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">!==</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">blendModeWebGL</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesWebGL</span><span class="p">[</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">];</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">blendFunc</span><span class="p">(</span><span class="nx">blendModeWebGL</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">blendModeWebGL</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-867"><td class="docs"><div class="pilwrap"><a href="#section-867" class="pilcrow">&#182;</a></div><p>for (var i = this.graphicsData.length - 1; i >= 0; i--) {
   this.graphicsData[i]</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-868"><td class="docs"><div class="pilwrap"><a href="#section-868" class="pilcrow">&#182;</a></div><pre><code>   };
</code></pre>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span></pre></div></td></tr><tr id="section-869"><td class="docs"><div class="pilwrap"><a href="#section-869" class="pilcrow">&#182;</a></div><p>only render if it has children!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span></pre></div></td></tr><tr id="section-870"><td class="docs"><div class="pilwrap"><a href="#section-870" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">popFilter</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>

        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">drawCount</span><span class="o">++</span><span class="p">;</span>

        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-871"><td class="docs"><div class="pilwrap"><a href="#section-871" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-872"><td class="docs"><div class="pilwrap"><a href="#section-872" class="pilcrow">&#182;</a></div><p>if the sprite is not visible or the alpha is 0 then no need to render this element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">isMask</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">!==</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span></pre></div></td></tr><tr id="section-873"><td class="docs"><div class="pilwrap"><a href="#section-873" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderCanvas</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-874"><td class="docs"><div class="pilwrap"><a href="#section-874" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Retrieves the bounds of the graphic shape as a rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the rectangular bounding area</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">matrix</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">updateBounds</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">w0</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">h0</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">h1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">matrix</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x4</span> <span class="o">=</span>  <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y4</span> <span class="o">=</span>  <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">;</span>

    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>

    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bounds</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">maxX</span> <span class="o">-</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">maxY</span> <span class="o">-</span> <span class="nx">minY</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">bounds</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-875"><td class="docs"><div class="pilwrap"><a href="#section-875" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Update the bounds of the object</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">graphicsData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">;</span>

        <span class="nx">points</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lineWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="nx">y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lineWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="nx">w</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lineWidth</span><span class="p">;</span>
            <span class="nx">h</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lineWidth</span><span class="p">;</span>

            <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
            <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

            <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
            <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">w</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lineWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="nx">h</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lineWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

            <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">w</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">w</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
            <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

            <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">h</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">h</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
            <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-876"><td class="docs"><div class="pilwrap"><a href="#section-876" class="pilcrow">&#182;</a></div><p>POLY</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
            <span class="p">{</span>

                <span class="nx">x</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                <span class="nx">y</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">j</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
                <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x</span><span class="o">-</span><span class="nx">lineWidth</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x</span><span class="o">-</span><span class="nx">lineWidth</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
                <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x</span><span class="o">+</span><span class="nx">lineWidth</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x</span><span class="o">+</span><span class="nx">lineWidth</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

                <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y</span><span class="o">-</span><span class="nx">lineWidth</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y</span><span class="o">-</span><span class="nx">lineWidth</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
                <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y</span><span class="o">+</span><span class="nx">lineWidth</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y</span><span class="o">+</span><span class="nx">lineWidth</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">padding</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">boundsPadding</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="nx">minX</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">,</span> <span class="nx">minY</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">,</span> <span class="p">(</span><span class="nx">maxX</span> <span class="o">-</span> <span class="nx">minX</span><span class="p">)</span> <span class="o">+</span> <span class="nx">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">maxY</span> <span class="o">-</span> <span class="nx">minY</span><span class="p">)</span> <span class="o">+</span> <span class="nx">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-877"><td class="docs"><div class="pilwrap"><a href="#section-877" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Generates the cached sprite when the sprite has cacheAsBitmap = true</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_generateCachedSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getLocalBounds</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromCanvas</span><span class="p">(</span><span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">canvas</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">buffer</span> <span class="o">=</span> <span class="nx">canvasBuffer</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-878"><td class="docs"><div class="pilwrap"><a href="#section-878" class="pilcrow">&#182;</a></div><p>leverage the anchor to account for the offset of the element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="p">);</span></pre></div></td></tr><tr id="section-879"><td class="docs"><div class="pilwrap"><a href="#section-879" class="pilcrow">&#182;</a></div><p>this._cachedSprite.buffer.context.save();</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="o">-</span><span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasGraphics</span><span class="p">.</span><span class="nx">renderGraphics</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span><span class="p">;</span></pre></div></td></tr><tr id="section-880"><td class="docs"><div class="pilwrap"><a href="#section-880" class="pilcrow">&#182;</a></div><p>this._cachedSprite.buffer.context.restore();</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroyCachedSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span></pre></div></td></tr><tr id="section-881"><td class="docs"><div class="pilwrap"><a href="#section-881" class="pilcrow">&#182;</a></div><p>let the gc collect the unused sprite
TODO could be object pooled!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_cachedSprite</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-882"><td class="docs"><div class="pilwrap"><a href="#section-882" class="pilcrow">&#182;</a></div><p>SOME TYPES:</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">POLY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RECT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">CIRC</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">ELIP</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">RREC</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span></pre></div></td></tr><tr id="section-883"><td class="docs"><div class="pilwrap"><a href="#section-883" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-884"><td class="docs"><div class="pilwrap"><a href="#section-884" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class Strip</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture to use</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the width</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the height</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span></pre></div></td></tr><tr id="section-885"><td class="docs"><div class="pilwrap"><a href="#section-885" class="pilcrow">&#182;</a></div><p>set up the main bits..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                    <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                    <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                    <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                      <span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>
                      <span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span>
                      <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Uint16Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-886"><td class="docs"><div class="pilwrap"><a href="#section-886" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-887"><td class="docs"><div class="pilwrap"><a href="#section-887" class="pilcrow">&#182;</a></div><p>if the sprite is not visible or the alpha is 0 then no need to render this element</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span></pre></div></td></tr><tr id="section-888"><td class="docs"><div class="pilwrap"><a href="#section-888" class="pilcrow">&#182;</a></div><p>render triangle strip..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></pre></div></td></tr><tr id="section-889"><td class="docs"><div class="pilwrap"><a href="#section-889" class="pilcrow">&#182;</a></div><p>init! init!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_vertexBuffer</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_initWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">setShader</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">stripShader</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_renderStrip</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span></pre></div></td></tr><tr id="section-890"><td class="docs"><div class="pilwrap"><a href="#section-890" class="pilcrow">&#182;</a></div><p>/renderSession.shaderManager.activateDefaultShader();</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span></pre></div></td></tr><tr id="section-891"><td class="docs"><div class="pilwrap"><a href="#section-891" class="pilcrow">&#182;</a></div><p>TODO check culling</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-892"><td class="docs"><div class="pilwrap"><a href="#section-892" class="pilcrow">&#182;</a></div><p>build the strip!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_vertexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_indexBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_uvBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_colorBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">();</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vertexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DYNAMIC_DRAW</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uvBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span>  <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_colorBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">colors</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_indexBuffer</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderStrip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">projection</span><span class="p">,</span>
        <span class="nx">offset</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span>
        <span class="nx">shader</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">shaderManager</span><span class="p">.</span><span class="nx">stripShader</span><span class="p">;</span></pre></div></td></tr><tr id="section-893"><td class="docs"><div class="pilwrap"><a href="#section-893" class="pilcrow">&#182;</a></div><p>gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mat4Real);</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">blendFunc</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ONE</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">ONE_MINUS_SRC_ALPHA</span><span class="p">);</span></pre></div></td></tr><tr id="section-894"><td class="docs"><div class="pilwrap"><a href="#section-894" class="pilcrow">&#182;</a></div><p>set uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniformMatrix3fv</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">translationMatrix</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">projectionVector</span><span class="p">,</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">offsetVector</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">gl</span><span class="p">.</span><span class="nx">uniform1f</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">dirty</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vertexBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferSubData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-895"><td class="docs"><div class="pilwrap"><a href="#section-895" class="pilcrow">&#182;</a></div><p>update the uvs</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uvBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span></pre></div></td></tr><tr id="section-896"><td class="docs"><div class="pilwrap"><a href="#section-896" class="pilcrow">&#182;</a></div><p>bind the current texture</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">));</span></pre></div></td></tr><tr id="section-897"><td class="docs"><div class="pilwrap"><a href="#section-897" class="pilcrow">&#182;</a></div><p>dont need to upload!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_indexBuffer</span><span class="p">);</span>


    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vertexBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aVertexPosition</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-898"><td class="docs"><div class="pilwrap"><a href="#section-898" class="pilcrow">&#182;</a></div><p>update the uvs</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uvBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">shader</span><span class="p">.</span><span class="nx">aTextureCoord</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

        <span class="nx">gl</span><span class="p">.</span><span class="nx">activeTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE0</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TEXTURE_2D</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">createWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">gl</span><span class="p">));</span></pre></div></td></tr><tr id="section-899"><td class="docs"><div class="pilwrap"><a href="#section-899" class="pilcrow">&#182;</a></div><p>dont need to upload!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_indexBuffer</span><span class="p">);</span>
        <span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">);</span>

    <span class="p">}</span></pre></div></td></tr><tr id="section-900"><td class="docs"><div class="pilwrap"><a href="#section-900" class="pilcrow">&#182;</a></div><p>console.log(gl.TRIANGLE_STRIP)</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">gl</span><span class="p">.</span><span class="nx">drawElements</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_STRIP</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">UNSIGNED_SHORT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>


<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">roundPixels</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">|</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">strip</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div></td></tr><tr id="section-901"><td class="docs"><div class="pilwrap"><a href="#section-901" class="pilcrow">&#182;</a></div><p>draw triangles!!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">verticies</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">uvs</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-902"><td class="docs"><div class="pilwrap"><a href="#section-902" class="pilcrow">&#182;</a></div><p>draw some triangles!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="p">],</span>   <span class="nx">x1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">4</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">5</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-903"><td class="docs"><div class="pilwrap"><a href="#section-903" class="pilcrow">&#182;</a></div><p>expand();</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">centerX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">x1</span> <span class="o">+</span> <span class="nx">x2</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">centerY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">y1</span> <span class="o">+</span> <span class="nx">y2</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">normX</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">-</span> <span class="nx">centerX</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">normY</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">-</span> <span class="nx">centerY</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span> <span class="nx">normX</span> <span class="o">*</span> <span class="nx">normX</span> <span class="o">+</span> <span class="nx">normY</span> <span class="o">*</span> <span class="nx">normY</span> <span class="p">);</span>
            <span class="nx">x0</span> <span class="o">=</span> <span class="nx">centerX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normX</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>
            <span class="nx">y0</span> <span class="o">=</span> <span class="nx">centerY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normY</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span></pre></div></td></tr><tr id="section-904"><td class="docs"><div class="pilwrap"><a href="#section-904" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">normX</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">-</span> <span class="nx">centerX</span><span class="p">;</span>
            <span class="nx">normY</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">-</span> <span class="nx">centerY</span><span class="p">;</span>

            <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span> <span class="nx">normX</span> <span class="o">*</span> <span class="nx">normX</span> <span class="o">+</span> <span class="nx">normY</span> <span class="o">*</span> <span class="nx">normY</span> <span class="p">);</span>
            <span class="nx">x1</span> <span class="o">=</span> <span class="nx">centerX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normX</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>
            <span class="nx">y1</span> <span class="o">=</span> <span class="nx">centerY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normY</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>

            <span class="nx">normX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">-</span> <span class="nx">centerX</span><span class="p">;</span>
            <span class="nx">normY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">-</span> <span class="nx">centerY</span><span class="p">;</span>

            <span class="nx">dist</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span> <span class="nx">normX</span> <span class="o">*</span> <span class="nx">normX</span> <span class="o">+</span> <span class="nx">normY</span> <span class="o">*</span> <span class="nx">normY</span> <span class="p">);</span>
            <span class="nx">x2</span> <span class="o">=</span> <span class="nx">centerX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normX</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>
            <span class="nx">y2</span> <span class="o">=</span> <span class="nx">centerY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">normY</span> <span class="o">/</span> <span class="nx">dist</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">dist</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">u0</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>   <span class="nx">u1</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">u2</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">v0</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">v1</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">v2</span> <span class="o">=</span> <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span> <span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>


        <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">clip</span><span class="p">();</span></pre></div></td></tr><tr id="section-905"><td class="docs"><div class="pilwrap"><a href="#section-905" class="pilcrow">&#182;</a></div><p>Compute matrix transform</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">delta</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaA</span> <span class="o">=</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x2</span> <span class="o">+</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaB</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x1</span> <span class="o">+</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaC</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">x1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">x0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">x1</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaD</span> <span class="o">=</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v1</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y2</span> <span class="o">+</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">v1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaE</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y1</span> <span class="o">+</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">u1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u1</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">deltaF</span> <span class="o">=</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">+</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">y1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">+</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">v2</span> <span class="o">-</span> <span class="nx">y0</span><span class="o">*</span><span class="nx">v1</span><span class="o">*</span><span class="nx">u2</span> <span class="o">-</span> <span class="nx">v0</span><span class="o">*</span><span class="nx">u1</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">u0</span><span class="o">*</span><span class="nx">y1</span><span class="o">*</span><span class="nx">v2</span><span class="p">;</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">deltaA</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaD</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span>
                            <span class="nx">deltaB</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaE</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span>
                            <span class="nx">deltaC</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">,</span> <span class="nx">deltaF</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">);</span>

        <span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">strip</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-906"><td class="docs"><div class="pilwrap"><a href="#section-906" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the texture that the Strip will use</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- the texture that will be used</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-907"><td class="docs"><div class="pilwrap"><a href="#section-907" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>PIXI.Strip.prototype.setTexture = function(texture)<br />{<br />    //TODO SET THE TEXTURES<br />    //TODO VISIBILITY</p></div><div class="body"><pre><code>// stop current texture
this.texture = texture;
this.width   = texture.frame.width;
this.height  = texture.frame.height;
this.updateFrame = true;
</code></pre>

<p>};</p></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-908"><td class="docs"><div class="pilwrap"><a href="#section-908" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>When the texture is updated, this event will fire to update the scale and frame</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTextureUpdate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateFrame</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-909"><td class="docs"><div class="pilwrap"><a href="#section-909" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-910"><td class="docs"><div class="pilwrap"><a href="#section-910" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@class Rope</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture to use</span></div><div class="dox_tag_detail"><span>{Array} </span><span class="dox_type">points</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">texture</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nx">points</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Float32Array</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Uint16Array</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>


    <span class="k">this</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-911"><td class="docs"><div class="pilwrap"><a href="#section-911" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Strip</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">;</span></pre></div></td></tr><tr id="section-912"><td class="docs"><div class="pilwrap"><a href="#section-912" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Refreshes</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">refresh</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">lastPoint</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">indices</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">indices</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">colors</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">-=</span><span class="mf">0.2</span><span class="p">;</span>

    <span class="nx">uvs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">uvs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">colors</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="nx">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">point</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">amount</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">total</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">point</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span></pre></div></td></tr><tr id="section-913"><td class="docs"><div class="pilwrap"><a href="#section-913" class="pilcrow">&#182;</a></div><p>time to do some smart drawing!</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">amount</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">/</span> <span class="p">(</span><span class="nx">total</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">colors</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">colors</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">indices</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
        <span class="nx">indices</span><span class="p">[</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nx">lastPoint</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-914"><td class="docs"><div class="pilwrap"><a href="#section-914" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">lastPoint</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">nextPoint</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">perp</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">0</span><span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">-=</span><span class="mf">0.2</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">verticies</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">verticies</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">point</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">ratio</span><span class="p">,</span> <span class="nx">perpLength</span><span class="p">,</span> <span class="nx">num</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">total</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">point</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">nextPoint</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">nextPoint</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">nextPoint</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
        <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">lastPoint</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">i</span> <span class="o">/</span> <span class="p">(</span><span class="nx">total</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">ratio</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">ratio</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nx">perpLength</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">perp</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="nx">num</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">//(20 + Math.abs(Math.sin((i + this.count) * 0.3) * 50) )* ratio;</span>
        <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span> <span class="o">/=</span> <span class="nx">perpLength</span><span class="p">;</span>
        <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span> <span class="o">/=</span> <span class="nx">perpLength</span><span class="p">;</span>

        <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span> <span class="o">*=</span> <span class="nx">num</span><span class="p">;</span>
        <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span> <span class="o">*=</span> <span class="nx">num</span><span class="p">;</span>

        <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">verticies</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">perp</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">lastPoint</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-915"><td class="docs"><div class="pilwrap"><a href="#section-915" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the texture that the Rope will use</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- the texture that will be used</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rope</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-916"><td class="docs"><div class="pilwrap"><a href="#section-916" class="pilcrow">&#182;</a></div><p>stop current texture</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span></pre></div></td></tr><tr id="section-917"><td class="docs"><div class="pilwrap"><a href="#section-917" class="pilcrow">&#182;</a></div><p>this.updateFrame = true;</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-918"><td class="docs"><div class="pilwrap"><a href="#section-918" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-919"><td class="docs"><div class="pilwrap"><a href="#section-919" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A tiling sprite is a fast way of rendering a tiling image</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- the texture of the tiling sprite</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- the width of the tiling sprite</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- the height of the tiling sprite</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">texture</span><span class="p">);</span></pre></div></td></tr><tr id="section-920"><td class="docs"><div class="pilwrap"><a href="#section-920" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The with of the tiling sprite</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-921"><td class="docs"><div class="pilwrap"><a href="#section-921" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the tiling sprite</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-922"><td class="docs"><div class="pilwrap"><a href="#section-922" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The scaling of the image that is being tiled</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tileScale</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span></pre></div></td></tr><tr id="section-923"><td class="docs"><div class="pilwrap"><a href="#section-923" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A point that represents the scale of the texture object</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tileScaleOffset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span></pre></div></td></tr><tr id="section-924"><td class="docs"><div class="pilwrap"><a href="#section-924" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The offset position of the image that is being tiled</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tilePosition</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span></pre></div></td></tr><tr id="section-925"><td class="docs"><div class="pilwrap"><a href="#section-925" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether this sprite is renderable or not</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-926"><td class="docs"><div class="pilwrap"><a href="#section-926" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The tint applied to the sprite. This is a hex value</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">;</span></pre></div></td></tr><tr id="section-927"><td class="docs"><div class="pilwrap"><a href="#section-927" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The blend mode to be applied to the sprite</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModes</span><span class="p">.</span><span class="nx">NORMAL</span><span class="p">;</span>



<span class="p">};</span></pre></div></td></tr><tr id="section-928"><td class="docs"><div class="pilwrap"><a href="#section-928" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">;</span></pre></div></td></tr><tr id="section-929"><td class="docs"><div class="pilwrap"><a href="#section-929" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the sprite, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_width</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-930"><td class="docs"><div class="pilwrap"><a href="#section-930" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the TilingSprite, setting this will actually modify the scale to achieve the value set</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span>  <span class="k">this</span><span class="p">.</span><span class="nx">_height</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">===</span> <span class="nx">texture</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">refreshTexture</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cachedTint</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-931"><td class="docs"><div class="pilwrap"><a href="#section-931" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the WebGL renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mask</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">);</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">pushFilter</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filterBlock</span><span class="p">);</span>
    <span class="p">}</span>



    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">refreshTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">generateTilingTexture</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">needsUpdate</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-932"><td class="docs"><div class="pilwrap"><a href="#section-932" class="pilcrow">&#182;</a></div><p>TODO - tweaking</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">updateWebGLTexture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">gl</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">needsUpdate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-933"><td class="docs"><div class="pilwrap"><a href="#section-933" class="pilcrow">&#182;</a></div><p>this.tilingTexture._uvs = null;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">renderTilingSprite</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-934"><td class="docs"><div class="pilwrap"><a href="#section-934" class="pilcrow">&#182;</a></div><p>simple render children!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderWebGL</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_filters</span><span class="p">)</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">filterManager</span><span class="p">.</span><span class="nx">popFilter</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>

    <span class="nx">renderSession</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-935"><td class="docs"><div class="pilwrap"><a href="#section-935" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Renders the object using the Canvas renderer</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{RenderSession} </span><span class="dox_type">renderSession</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">pushMask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldAlpha</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">;</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">tx</span> <span class="p">,</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">ty</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">__tilePattern</span> <span class="o">||</span>  <span class="k">this</span><span class="p">.</span><span class="nx">refreshTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">generateTilingTexture</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">__tilePattern</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createPattern</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="s1">&#39;repeat&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-936"><td class="docs"><div class="pilwrap"><a href="#section-936" class="pilcrow">&#182;</a></div><p>check blend mode</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span> <span class="o">!==</span> <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blendMode</span><span class="p">;</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">globalCompositeOperation</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">blendModesCanvas</span><span class="p">[</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">currentBlendMode</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">tilePosition</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilePosition</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tileScale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tileScale</span><span class="p">;</span>

    <span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">%=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">%=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span></pre></div></td></tr><tr id="section-937"><td class="docs"><div class="pilwrap"><a href="#section-937" class="pilcrow">&#182;</a></div><p>offset</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">context</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">tileScale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="nx">tileScale</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__tilePattern</span><span class="p">;</span></pre></div></td></tr><tr id="section-938"><td class="docs"><div class="pilwrap"><a href="#section-938" class="pilcrow">&#182;</a></div><p>make sure to account for the anchor point..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">context</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="o">-</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_width</span><span class="p">),</span>
                    <span class="o">-</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_height</span><span class="p">),</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_width</span> <span class="o">/</span> <span class="nx">tileScale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_height</span> <span class="o">/</span> <span class="nx">tileScale</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">tileScale</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">tileScale</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="o">-</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="nx">tilePosition</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mask</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">renderSession</span><span class="p">.</span><span class="nx">maskManager</span><span class="p">.</span><span class="nx">popMask</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_renderCanvas</span><span class="p">(</span><span class="nx">renderSession</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-939"><td class="docs"><div class="pilwrap"><a href="#section-939" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the framing rectangle of the sprite as a PIXI.Rectangle object</p></div><div class="details"><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span><span>the framing rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">w0</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">h0</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">worldTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h1</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x4</span> <span class="o">=</span>  <span class="nx">a</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y4</span> <span class="o">=</span>  <span class="nx">d</span> <span class="o">*</span> <span class="nx">h0</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">+</span> <span class="nx">ty</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">maxX</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">maxY</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">minX</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">minY</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>

    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x1</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">minX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&lt;</span> <span class="nx">minX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y1</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">minY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&lt;</span> <span class="nx">minY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">minY</span><span class="p">;</span>

    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x1</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x3</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x3</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>
    <span class="nx">maxX</span> <span class="o">=</span> <span class="nx">x4</span> <span class="o">&gt;</span> <span class="nx">maxX</span> <span class="o">?</span> <span class="nx">x4</span> <span class="o">:</span> <span class="nx">maxX</span><span class="p">;</span>

    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y1</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y3</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y3</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>
    <span class="nx">maxY</span> <span class="o">=</span> <span class="nx">y4</span> <span class="o">&gt;</span> <span class="nx">maxY</span> <span class="o">?</span> <span class="nx">y4</span> <span class="o">:</span> <span class="nx">maxY</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">bounds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bounds</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">minX</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">maxX</span> <span class="o">-</span> <span class="nx">minX</span><span class="p">;</span>

    <span class="nx">bounds</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">minY</span><span class="p">;</span>
    <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">maxY</span> <span class="o">-</span> <span class="nx">minY</span><span class="p">;</span></pre></div></td></tr><tr id="section-940"><td class="docs"><div class="pilwrap"><a href="#section-940" class="pilcrow">&#182;</a></div><p>store a reference so that if this function gets called again in the render cycle we do not have to recalculate</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_currentBounds</span> <span class="o">=</span> <span class="nx">bounds</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">bounds</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-941"><td class="docs"><div class="pilwrap"><a href="#section-941" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>When the texture is updated, this event will fire to update the scale and frame</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTextureUpdate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-942"><td class="docs"><div class="pilwrap"><a href="#section-942" class="pilcrow">&#182;</a></div><p>overriding the sprite version of this!</p>
</td><td class="code"><div class="highlight"><pre><span class="p">};</span></pre></div></td></tr><tr id="section-943"><td class="docs"><div class="pilwrap"><a href="#section-943" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@method generateTilingTexture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">forcePowerOfTwo</span><span>- Whether we want to force the texture to be a power of two</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TilingSprite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">generateTilingTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">forcePowerOfTwo</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">targetWidth</span><span class="p">,</span> <span class="nx">targetHeight</span><span class="p">;</span></pre></div></td></tr><tr id="section-944"><td class="docs"><div class="pilwrap"><a href="#section-944" class="pilcrow">&#182;</a></div><p>Check that the frame is the same size as the base texture.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">isFrame</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">!==</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">||</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">!==</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">newTextureRequired</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">forcePowerOfTwo</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isFrame</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">targetWidth</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
            <span class="nx">targetHeight</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

            <span class="nx">newTextureRequired</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">targetWidth</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">getNextPowerOfTwo</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
        <span class="nx">targetHeight</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">getNextPowerOfTwo</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">!==</span> <span class="nx">targetWidth</span> <span class="o">||</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">!==</span> <span class="nx">targetHeight</span><span class="p">)</span> <span class="nx">newTextureRequired</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">newTextureRequired</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">canvasBuffer</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">isTiling</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">canvasBuffer</span><span class="p">;</span>
            <span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">targetWidth</span><span class="p">,</span> <span class="nx">targetHeight</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">targetWidth</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">targetHeight</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">needsUpdate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">(</span><span class="nx">targetWidth</span><span class="p">,</span> <span class="nx">targetHeight</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromCanvas</span><span class="p">(</span><span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">canvas</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="nx">canvasBuffer</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">isTiling</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span>
                               <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                               <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                               <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                               <span class="nx">texture</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                               <span class="mi">0</span><span class="p">,</span>
                               <span class="mi">0</span><span class="p">,</span>
                               <span class="nx">targetWidth</span><span class="p">,</span>
                               <span class="nx">targetHeight</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">targetWidth</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">targetHeight</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-945"><td class="docs"><div class="pilwrap"><a href="#section-945" class="pilcrow">&#182;</a></div><p>TODO - switching?</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">isTiling</span><span class="p">)</span>
        <span class="p">{</span></pre></div></td></tr><tr id="section-946"><td class="docs"><div class="pilwrap"><a href="#section-946" class="pilcrow">&#182;</a></div><p>destroy the tiling texture!
TODO could store this somewhere?</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tileScaleOffset</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">refreshTexture</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tilingTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_powerOf2</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-947"><td class="docs"><div class="pilwrap"><a href="#section-947" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23<br />based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) <a href='https://github.com/ekelokorpi'>https://github.com/ekelokorpi</a></p></div><div class="body"><p>Awesome JS run time provided by EsotericSoftware<br /><a href='https://github.com/EsotericSoftware/spine-runtimes'>https://github.com/EsotericSoftware/spine-runtimes</a></p></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-948"><td class="docs"><div class="pilwrap"><a href="#section-948" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Awesome JS run time provided by EsotericSoftware</p></div><div class="body"><p><a href='https://github.com/EsotericSoftware/spine-runtimes'>https://github.com/EsotericSoftware/spine-runtimes</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">spine</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">BoneData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">BoneData</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">length</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">rotation</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">scaleX</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">scaleY</span><span class="o">:</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">SlotData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">boneData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">boneData</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">SlotData</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">r</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">g</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">attachmentName</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneData</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setToSetupPose</span><span class="p">();</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span><span class="p">.</span><span class="nx">yDown</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">rotation</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">scaleX</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">scaleY</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">m00</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m01</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">worldX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// a b x</span>
    <span class="nx">m10</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m11</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">worldY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// c d y</span>
    <span class="nx">worldRotation</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">worldScaleX</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">worldScaleY</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">updateWorldTransform</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">flipX</span><span class="p">,</span> <span class="nx">flipY</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">m00</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">m01</span> <span class="o">+</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">worldX</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">m10</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">m11</span> <span class="o">+</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">worldY</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleX</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">worldScaleX</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleY</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">worldScaleY</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldRotation</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">worldRotation</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">worldRotation</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">radians</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldRotation</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cos</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">sin</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">m00</span> <span class="o">=</span> <span class="nx">cos</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleX</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">m10</span> <span class="o">=</span> <span class="nx">sin</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleX</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">m01</span> <span class="o">=</span> <span class="o">-</span><span class="nx">sin</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleY</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">m11</span> <span class="o">=</span> <span class="nx">cos</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">worldScaleY</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">flipX</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m00</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m00</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m01</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m01</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">flipY</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m10</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m10</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m11</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m11</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span><span class="p">.</span><span class="nx">yDown</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m10</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m10</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">m11</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">m11</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">setToSetupPose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Slot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotData</span><span class="p">,</span> <span class="nx">skeleton</span><span class="p">,</span> <span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">slotData</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bone</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setToSetupPose</span><span class="p">();</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">r</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">g</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">_attachmentTime</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">attachment</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">setAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">attachment</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attachment</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_attachmentTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setAttachmentTime</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">time</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_attachmentTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">time</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getAttachmentTime</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">time</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_attachmentTime</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setToSetupPose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">g</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">slotDatas</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slotDatas</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slotDatas</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">setAttachment</span><span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">attachmentName</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">getAttachmentBySlotIndex</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">attachmentName</span><span class="p">));</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Skin</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attachments</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Skin</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">addAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">attachment</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attachments</span><span class="p">[</span><span class="nx">slotIndex</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">attachments</span><span class="p">[</span><span class="nx">slotIndex</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">];</span>
    <span class="p">},</span>
    <span class="nx">_attachAll</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">oldSkin</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">oldSkin</span><span class="p">.</span><span class="nx">attachments</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">colon</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">slotIndex</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">colon</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">colon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">slots</span><span class="p">[</span><span class="nx">slotIndex</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">attachment</span> <span class="o">&amp;&amp;</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">attachment</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttachment</span><span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">attachment</span><span class="p">)</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">setAttachment</span><span class="p">(</span><span class="nx">attachment</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Animation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">timelines</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">timelines</span> <span class="o">=</span> <span class="nx">timelines</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">loop</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">duration</span><span class="p">)</span> <span class="nx">time</span> <span class="o">%=</span> <span class="k">this</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">timelines</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timelines</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">timelines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">timelines</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">mix</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">duration</span><span class="p">)</span> <span class="nx">time</span> <span class="o">%=</span> <span class="k">this</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">timelines</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timelines</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">timelines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">timelines</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">high</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">high</span><span class="p">)</span> <span class="k">return</span> <span class="nx">step</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">high</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">values</span><span class="p">[(</span><span class="nx">current</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">target</span><span class="p">)</span>
            <span class="nx">low</span> <span class="o">=</span> <span class="nx">current</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="nx">high</span> <span class="o">=</span> <span class="nx">current</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">low</span> <span class="o">==</span> <span class="nx">high</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="nx">low</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="p">(</span><span class="nx">low</span> <span class="o">+</span> <span class="nx">high</span><span class="p">)</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">linearSearch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">last</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">step</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">last</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">target</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// dfx, dfy, ddfx, ddfy, dddfx, dddfy, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frameCount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setLinear</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">*</span> <span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="cm">/*LINEAR*/</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setStepped</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">*</span> <span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="cm">/*STEPPED*/</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-949"><td class="docs"><div class="pilwrap"><a href="#section-949" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the control handle positions for an interpolation bezier curve used to transition from this keyframe to the next.<br />cx1 and cx2 are from 0 to 1, representing the percent of time between the two keyframes. cy1 and cy2 are the percent of<br />the difference between the keyframe's values.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setCurve</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">cx1</span><span class="p">,</span> <span class="nx">cy1</span><span class="p">,</span> <span class="nx">cx2</span><span class="p">,</span> <span class="nx">cy2</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">subdiv_step</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">10</span><span class="cm">/*BEZIER_SEGMENTS*/</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">subdiv_step2</span> <span class="o">=</span> <span class="nx">subdiv_step</span> <span class="o">*</span> <span class="nx">subdiv_step</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">subdiv_step3</span> <span class="o">=</span> <span class="nx">subdiv_step2</span> <span class="o">*</span> <span class="nx">subdiv_step</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pre1</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">subdiv_step</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pre2</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">subdiv_step2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pre4</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="nx">subdiv_step2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pre5</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="nx">subdiv_step3</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">tmp1x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">cx1</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">cx2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">tmp1y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">cy1</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">cy2</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">tmp2x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cx1</span> <span class="o">-</span> <span class="nx">cx2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">tmp2y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cy1</span> <span class="o">-</span> <span class="nx">cy2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">frameIndex</span> <span class="o">*</span> <span class="mi">6</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">curves</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cx1</span> <span class="o">*</span> <span class="nx">pre1</span> <span class="o">+</span> <span class="nx">tmp1x</span> <span class="o">*</span> <span class="nx">pre2</span> <span class="o">+</span> <span class="nx">tmp2x</span> <span class="o">*</span> <span class="nx">subdiv_step3</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cy1</span> <span class="o">*</span> <span class="nx">pre1</span> <span class="o">+</span> <span class="nx">tmp1y</span> <span class="o">*</span> <span class="nx">pre2</span> <span class="o">+</span> <span class="nx">tmp2y</span> <span class="o">*</span> <span class="nx">subdiv_step3</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp1x</span> <span class="o">*</span> <span class="nx">pre4</span> <span class="o">+</span> <span class="nx">tmp2x</span> <span class="o">*</span> <span class="nx">pre5</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp1y</span> <span class="o">*</span> <span class="nx">pre4</span> <span class="o">+</span> <span class="nx">tmp2y</span> <span class="o">*</span> <span class="nx">pre5</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp2x</span> <span class="o">*</span> <span class="nx">pre5</span><span class="p">;</span>
        <span class="nx">curves</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp2y</span> <span class="o">*</span> <span class="nx">pre5</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getCurvePercent</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="nx">percent</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">percent</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">curveIndex</span> <span class="o">=</span> <span class="nx">frameIndex</span> <span class="o">*</span> <span class="mi">6</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">curves</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">dfx</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dfx</span><span class="cm">/*LINEAR*/</span><span class="p">)</span> <span class="k">return</span> <span class="nx">percent</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dfx</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="cm">/*STEPPED*/</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">dfy</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">ddfx</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">ddfy</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">dddfx</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span> <span class="o">+</span> <span class="mi">4</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">dddfy</span> <span class="o">=</span> <span class="nx">curves</span><span class="p">[</span><span class="nx">curveIndex</span> <span class="o">+</span> <span class="mi">5</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">dfx</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">dfy</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">10</span><span class="cm">/*BEZIER_SEGMENTS*/</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">dfx</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">dfy</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">lastY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">lastY</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">-</span> <span class="nx">lastX</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">lastX</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="nx">i</span><span class="o">--</span><span class="p">;</span>
            <span class="nx">dfx</span> <span class="o">+=</span> <span class="nx">ddfx</span><span class="p">;</span>
            <span class="nx">dfy</span> <span class="o">+=</span> <span class="nx">ddfy</span><span class="p">;</span>
            <span class="nx">ddfx</span> <span class="o">+=</span> <span class="nx">dddfx</span><span class="p">;</span>
            <span class="nx">ddfy</span> <span class="o">+=</span> <span class="nx">dddfy</span><span class="p">;</span>
            <span class="nx">x</span> <span class="o">+=</span> <span class="nx">dfx</span><span class="p">;</span>
            <span class="nx">y</span> <span class="o">+=</span> <span class="nx">dfy</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">-</span> <span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">x</span><span class="p">);</span> <span class="c1">// Last point is 1,1.</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">RotateTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">(</span><span class="nx">frameCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, angle, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">RotateTimeline</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">boneIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">getFrameCount</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setFrame</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">angle</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">frameIndex</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">angle</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">,</span>
            <span class="nx">amount</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Time is before first frame.</span>

        <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">boneIndex</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">])</span> <span class="p">{</span> <span class="c1">// Time is after last frame.</span>
            <span class="nx">amount</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span>
                <span class="nx">amount</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">)</span>
                <span class="nx">amount</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
            <span class="nx">bone</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">+=</span> <span class="nx">amount</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-950"><td class="docs"><div class="pilwrap"><a href="#section-950" class="pilcrow">&#182;</a></div><p>Interpolate between the last frame and the current frame.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span><span class="p">(</span><span class="nx">frames</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">lastFrameValue</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">frameTime</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">2</span><span class="cm">/*LAST_FRAME_TIME*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">);</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">getCurvePercent</span><span class="p">(</span><span class="nx">frameIndex</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">percent</span><span class="p">);</span>

        <span class="nx">amount</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="cm">/*FRAME_VALUE*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameValue</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span>
            <span class="nx">amount</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">)</span>
            <span class="nx">amount</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
        <span class="nx">amount</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">+</span> <span class="p">(</span><span class="nx">lastFrameValue</span> <span class="o">+</span> <span class="nx">amount</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">)</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span>
            <span class="nx">amount</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">)</span>
            <span class="nx">amount</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
        <span class="nx">bone</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">+=</span> <span class="nx">amount</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">TranslateTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">(</span><span class="nx">frameCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, x, y, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">TranslateTimeline</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">boneIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">getFrameCount</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setFrame</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">frameIndex</span> <span class="o">*=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Time is before first frame.</span>

        <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">boneIndex</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">3</span><span class="p">])</span> <span class="p">{</span> <span class="c1">// Time is after last frame.</span>
            <span class="nx">bone</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="nx">bone</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-951"><td class="docs"><div class="pilwrap"><a href="#section-951" class="pilcrow">&#182;</a></div><p>Interpolate between the last frame and the current frame.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span><span class="p">(</span><span class="nx">frames</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">lastFrameX</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">lastFrameY</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">frameTime</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="o">-</span><span class="mi">3</span><span class="cm">/*LAST_FRAME_TIME*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">);</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">getCurvePercent</span><span class="p">(</span><span class="nx">frameIndex</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">percent</span><span class="p">);</span>

        <span class="nx">bone</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">lastFrameX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="cm">/*FRAME_X*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="nx">bone</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">lastFrameY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="cm">/*FRAME_Y*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">ScaleTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">(</span><span class="nx">frameCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, x, y, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">ScaleTimeline</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">boneIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">getFrameCount</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setFrame</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">frameIndex</span> <span class="o">*=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Time is before first frame.</span>

        <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">boneIndex</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">3</span><span class="p">])</span> <span class="p">{</span> <span class="c1">// Time is after last frame.</span>
            <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-952"><td class="docs"><div class="pilwrap"><a href="#section-952" class="pilcrow">&#182;</a></div><p>Interpolate between the last frame and the current frame.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span><span class="p">(</span><span class="nx">frames</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">lastFrameX</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">lastFrameY</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">frameTime</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="o">-</span><span class="mi">3</span><span class="cm">/*LAST_FRAME_TIME*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">);</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">getCurvePercent</span><span class="p">(</span><span class="nx">frameIndex</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">percent</span><span class="p">);</span>

        <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">lastFrameX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="cm">/*FRAME_X*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">lastFrameY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="cm">/*FRAME_Y*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span> <span class="o">-</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">ColorTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">(</span><span class="nx">frameCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, r, g, b, a, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span> <span class="o">*</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">ColorTimeline</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">slotIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">getFrameCount</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setFrame</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">frameIndex</span> <span class="o">*=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">g</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Time is before first frame.</span>

        <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">slots</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">slotIndex</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">5</span><span class="p">])</span> <span class="p">{</span> <span class="c1">// Time is after last frame.</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">3</span><span class="p">];</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-953"><td class="docs"><div class="pilwrap"><a href="#section-953" class="pilcrow">&#182;</a></div><p>Interpolate between the last frame and the current frame.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span><span class="p">(</span><span class="nx">frames</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">lastFrameR</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">4</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">lastFrameG</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">lastFrameB</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">lastFrameA</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">frameTime</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">-</span> <span class="mi">5</span><span class="cm">/*LAST_FRAME_TIME*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">frameTime</span><span class="p">);</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">getCurvePercent</span><span class="p">(</span><span class="nx">frameIndex</span> <span class="o">/</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">percent</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">lastFrameR</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="cm">/*FRAME_R*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameR</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">lastFrameG</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="cm">/*FRAME_G*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameG</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">lastFrameB</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="cm">/*FRAME_B*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameB</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">lastFrameA</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span> <span class="o">+</span> <span class="mi">4</span><span class="cm">/*FRAME_A*/</span><span class="p">]</span> <span class="o">-</span> <span class="nx">lastFrameA</span><span class="p">)</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">alpha</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">r</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">r</span> <span class="o">-</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">r</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">g</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">g</span> <span class="o">-</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">g</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">b</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">a</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">a</span> <span class="o">-</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">alpha</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">g</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
            <span class="nx">slot</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">curves</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Curves</span><span class="p">(</span><span class="nx">frameCount</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attachmentNames</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// time, ...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attachmentNames</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">frameCount</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentTimeline</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">slotIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">getFrameCount</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setFrame</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attachmentNames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">attachmentName</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// Time is before first frame.</span>

        <span class="kd">var</span> <span class="nx">frameIndex</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&gt;=</span> <span class="nx">frames</span><span class="p">[</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="c1">// Time is after last frame.</span>
            <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">binarySearch</span><span class="p">(</span><span class="nx">frames</span><span class="p">,</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">attachmentName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">attachmentNames</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
        <span class="nx">skeleton</span><span class="p">.</span><span class="nx">slots</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">slotIndex</span><span class="p">].</span><span class="nx">setAttachment</span><span class="p">(</span><span class="o">!</span><span class="nx">attachmentName</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">skeleton</span><span class="p">.</span><span class="nx">getAttachmentBySlotIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bones</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">slots</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skins</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">animations</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">defaultSkin</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div></td></tr><tr id="section-954"><td class="docs"><div class="pilwrap"><a href="#section-954" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findBone</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-955"><td class="docs"><div class="pilwrap"><a href="#section-955" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return -1 if the bone was not found.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findBoneIndex</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-956"><td class="docs"><div class="pilwrap"><a href="#section-956" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findSlot</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">slot</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-957"><td class="docs"><div class="pilwrap"><a href="#section-957" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return -1 if the bone was not found.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findSlotIndex</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-958"><td class="docs"><div class="pilwrap"><a href="#section-958" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findSkin</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">skins</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skins</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">skins</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">skins</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">skinName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">skins</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-959"><td class="docs"><div class="pilwrap"><a href="#section-959" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">animations</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">animations</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">animations</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">animations</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">animationName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">animations</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Skeleton</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeletonData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">bones</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="o">!</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">)];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span><span class="p">(</span><span class="nx">boneData</span><span class="p">,</span> <span class="nx">parent</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">slots</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">drawOrder</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slotData</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">slotData</span><span class="p">.</span><span class="nx">boneData</span><span class="p">)];</span>
        <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Slot</span><span class="p">(</span><span class="nx">slotData</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">bone</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">drawOrder</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Skeleton</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">skin</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">r</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">g</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">time</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">flipX</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">flipY</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-960"><td class="docs"><div class="pilwrap"><a href="#section-960" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the world transform for each bone.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">updateWorldTransform</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">flipX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">flipX</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">flipY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">flipY</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateWorldTransform</span><span class="p">(</span><span class="nx">flipX</span><span class="p">,</span> <span class="nx">flipY</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-961"><td class="docs"><div class="pilwrap"><a href="#section-961" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the bones and slots to their setup pose values.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setToSetupPose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setBonesToSetupPose</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setSlotsToSetupPose</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">setBonesToSetupPose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setToSetupPose</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">setSlotsToSetupPose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setToSetupPose</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-962"><td class="docs"><div class="pilwrap"><a href="#section-962" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May return null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">getRootBone</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-963"><td class="docs"><div class="pilwrap"><a href="#section-963" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findBone</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-964"><td class="docs"><div class="pilwrap"><a href="#section-964" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return -1 if the bone was not found.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findBoneIndex</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bones</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-965"><td class="docs"><div class="pilwrap"><a href="#section-965" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findSlot</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-966"><td class="docs"><div class="pilwrap"><a href="#section-966" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return -1 if the bone was not found.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">findSlotIndex</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setSkinByName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">skin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">findSkin</span><span class="p">(</span><span class="nx">skinName</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skin</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Skin not found: &quot;</span> <span class="o">+</span> <span class="nx">skinName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setSkin</span><span class="p">(</span><span class="nx">skin</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-967"><td class="docs"><div class="pilwrap"><a href="#section-967" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the skin used to look up attachments not found in the {@link SkeletonData#getDefaultSkin() default skin}. Attachments<br />from the new skin are attached if the corresponding attachment from the old skin was attached.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>May </span><span class="dox_type">newSkin</span><span>- be null.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setSkin</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newSkin</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">skin</span> <span class="o">&amp;&amp;</span> <span class="nx">newSkin</span><span class="p">)</span> <span class="nx">newSkin</span><span class="p">.</span><span class="nx">_attachAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">skin</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">skin</span> <span class="o">=</span> <span class="nx">newSkin</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-968"><td class="docs"><div class="pilwrap"><a href="#section-968" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">getAttachmentBySlotName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttachmentBySlotIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">findSlotIndex</span><span class="p">(</span><span class="nx">slotName</span><span class="p">),</span> <span class="nx">attachmentName</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-969"><td class="docs"><div class="pilwrap"><a href="#section-969" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@return May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">getAttachmentBySlotIndex</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">skin</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skin</span><span class="p">.</span><span class="nx">getAttachment</span><span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">attachment</span><span class="p">)</span> <span class="k">return</span> <span class="nx">attachment</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">defaultSkin</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">defaultSkin</span><span class="p">.</span><span class="nx">getAttachment</span><span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-970"><td class="docs"><div class="pilwrap"><a href="#section-970" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@param attachmentName May be null.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slots</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">attachmentName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">attachment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttachment</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">attachment</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Attachment not found: &quot;</span> <span class="o">+</span> <span class="nx">attachmentName</span> <span class="o">+</span> <span class="s2">&quot;, for slot: &quot;</span> <span class="o">+</span> <span class="nx">slotName</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">setAttachment</span><span class="p">(</span><span class="nx">attachment</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">throw</span> <span class="s2">&quot;Slot not found: &quot;</span> <span class="o">+</span> <span class="nx">slotName</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">delta</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">time</span> <span class="o">+=</span> <span class="nx">delta</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentType</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">region</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">rotation</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">scaleX</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">scaleY</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">rendererObject</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">regionOffsetX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">regionOffsetY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">regionWidth</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">regionHeight</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">regionOriginalWidth</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">regionOriginalHeight</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">setUVs</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">u</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">u2</span><span class="p">,</span> <span class="nx">v2</span><span class="p">,</span> <span class="nx">rotate</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">uvs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uvs</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">rotate</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*Y3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v2</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*Y3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u2</span><span class="p">;</span>
            <span class="nx">uvs</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v2</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">updateOffset</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">regionScaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionOriginalWidth</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">regionScaleY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionOriginalHeight</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localX</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionOffsetX</span> <span class="o">*</span> <span class="nx">regionScaleX</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localY</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionOffsetY</span> <span class="o">*</span> <span class="nx">regionScaleY</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localX2</span> <span class="o">=</span> <span class="nx">localX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionWidth</span> <span class="o">*</span> <span class="nx">regionScaleX</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localY2</span> <span class="o">=</span> <span class="nx">localY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">regionHeight</span> <span class="o">*</span> <span class="nx">regionScaleY</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">radians</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cos</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">sin</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">localXCos</span> <span class="o">=</span> <span class="nx">localX</span> <span class="o">*</span> <span class="nx">cos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localXSin</span> <span class="o">=</span> <span class="nx">localX</span> <span class="o">*</span> <span class="nx">sin</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localYCos</span> <span class="o">=</span> <span class="nx">localY</span> <span class="o">*</span> <span class="nx">cos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localYSin</span> <span class="o">=</span> <span class="nx">localY</span> <span class="o">*</span> <span class="nx">sin</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localX2Cos</span> <span class="o">=</span> <span class="nx">localX2</span> <span class="o">*</span> <span class="nx">cos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localX2Sin</span> <span class="o">=</span> <span class="nx">localX2</span> <span class="o">*</span> <span class="nx">sin</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localY2Cos</span> <span class="o">=</span> <span class="nx">localY2</span> <span class="o">*</span> <span class="nx">cos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localY2Sin</span> <span class="o">=</span> <span class="nx">localY2</span> <span class="o">*</span> <span class="nx">sin</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localXCos</span> <span class="o">-</span> <span class="nx">localYSin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localYCos</span> <span class="o">+</span> <span class="nx">localXSin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localXCos</span> <span class="o">-</span> <span class="nx">localY2Sin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localY2Cos</span> <span class="o">+</span> <span class="nx">localXSin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localX2Cos</span> <span class="o">-</span> <span class="nx">localY2Sin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*Y3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localY2Cos</span> <span class="o">+</span> <span class="nx">localX2Sin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localX2Cos</span> <span class="o">-</span> <span class="nx">localYSin</span><span class="p">;</span>
        <span class="nx">offset</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">localYCos</span> <span class="o">+</span> <span class="nx">localX2Sin</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">computeVertices</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">bone</span><span class="p">,</span> <span class="nx">vertices</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">+=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldX</span><span class="p">;</span>
        <span class="nx">y</span> <span class="o">+=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldY</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">m00</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m00</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">m01</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m01</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">m10</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m10</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">m11</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m11</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m00</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m01</span> <span class="o">+</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">0</span><span class="cm">/*X1*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m10</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">1</span><span class="cm">/*Y1*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m11</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m00</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m01</span> <span class="o">+</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">2</span><span class="cm">/*X2*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m10</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">3</span><span class="cm">/*Y2*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m11</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m00</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m01</span> <span class="o">+</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">4</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m10</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">5</span><span class="cm">/*X3*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m11</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m00</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m01</span> <span class="o">+</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">vertices</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">6</span><span class="cm">/*X4*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m10</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">7</span><span class="cm">/*Y4*/</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m11</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationStateData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeletonData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skeletonData</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">animationToMixTime</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationStateData</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">defaultMix</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">setMixByName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fromName</span><span class="p">,</span> <span class="nx">toName</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findAnimation</span><span class="p">(</span><span class="nx">fromName</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">from</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Animation not found: &quot;</span> <span class="o">+</span> <span class="nx">fromName</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findAnimation</span><span class="p">(</span><span class="nx">toName</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">to</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Animation not found: &quot;</span> <span class="o">+</span> <span class="nx">toName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setMix</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setMix</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">animationToMixTime</span><span class="p">[</span><span class="nx">from</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">to</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">duration</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getMix</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">animationToMixTime</span><span class="p">[</span><span class="nx">from</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">to</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">time</span> <span class="o">?</span> <span class="nx">time</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultMix</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">stateData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">stateData</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">animationSpeed</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">current</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">previous</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">currentTime</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">previousTime</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">currentLoop</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">previousLoop</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">mixTime</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">mixDuration</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">delta</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">delta</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">animationSpeed</span><span class="p">);</span> <span class="c1">//timeScale: Multiply delta by the speed of animation required.</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">previousTime</span> <span class="o">+=</span> <span class="nx">delta</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mixTime</span> <span class="o">+=</span> <span class="nx">delta</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">entry</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">&gt;=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_setAnimation</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">loop</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skeleton</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">previous</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">previous</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">previousTime</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">previousLoop</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">mixTime</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">mixDuration</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">alpha</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">previous</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">mix</span><span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentLoop</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">skeleton</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentLoop</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">clearAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">previous</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">_setAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">previous</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">animation</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mixDuration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">getMix</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span> <span class="nx">animation</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mixDuration</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">mixTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">previous</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">previousTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">previousLoop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentLoop</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentLoop</span> <span class="o">=</span> <span class="nx">loop</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-971"><td class="docs"><div class="pilwrap"><a href="#section-971" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@see #setAnimation(Animation, Boolean)</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setAnimationByName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">loop</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">animation</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findAnimation</span><span class="p">(</span><span class="nx">animationName</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animation</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Animation not found: &quot;</span> <span class="o">+</span> <span class="nx">animationName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setAnimation</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-972"><td class="docs"><div class="pilwrap"><a href="#section-972" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set the current animation. Any queued animations are cleared and the current animation time is set to 0.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>May </span><span class="dox_type">animation</span><span>- be null.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">setAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_setAnimation</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-973"><td class="docs"><div class="pilwrap"><a href="#section-973" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@see #addAnimation(Animation, Boolean, Number)</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">addAnimationByName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">animation</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findAnimation</span><span class="p">(</span><span class="nx">animationName</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animation</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Animation not found: &quot;</span> <span class="o">+</span> <span class="nx">animationName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">addAnimation</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">delay</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-974"><td class="docs"><div class="pilwrap"><a href="#section-974" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds an animation to be played delay seconds after the current or last queued animation.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>May </span><span class="dox_type">delay</span><span>- be &lt;= 0 to use duration of previous animation minus any mix duration plus the negative delay.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">addAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">entry</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">entry</span><span class="p">.</span><span class="nx">animation</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">;</span>
        <span class="nx">entry</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="nx">loop</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">delay</span> <span class="o">||</span> <span class="nx">delay</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">previousAnimation</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">animation</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">previousAnimation</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
                <span class="nx">delay</span> <span class="o">=</span> <span class="nx">previousAnimation</span><span class="p">.</span><span class="nx">duration</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">getMix</span><span class="p">(</span><span class="nx">previousAnimation</span><span class="p">,</span> <span class="nx">animation</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">delay</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="nx">delay</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">entry</span><span class="p">.</span><span class="nx">delay</span> <span class="o">=</span> <span class="nx">delay</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-975"><td class="docs"><div class="pilwrap"><a href="#section-975" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns true if no animation is set or if the current time is greater than the animation duration, regardless of looping.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">isComplete</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">current</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">attachmentLoader</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attachmentLoader</span> <span class="o">=</span> <span class="nx">attachmentLoader</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">scale</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">readSkeletonData</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-976"><td class="docs"><div class="pilwrap"><a href="#section-976" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>shint -W069</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">skeletonData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonData</span><span class="p">(),</span>
            <span class="nx">boneData</span><span class="p">;</span></pre></div></td></tr><tr id="section-977"><td class="docs"><div class="pilwrap"><a href="#section-977" class="pilcrow">&#182;</a></div><p>Bones.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="nx">root</span><span class="p">[</span><span class="s2">&quot;bones&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">boneMap</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">])</span> <span class="p">{</span>
                <span class="nx">parent</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findBone</span><span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]);</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parent</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Parent bone not found: &quot;</span> <span class="o">+</span> <span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="nx">boneData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">BoneData</span><span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="nx">parent</span><span class="p">);</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;length&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;rotation&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;scaleX&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">boneData</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">boneMap</span><span class="p">[</span><span class="s2">&quot;scaleY&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">bones</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">boneData</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-978"><td class="docs"><div class="pilwrap"><a href="#section-978" class="pilcrow">&#182;</a></div><p>Slots.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="nx">root</span><span class="p">[</span><span class="s2">&quot;slots&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">slotMap</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findBone</span><span class="p">(</span><span class="nx">slotMap</span><span class="p">[</span><span class="s2">&quot;bone&quot;</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">boneData</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Slot bone not found: &quot;</span> <span class="o">+</span> <span class="nx">slotMap</span><span class="p">[</span><span class="s2">&quot;bone&quot;</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">slotData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SlotData</span><span class="p">(</span><span class="nx">slotMap</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="nx">boneData</span><span class="p">);</span>

            <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">slotMap</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">slotData</span><span class="p">.</span><span class="nx">attachmentName</span> <span class="o">=</span> <span class="nx">slotMap</span><span class="p">[</span><span class="s2">&quot;attachment&quot;</span><span class="p">];</span>

            <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">slots</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">slotData</span><span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-979"><td class="docs"><div class="pilwrap"><a href="#section-979" class="pilcrow">&#182;</a></div><p>Skins.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">skins</span> <span class="o">=</span> <span class="nx">root</span><span class="p">[</span><span class="s2">&quot;skins&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">skinName</span> <span class="k">in</span> <span class="nx">skins</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skins</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">skinName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">skinMap</span> <span class="o">=</span> <span class="nx">skins</span><span class="p">[</span><span class="nx">skinName</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">skin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Skin</span><span class="p">(</span><span class="nx">skinName</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">slotName</span> <span class="k">in</span> <span class="nx">skinMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skinMap</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">slotName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">slotIndex</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findSlotIndex</span><span class="p">(</span><span class="nx">slotName</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">slotEntry</span> <span class="o">=</span> <span class="nx">skinMap</span><span class="p">[</span><span class="nx">slotName</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">attachmentName</span> <span class="k">in</span> <span class="nx">slotEntry</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slotEntry</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attachmentName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">readAttachment</span><span class="p">(</span><span class="nx">skin</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">,</span> <span class="nx">slotEntry</span><span class="p">[</span><span class="nx">attachmentName</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">attachment</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">skin</span><span class="p">.</span><span class="nx">addAttachment</span><span class="p">(</span><span class="nx">slotIndex</span><span class="p">,</span> <span class="nx">attachmentName</span><span class="p">,</span> <span class="nx">attachment</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">skins</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">skin</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">skin</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">defaultSkin</span> <span class="o">=</span> <span class="nx">skin</span><span class="p">;</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-980"><td class="docs"><div class="pilwrap"><a href="#section-980" class="pilcrow">&#182;</a></div><p>Animations.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">animations</span> <span class="o">=</span> <span class="nx">root</span><span class="p">[</span><span class="s2">&quot;animations&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">animationName</span> <span class="k">in</span> <span class="nx">animations</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animations</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">animationName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">readAnimation</span><span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">animations</span><span class="p">[</span><span class="nx">animationName</span><span class="p">],</span> <span class="nx">skeletonData</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">skeletonData</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">readAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skin</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">map</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-981"><td class="docs"><div class="pilwrap"><a href="#section-981" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>shint -W069</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">name</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentType</span><span class="p">[</span><span class="nx">map</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;region&quot;</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentType</span><span class="p">.</span><span class="nx">region</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span><span class="p">();</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;scaleX&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;scaleY&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;rotation&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">updateOffset</span><span class="p">();</span>

            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="nx">attachment</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">attachment</span><span class="p">;</span>
        <span class="p">}</span>

            <span class="k">throw</span> <span class="s2">&quot;Unknown attachment type: &quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">readAnimation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">skeletonData</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-982"><td class="docs"><div class="pilwrap"><a href="#section-982" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>shint -W069</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">timelines</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="kd">var</span> <span class="nx">duration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">,</span> <span class="nx">timelineName</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span>
            <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">bones</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;bones&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">boneName</span> <span class="k">in</span> <span class="nx">bones</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">bones</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">boneName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">boneIndex</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findBoneIndex</span><span class="p">(</span><span class="nx">boneName</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">boneIndex</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Bone not found: &quot;</span> <span class="o">+</span> <span class="nx">boneName</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">boneMap</span> <span class="o">=</span> <span class="nx">bones</span><span class="p">[</span><span class="nx">boneName</span><span class="p">];</span>

            <span class="k">for</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="k">in</span> <span class="nx">boneMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">boneMap</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
                <span class="nx">values</span> <span class="o">=</span> <span class="nx">boneMap</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;rotate&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">RotateTimeline</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">boneIndex</span> <span class="o">=</span> <span class="nx">boneIndex</span><span class="p">;</span>

                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">valueMap</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="nx">timeline</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">],</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;angle&quot;</span><span class="p">]);</span>
                        <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">readCurve</span><span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">);</span>
                        <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">timelines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">timeline</span><span class="p">);</span>
                    <span class="nx">duration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameCount</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;translate&quot;</span> <span class="o">||</span> <span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">timelineScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">)</span>
                        <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">ScaleTimeline</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">TranslateTimeline</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                        <span class="nx">timelineScale</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">boneIndex</span> <span class="o">=</span> <span class="nx">boneIndex</span><span class="p">;</span>

                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">valueMap</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="nx">timelineScale</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="nx">timelineScale</span><span class="p">;</span>
                        <span class="nx">timeline</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
                        <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">readCurve</span><span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">);</span>
                        <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">timelines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">timeline</span><span class="p">);</span>
                    <span class="nx">duration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameCount</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">3</span><span class="p">]);</span>

                <span class="p">}</span> <span class="k">else</span>
                    <span class="k">throw</span> <span class="s2">&quot;Invalid timeline type for a bone: &quot;</span> <span class="o">+</span> <span class="nx">timelineName</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="nx">boneName</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">slots</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span><span class="s2">&quot;slots&quot;</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">slotName</span> <span class="k">in</span> <span class="nx">slots</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slots</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">slotName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">slotMap</span> <span class="o">=</span> <span class="nx">slots</span><span class="p">[</span><span class="nx">slotName</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">slotIndex</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">findSlotIndex</span><span class="p">(</span><span class="nx">slotName</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="k">in</span> <span class="nx">slotMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slotMap</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
                <span class="nx">values</span> <span class="o">=</span> <span class="nx">slotMap</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;color&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">ColorTimeline</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">slotIndex</span> <span class="o">=</span> <span class="nx">slotIndex</span><span class="p">;</span>

                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">valueMap</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">];</span>
                        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
                        <span class="nx">timeline</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">],</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
                        <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">readCurve</span><span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">);</span>
                        <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">timelines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">timeline</span><span class="p">);</span>
                    <span class="nx">duration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameCount</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">5</span><span class="p">]);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="o">==</span> <span class="s2">&quot;attachment&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentTimeline</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">slotIndex</span> <span class="o">=</span> <span class="nx">slotIndex</span><span class="p">;</span>

                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">valueMap</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="nx">timeline</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="nx">frameIndex</span><span class="o">++</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">],</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]);</span>
                    <span class="p">}</span>
                    <span class="nx">timelines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">timeline</span><span class="p">);</span>
                        <span class="nx">duration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameCount</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>

                <span class="p">}</span> <span class="k">else</span>
                    <span class="k">throw</span> <span class="s2">&quot;Invalid timeline type for a slot: &quot;</span> <span class="o">+</span> <span class="nx">timelineName</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="nx">slotName</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">skeletonData</span><span class="p">.</span><span class="nx">animations</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Animation</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">timelines</span><span class="p">,</span> <span class="nx">duration</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">readCurve</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">valueMap</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-983"><td class="docs"><div class="pilwrap"><a href="#section-983" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>shint -W069</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">curve</span> <span class="o">=</span> <span class="nx">valueMap</span><span class="p">[</span><span class="s2">&quot;curve&quot;</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">curve</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">curve</span> <span class="o">==</span> <span class="s2">&quot;stepped&quot;</span><span class="p">)</span>
        <span class="nx">timeline</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">setStepped</span><span class="p">(</span><span class="nx">frameIndex</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">curve</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span>
        <span class="nx">timeline</span><span class="p">.</span><span class="nx">curves</span><span class="p">.</span><span class="nx">setCurve</span><span class="p">(</span><span class="nx">frameIndex</span><span class="p">,</span> <span class="nx">curve</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">curve</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">curve</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">curve</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">.</span><span class="nx">toColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">hexString</span><span class="p">,</span> <span class="nx">colorIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">hexString</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">8</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Color hexidecimal length must be 8, recieved: &quot;</span> <span class="o">+</span> <span class="nx">hexString</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">hexString</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">colorIndex</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">atlasText</span><span class="p">,</span> <span class="nx">textureLoader</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textureLoader</span> <span class="o">=</span> <span class="nx">textureLoader</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pages</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">regions</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasReader</span><span class="p">(</span><span class="nx">atlasText</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">tuple</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">tuple</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">page</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">readLine</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">line</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="nx">line</span> <span class="o">=</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">line</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
            <span class="nx">page</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">page</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">page</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasPage</span><span class="p">();</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">line</span><span class="p">;</span>

            <span class="nx">page</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">Format</span><span class="p">[</span><span class="nx">reader</span><span class="p">.</span><span class="nx">readValue</span><span class="p">()];</span>

            <span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">);</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">minFilter</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureFilter</span><span class="p">[</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">magFilter</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureFilter</span><span class="p">[</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]];</span>

            <span class="kd">var</span> <span class="nx">direction</span> <span class="o">=</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">readValue</span><span class="p">();</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">uWrap</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span><span class="p">.</span><span class="nx">clampToEdge</span><span class="p">;</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">vWrap</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span><span class="p">.</span><span class="nx">clampToEdge</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
                <span class="nx">page</span><span class="p">.</span><span class="nx">uWrap</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span><span class="p">.</span><span class="nx">repeat</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
                <span class="nx">page</span><span class="p">.</span><span class="nx">vWrap</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span><span class="p">.</span><span class="nx">repeat</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">==</span> <span class="s2">&quot;xy&quot;</span><span class="p">)</span>
                <span class="nx">page</span><span class="p">.</span><span class="nx">uWrap</span> <span class="o">=</span> <span class="nx">page</span><span class="p">.</span><span class="nx">vWrap</span> <span class="o">=</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span><span class="p">.</span><span class="nx">repeat</span><span class="p">;</span>

            <span class="nx">textureLoader</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">page</span><span class="p">,</span> <span class="nx">line</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">pages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">page</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">region</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasRegion</span><span class="p">();</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">line</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="nx">page</span><span class="p">;</span>

            <span class="nx">region</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">=</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">readValue</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">;</span>

            <span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>

            <span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>

            <span class="nx">region</span><span class="p">.</span><span class="nx">u</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">rotate</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">u2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">v2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">u2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">v2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">width</span><span class="p">);</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">height</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// split is optional</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">splits</span> <span class="o">=</span> <span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">10</span><span class="p">)];</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// pad is optional, but only present with splits</span>
                    <span class="nx">region</span><span class="p">.</span><span class="nx">pads</span> <span class="o">=</span> <span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">10</span><span class="p">)];</span>

                    <span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">region</span><span class="p">.</span><span class="nx">originalWidth</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">originalHeight</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>

            <span class="nx">reader</span><span class="p">.</span><span class="nx">readTuple</span><span class="p">(</span><span class="nx">tuple</span><span class="p">);</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">offsetX</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">offsetY</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>

            <span class="nx">region</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">reader</span><span class="p">.</span><span class="nx">readValue</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">regions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">region</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">findRegion</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">regions</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">regions</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">regions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">regions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">name</span><span class="p">)</span> <span class="k">return</span> <span class="nx">regions</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">dispose</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">pages</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pages</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">pages</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">textureLoader</span><span class="p">.</span><span class="nx">unload</span><span class="p">(</span><span class="nx">pages</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rendererObject</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">updateUVs</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">page</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">regions</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">regions</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">regions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">region</span> <span class="o">=</span> <span class="nx">regions</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">page</span> <span class="o">!=</span> <span class="nx">page</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">u</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
            <span class="nx">region</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">rotate</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">u2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">region</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">v2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">region</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">u2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">region</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
                <span class="nx">region</span><span class="p">.</span><span class="nx">v2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">region</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">page</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">Format</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">alpha</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">intensity</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">luminanceAlpha</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">rgb565</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">rgba4444</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nx">rgb888</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nx">rgba8888</span><span class="o">:</span> <span class="mi">6</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureFilter</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">nearest</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">linear</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">mipMap</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">mipMapNearestNearest</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">mipMapLinearNearest</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nx">mipMapNearestLinear</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nx">mipMapLinearLinear</span><span class="o">:</span> <span class="mi">6</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Atlas</span><span class="p">.</span><span class="nx">TextureWrap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">mirroredRepeat</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">clampToEdge</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">repeat</span><span class="o">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasPage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasPage</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">format</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">minFilter</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">magFilter</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">uWrap</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">vWrap</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">rendererObject</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasRegion</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasRegion</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">page</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">u</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">v</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">u2</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">v2</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">offsetX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">offsetY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">originalWidth</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">originalHeight</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">rotate</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">splits</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">pads</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">};</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasReader</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lines</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\r\n|\r|\n/</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasReader</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">trim</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+|\s+$/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">readLine</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">];</span>
    <span class="p">},</span>
    <span class="nx">readValue</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">readLine</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">colon</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">colon</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Invalid line: &quot;</span> <span class="o">+</span> <span class="nx">line</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">colon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">},</span></pre></div></td></tr><tr id="section-984"><td class="docs"><div class="pilwrap"><a href="#section-984" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Returns the number of tuple values read (2 or 4).</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">readTuple</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">tuple</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">readLine</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">colon</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">colon</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Invalid line: &quot;</span> <span class="o">+</span> <span class="nx">line</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">lastMatch</span><span class="o">=</span> <span class="nx">colon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">comma</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">lastMatch</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">comma</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Invalid line: &quot;</span> <span class="o">+</span> <span class="nx">line</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">tuple</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">lastMatch</span><span class="p">,</span> <span class="nx">comma</span> <span class="o">-</span> <span class="nx">lastMatch</span><span class="p">));</span>
            <span class="nx">lastMatch</span> <span class="o">=</span> <span class="nx">comma</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">tuple</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">lastMatch</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasAttachmentLoader</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">atlas</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span> <span class="o">=</span> <span class="nx">atlas</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">spine</span><span class="p">.</span><span class="nx">AtlasAttachmentLoader</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">newAttachment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skin</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AttachmentType</span><span class="p">.</span><span class="nx">region</span><span class="o">:</span>
            <span class="kd">var</span> <span class="nx">region</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">findRegion</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">region</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Region not found in atlas: &quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span> <span class="o">=</span> <span class="nx">region</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">setUVs</span><span class="p">(</span><span class="nx">region</span><span class="p">.</span><span class="nx">u</span><span class="p">,</span> <span class="nx">region</span><span class="p">.</span><span class="nx">v</span><span class="p">,</span> <span class="nx">region</span><span class="p">.</span><span class="nx">u2</span><span class="p">,</span> <span class="nx">region</span><span class="p">.</span><span class="nx">v2</span><span class="p">,</span> <span class="nx">region</span><span class="p">.</span><span class="nx">rotate</span><span class="p">);</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionOffsetX</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">offsetX</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionOffsetY</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">offsetY</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionWidth</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionHeight</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionOriginalWidth</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">originalWidth</span><span class="p">;</span>
            <span class="nx">attachment</span><span class="p">.</span><span class="nx">regionOriginalHeight</span> <span class="o">=</span> <span class="nx">region</span><span class="p">.</span><span class="nx">originalHeight</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">attachment</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">throw</span> <span class="s2">&quot;Unknown attachment type: &quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">spine</span><span class="p">.</span><span class="nx">Bone</span><span class="p">.</span><span class="nx">yDown</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">AnimCache</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-985"><td class="docs"><div class="pilwrap"><a href="#section-985" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A class that enables the you to import and run your spine animations in pixi.<br />Spine animation data needs to be loaded using the PIXI.AssetLoader or PIXI.SpineLoader before it can be used by this class<br />See example 12 (<a href='http://www.goodboydigital.com/pixijs/examples/12/'>http://www.goodboydigital.com/pixijs/examples/12/</a>) to see a working example and check out the source</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the spine anim file to be used</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">spineData</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AnimCache</span><span class="p">[</span><span class="nx">url</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">spineData</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: &quot;</span> <span class="o">+</span> <span class="nx">url</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">Skeleton</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">spineData</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">updateWorldTransform</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stateData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationStateData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">spineData</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">AnimationState</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stateData</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">slotContainers</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">drawOrder</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">drawOrder</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">attachment</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">slotContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">slotContainers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">slotContainer</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">slotContainer</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">attachment</span> <span class="k">instanceof</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">spriteName</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createSprite</span><span class="p">(</span><span class="nx">slot</span><span class="p">,</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">);</span>
        <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSprite</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">;</span>
        <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSpriteName</span> <span class="o">=</span> <span class="nx">spriteName</span><span class="p">;</span>
        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">sprite</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span><span class="p">;</span></pre></div></td></tr><tr id="section-986"><td class="docs"><div class="pilwrap"><a href="#section-986" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the object transform for rendering</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span> <span class="o">||</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">timeDelta</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.001</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastTime</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">timeDelta</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">updateWorldTransform</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">drawOrder</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">drawOrder</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">drawOrder</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">drawOrder</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">attachment</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">attachment</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">slotContainer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slotContainers</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">attachment</span> <span class="k">instanceof</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">RegionAttachment</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slot</span><span class="p">.</span><span class="nx">currentSpriteName</span> <span class="o">||</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSpriteName</span> <span class="o">!=</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">spriteName</span> <span class="o">=</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">currentSprite</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSprite</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span> <span class="o">||</span> <span class="p">{};</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span><span class="p">[</span><span class="nx">spriteName</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span><span class="p">[</span><span class="nx">spriteName</span><span class="p">].</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createSprite</span><span class="p">(</span><span class="nx">slot</span><span class="p">,</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">rendererObject</span><span class="p">);</span>
                    <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">sprite</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSprite</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span><span class="p">[</span><span class="nx">spriteName</span><span class="p">];</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSpriteName</span> <span class="o">=</span> <span class="nx">spriteName</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">bone</span><span class="p">;</span>

        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldX</span> <span class="o">+</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m00</span> <span class="o">+</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m01</span><span class="p">;</span>
        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldY</span> <span class="o">+</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m10</span> <span class="o">+</span> <span class="nx">attachment</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">m11</span><span class="p">;</span>
        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldScaleX</span><span class="p">;</span>
        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">worldScaleY</span><span class="p">;</span>

        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">bone</span><span class="p">.</span><span class="nx">worldRotation</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">);</span>

        <span class="nx">slotContainer</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
        <span class="nx">slot</span><span class="p">.</span><span class="nx">currentSprite</span><span class="p">.</span><span class="nx">tint</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">rgb2hex</span><span class="p">([</span><span class="nx">slot</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span><span class="nx">slot</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span><span class="nx">slot</span><span class="p">.</span><span class="nx">b</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplayObjectContainer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>


<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Spine</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createSprite</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slot</span><span class="p">,</span> <span class="nx">descriptor</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">descriptor</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">?</span> <span class="nx">descriptor</span><span class="p">.</span><span class="nx">name</span> <span class="o">:</span> <span class="nx">descriptor</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromFrame</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="nx">descriptor</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="nx">descriptor</span><span class="p">.</span><span class="nx">rotation</span><span class="p">;</span>
    <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">.</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>

    <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="nx">slot</span><span class="p">.</span><span class="nx">sprites</span><span class="p">[</span><span class="nx">descriptor</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">sprite</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-987"><td class="docs"><div class="pilwrap"><a href="#section-987" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToUpdate</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCacheIdGenerator</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-988"><td class="docs"><div class="pilwrap"><a href="#section-988" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A texture stores the information that represents an image. All textures have a base texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">source</span><span>- the source object (image or canvas)</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-989"><td class="docs"><div class="pilwrap"><a href="#section-989" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The width of the base texture set when the image has loaded</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-990"><td class="docs"><div class="pilwrap"><a href="#section-990" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The height of the base texture set when the image has loaded</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-991"><td class="docs"><div class="pilwrap"><a href="#section-991" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The scale mode to apply when scaling this texture</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">PIXI.scaleModes</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="nx">scaleMode</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">DEFAULT</span><span class="p">;</span></pre></div></td></tr><tr id="section-992"><td class="docs"><div class="pilwrap"><a href="#section-992" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Describes if the base texture has loaded or not</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">hasLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-993"><td class="docs"><div class="pilwrap"><a href="#section-993" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The source that is loaded to create the texture</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Image</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="nx">source</span><span class="p">;</span></pre></div></td></tr><tr id="section-994"><td class="docs"><div class="pilwrap"><a href="#section-994" class="pilcrow">&#182;</a></div><p>TODO will be used for futer pixi 1.5...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCacheIdGenerator</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr><tr id="section-995"><td class="docs"><div class="pilwrap"><a href="#section-995" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Controls if RGB channels should be premultiplied by Alpha  (WebGL only)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">premultipliedAlpha</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-996"><td class="docs"><div class="pilwrap"><a href="#section-996" class="pilcrow">&#182;</a></div><p>used for webGL</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_glTextures</span> <span class="o">=</span> <span class="p">[];</span></pre></div></td></tr><tr id="section-997"><td class="docs"><div class="pilwrap"><a href="#section-997" class="pilcrow">&#182;</a></div><p>used for webGL teture updateing...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_dirty</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">source</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>

    <span class="k">if</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">complete</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">getContext</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">hasLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToUpdate</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

            <span class="nx">scope</span><span class="p">.</span><span class="nx">hasLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">_dirty</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-998"><td class="docs"><div class="pilwrap"><a href="#section-998" class="pilcrow">&#182;</a></div><p>add it to somewhere...</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">scope</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">scope</span> <span class="p">}</span> <span class="p">);</span>
        <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">scope</span> <span class="p">}</span> <span class="p">);</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_powerOf2</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>



<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">;</span></pre></div></td></tr><tr id="section-999"><td class="docs"><div class="pilwrap"><a href="#section-999" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys this base texture</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span><span class="p">];</span>
        <span class="k">delete</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span><span class="p">];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">source</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">]</span>  <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">texturesToDestroy</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1000"><td class="docs"><div class="pilwrap"><a href="#section-1000" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Changes the source image of the texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">newSrc</span><span>- the path of the image</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateSourceImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newSrc</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hasLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">newSrc</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1001"><td class="docs"><div class="pilwrap"><a href="#section-1001" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that returns a base texture based on an image url<br />If the image is not in the base texture cache it will be created and loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">imageUrl</span><span>- The image url of the texture</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">BaseTexture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">fromImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">imageUrl</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">baseTexture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="nx">imageUrl</span><span class="p">];</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">crossorigin</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">imageUrl</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;data:&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="nx">crossorigin</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">baseTexture</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-1002"><td class="docs"><div class="pilwrap"><a href="#section-1002" class="pilcrow">&#182;</a></div><p>new Image() breaks tex loading in some versions of Chrome.
See https://code.google.com/p/chromium/issues/detail?id=238071</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span><span class="c1">//document.createElement(&#39;img&#39;);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">crossorigin</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">image</span><span class="p">.</span><span class="nx">crossOrigin</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">image</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">imageUrl</span><span class="p">;</span>
        <span class="nx">baseTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">(</span><span class="nx">image</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">);</span>
        <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="nx">imageUrl</span><span class="p">;</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="nx">imageUrl</span><span class="p">]</span> <span class="o">=</span> <span class="nx">baseTexture</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">baseTexture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1003"><td class="docs"><div class="pilwrap"><a href="#section-1003" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that returns a base texture based on a canvas element<br />If the image is not in the base texture cache it will be created and loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Canvas} </span><span class="dox_type">canvas</span><span>- The canvas element source of the texture</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">BaseTexture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">fromCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">canvas</span><span class="p">.</span><span class="nx">_pixiId</span> <span class="o">=</span> <span class="s1">&#39;canvas_&#39;</span> <span class="o">+</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCacheIdGenerator</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;canvas._pixiId&#39;</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">baseTexture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">];</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">baseTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">baseTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;create texture fromCanvas&#39;</span><span class="p">);</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">_pixiId</span><span class="p">]</span> <span class="o">=</span> <span class="nx">baseTexture</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">baseTexture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1004"><td class="docs"><div class="pilwrap"><a href="#section-1004" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">FrameCache</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCacheIdGenerator</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-1005"><td class="docs"><div class="pilwrap"><a href="#section-1005" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A texture stores the information that represents an image or part of an image. It cannot be added<br />to the display list directly. To do this use PIXI.Sprite. If no frame is provided then the whole image is used</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{BaseTexture} </span><span class="dox_type">baseTexture</span><span>- The base texture source to create the texture from</span></div><div class="dox_tag_detail"><span>{Rectangle} </span><span class="dox_type">frame</span><span>- The rectangle frame of the texture to show</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="nx">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-1006"><td class="docs"><div class="pilwrap"><a href="#section-1006" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Does this Texture have any frame data assigned to it?</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">noFrame</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">frame</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">noFrame</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">baseTexture</span> <span class="k">instanceof</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">baseTexture</span> <span class="o">=</span> <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-1007"><td class="docs"><div class="pilwrap"><a href="#section-1007" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The base texture that this texture uses.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">BaseTexture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span> <span class="o">=</span> <span class="nx">baseTexture</span><span class="p">;</span></pre></div></td></tr><tr id="section-1008"><td class="docs"><div class="pilwrap"><a href="#section-1008" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The frame specifies the region of the base texture that this texture uses</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">;</span></pre></div></td></tr><tr id="section-1009"><td class="docs"><div class="pilwrap"><a href="#section-1009" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The trim point</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">trim</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-1010"><td class="docs"><div class="pilwrap"><a href="#section-1010" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This will let the renderer know if the texture is valid. If its not then it cannot be rendered.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div></td></tr><tr id="section-1011"><td class="docs"><div class="pilwrap"><a href="#section-1011" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The context scope under which events are run.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div></td></tr><tr id="section-1012"><td class="docs"><div class="pilwrap"><a href="#section-1012" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The WebGL UV data cache.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-1013"><td class="docs"><div class="pilwrap"><a href="#section-1013" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The width of the Texture in pixels.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-1014"><td class="docs"><div class="pilwrap"><a href="#section-1014" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the Texture in pixels.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-1015"><td class="docs"><div class="pilwrap"><a href="#section-1015" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,<br />irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">noFrame</span><span class="p">)</span> <span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">onBaseTextureLoaded</span><span class="p">();</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">;</span></pre></div></td></tr><tr id="section-1016"><td class="docs"><div class="pilwrap"><a href="#section-1016" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Called when the base texture is loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">event</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onBaseTextureLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">baseTexture</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
    <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">noFrame</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span> <span class="p">}</span> <span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1017"><td class="docs"><div class="pilwrap"><a href="#section-1017" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Destroys this texture</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">destroyBase</span><span>- Whether to destroy the base texture as well</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">destroyBase</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">destroyBase</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1018"><td class="docs"><div class="pilwrap"><a href="#section-1018" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Specifies the region of the baseTexture that this texture will use.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Rectangle} </span><span class="dox_type">frame</span><span>- The frame of the texture to set it to</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">noFrame</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">trim</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">||</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">frame</span><span class="p">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Texture Error: frame does not fit inside the base Texture dimensions &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="nx">frame</span> <span class="o">&amp;&amp;</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">valid</span><span class="p">)</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-1019"><td class="docs"><div class="pilwrap"><a href="#section-1019" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Updates the internal WebGL UV cache.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_updateWebGLuvs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureUvs</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">tw</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">th</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">tw</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">y0</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">th</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">x1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">tw</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">y1</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">th</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">x2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">/</span> <span class="nx">tw</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">y2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">th</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">x3</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">tw</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_uvs</span><span class="p">.</span><span class="nx">y3</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">/</span> <span class="nx">th</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-1020"><td class="docs"><div class="pilwrap"><a href="#section-1020" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that returns a texture based on an image url<br />If the image is not in the texture cache it will be  created and loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">imageUrl</span><span>- The image url of the texture</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">imageUrl</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">imageUrl</span><span class="p">];</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">texture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">fromImage</span><span class="p">(</span><span class="nx">imageUrl</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">));</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">imageUrl</span><span class="p">]</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">texture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1021"><td class="docs"><div class="pilwrap"><a href="#section-1021" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that returns a texture based on a frame id<br />If the frame id is not in the texture cache an error will be thrown</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">frameId</span><span>- The frame id of the texture</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromFrame</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frameId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">frameId</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">texture</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;The frameId &quot;&#39;</span> <span class="o">+</span> <span class="nx">frameId</span> <span class="o">+</span> <span class="s1">&#39;&quot; does not exist in the texture cache &#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">texture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1022"><td class="docs"><div class="pilwrap"><a href="#section-1022" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper function that returns a texture based on a canvas element<br />If the canvas is not in the texture cache it will be  created and loaded</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Canvas} </span><span class="dox_type">canvas</span><span>- The canvas element source of the texture</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">baseTexture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">.</span><span class="nx">fromCanvas</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span> <span class="nx">baseTexture</span> <span class="p">);</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-1023"><td class="docs"><div class="pilwrap"><a href="#section-1023" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Adds a texture to the textureCache.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">id</span><span>- the id that the texture will be stored against.</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">addTextureToCache</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1024"><td class="docs"><div class="pilwrap"><a href="#section-1024" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Remove a texture from the textureCache.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">id</span><span>- the id of the texture to be removed</span></div><div class="dox_tag_title">Returns</div><div class="dox_tag_detail"><span class="dox_type">Texture</span><span>the texture that was removed</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">removeTextureFromCache</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
    <span class="k">delete</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
    <span class="k">delete</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTextureCache</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">texture</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1025"><td class="docs"><div class="pilwrap"><a href="#section-1025" class="pilcrow">&#182;</a></div><p>this is more for webGL.. it contains updated frames..</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureUvs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">x1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">x2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">x3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


<span class="p">};</span></pre></div></td></tr><tr id="section-1026"><td class="docs"><div class="pilwrap"><a href="#section-1026" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1027"><td class="docs"><div class="pilwrap"><a href="#section-1027" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A RenderTexture is a special texture that allows any pixi displayObject to be rendered to it.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The width of the render texture</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The height of the render texture</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">scaleMode</span><span>- Should be one of the PIXI.scaleMode consts</span></div></div><div class="body"><p><strong>Hint</strong>: All DisplayObjects (exmpl. Sprites) that render on RenderTexture should be preloaded.<br /> Otherwise black rectangles will be drawn instead.</p>

<p>RenderTexture takes snapshot of DisplayObject passed to render method. If DisplayObject is passed to render method, position and rotation of it will be ignored. For example:</p>

<pre><code>var renderTexture = new PIXI.RenderTexture(800, 600);
var sprite = PIXI.Sprite.fromImage("spinObj_01.png");
sprite.position.x = 800/2;
sprite.position.y = 600/2;
sprite.anchor.x = 0.5;
sprite.anchor.y = 0.5;
renderTexture.render(sprite);
</code></pre>

<p>Sprite in this case will be rendered to 0,0 position. To render this sprite at center DisplayObjectContainer should be used:</p>

<pre><code>var doc = new PIXI.DisplayObjectContainer();
doc.addChild(sprite);
renderTexture.render(doc);  // Renders to center of renderTexture
</code></pre></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">,</span> <span class="nx">scaleMode</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span></pre></div></td></tr><tr id="section-1028"><td class="docs"><div class="pilwrap"><a href="#section-1028" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The with of the render texture</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-1029"><td class="docs"><div class="pilwrap"><a href="#section-1029" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The height of the render texture</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span></pre></div></td></tr><tr id="section-1030"><td class="docs"><div class="pilwrap"><a href="#section-1030" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The framing rectangle of the render texture</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-1031"><td class="docs"><div class="pilwrap"><a href="#section-1031" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,<br />irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Rectangle</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span></pre></div></td></tr><tr id="section-1032"><td class="docs"><div class="pilwrap"><a href="#section-1032" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The base texture object that this texture uses</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">BaseTexture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BaseTexture</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="nx">scaleMode</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">scaleModes</span><span class="p">.</span><span class="nx">DEFAULT</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-1033"><td class="docs"><div class="pilwrap"><a href="#section-1033" class="pilcrow">&#182;</a></div><p>each render texture can only belong to one renderer at the moment if its webGL</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="nx">renderer</span> <span class="o">||</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">defaultRenderer</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WEBGL_RENDERER</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">FilterTexture</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">scaleMode</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_glTextures</span><span class="p">[</span><span class="nx">gl</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">texture</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderWebGL</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span> <span class="p">,</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderCanvas</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">CanvasBuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">canvas</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">frameUpdates</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">;</span></pre></div></td></tr><tr id="section-1034"><td class="docs"><div class="pilwrap"><a href="#section-1034" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Resize the RenderTexture.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">width</span><span>- The width to resize to.</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">height</span><span>- The height to resize to.</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">updateBase</span><span>- Should the baseTexture.width and height values be resized as well?</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">updateBase</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">height</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">crop</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">updateBase</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WEBGL_RENDERER</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1035"><td class="docs"><div class="pilwrap"><a href="#section-1035" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Clears the RenderTexture.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WEBGL_RENDERER</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">frameBuffer</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1036"><td class="docs"><div class="pilwrap"><a href="#section-1036" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This function will draw the display object to the texture.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- The display object to render this texture on</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">clear</span><span>- If true the texture will be cleared before the displayObject is drawn</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderWebGL</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">position</span><span class="p">,</span> <span class="nx">clear</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-1037"><td class="docs"><div class="pilwrap"><a href="#section-1037" class="pilcrow">&#182;</a></div><p>TOOD replace position with matrix..</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">gl</span><span class="p">;</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">colorMask</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

    <span class="nx">gl</span><span class="p">.</span><span class="nx">bindFramebuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAMEBUFFER</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">frameBuffer</span> <span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">clear</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span></pre></div></td></tr><tr id="section-1038"><td class="docs"><div class="pilwrap"><a href="#section-1038" class="pilcrow">&#182;</a></div><p>THIS WILL MESS WITH HIT TESTING!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span></pre></div></td></tr><tr id="section-1039"><td class="docs"><div class="pilwrap"><a href="#section-1039" class="pilcrow">&#182;</a></div><p>TODO -? create a new one??? dont think so!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">originalWorldTransform</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>
    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">tempMatrix</span><span class="p">;</span></pre></div></td></tr><tr id="section-1040"><td class="docs"><div class="pilwrap"><a href="#section-1040" class="pilcrow">&#182;</a></div><p>modify to flip...</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">-=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateTransform</span><span class="p">();</span>
    <span class="p">}</span></pre></div></td></tr><tr id="section-1041"><td class="docs"><div class="pilwrap"><a href="#section-1041" class="pilcrow">&#182;</a></div><p>update the textures!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">.</span><span class="nx">updateTextures</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">renderDisplayObject</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">projection</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">frameBuffer</span><span class="p">);</span>

    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">originalWorldTransform</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">spriteBatch</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1042"><td class="docs"><div class="pilwrap"><a href="#section-1042" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This function will draw the display object to the texture.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{DisplayObject} </span><span class="dox_type">displayObject</span><span>- The display object to render this texture on</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">clear</span><span>- If true the texture will be cleared before the displayObject is drawn</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">renderCanvas</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">position</span><span class="p">,</span> <span class="nx">clear</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">originalWorldTransform</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">;</span>

    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">tempMatrix</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">updateTransform</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">clear</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">textureBuffer</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">renderDisplayObject</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

    <span class="nx">context</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="nx">displayObject</span><span class="p">.</span><span class="nx">worldTransform</span> <span class="o">=</span> <span class="nx">originalWorldTransform</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RenderTexture</span><span class="p">.</span><span class="nx">tempMatrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span></pre></div></td></tr><tr id="section-1043"><td class="docs"><div class="pilwrap"><a href="#section-1043" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1044"><td class="docs"><div class="pilwrap"><a href="#section-1044" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A Class that loads a bunch of images / sprite sheet / bitmap font files. Once the<br />assets have been loaded they are added to the PIXI Texture cache and can be accessed<br />easily through PIXI.Texture.fromImage() and PIXI.Sprite.fromImage()<br />When all items have been loaded this class will dispatch a 'onLoaded' event<br />As each individual item is loaded this class will dispatch a 'onProgress' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>assetURLs </span><span class="dox_type">Array&lt;String&gt;</span><span>- an array of image/sprite sheet urls that you would like loaded</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assetURLs</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1045"><td class="docs"><div class="pilwrap"><a href="#section-1045" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The array of asset URLs that are going to be loaded</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array&lt;String&gt;</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">assetURLs</span> <span class="o">=</span> <span class="nx">assetURLs</span><span class="p">;</span></pre></div></td></tr><tr id="section-1046"><td class="docs"><div class="pilwrap"><a href="#section-1046" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the requests should be treated as cross origin</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span></pre></div></td></tr><tr id="section-1047"><td class="docs"><div class="pilwrap"><a href="#section-1047" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Maps file extension to loader types</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">loadersByType</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;jpg&#39;</span><span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">,</span>
        <span class="s1">&#39;jpeg&#39;</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">,</span>
        <span class="s1">&#39;png&#39;</span><span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">,</span>
        <span class="s1">&#39;gif&#39;</span><span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">,</span>
        <span class="s1">&#39;webp&#39;</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">,</span>
        <span class="s1">&#39;json&#39;</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">,</span>
        <span class="s1">&#39;atlas&#39;</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">,</span>
        <span class="s1">&#39;anim&#39;</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span><span class="p">,</span>
        <span class="s1">&#39;xml&#39;</span><span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">,</span>
        <span class="s1">&#39;fnt&#39;</span><span class="o">:</span>  <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span>
    <span class="p">};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1048"><td class="docs"><div class="pilwrap"><a href="#section-1048" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Fired when an item has loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1049"><td class="docs"><div class="pilwrap"><a href="#section-1049" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Fired when all the assets have loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1050"><td class="docs"><div class="pilwrap"><a href="#section-1050" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1051"><td class="docs"><div class="pilwrap"><a href="#section-1051" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Given a filename, returns its extension, wil</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">str</span><span>- the name of the asset</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_getDataType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="s1">&#39;data:&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-1052"><td class="docs"><div class="pilwrap"><a href="#section-1052" class="pilcrow">&#182;</a></div><p>starts with 'data:'</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">start</span> <span class="o">===</span> <span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">sepIdx</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sepIdx</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//malformed data URI scheme</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-1053"><td class="docs"><div class="pilwrap"><a href="#section-1053" class="pilcrow">&#182;</a></div><p>e.g. 'image/gif;base64' => 'image/gif'</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">sepIdx</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span></pre></div></td></tr><tr id="section-1054"><td class="docs"><div class="pilwrap"><a href="#section-1054" class="pilcrow">&#182;</a></div><p>We might need to handle some special cases here...
standardize text/plain to 'txt' file extension</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">info</span> <span class="o">||</span> <span class="nx">info</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;txt&#39;</span><span class="p">;</span></pre></div></td></tr><tr id="section-1055"><td class="docs"><div class="pilwrap"><a href="#section-1055" class="pilcrow">&#182;</a></div><p>User specified mime type, try splitting it by '/'</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">return</span> <span class="nx">info</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">).</span><span class="nx">pop</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1056"><td class="docs"><div class="pilwrap"><a href="#section-1056" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Starts loading the assets sequentially</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">onLoad</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">onAssetLoaded</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">loadCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assetURLs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">assetURLs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assetURLs</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div></td></tr><tr id="section-1057"><td class="docs"><div class="pilwrap"><a href="#section-1057" class="pilcrow">&#182;</a></div><p>first see if we have a data URI scheme..</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">fileType</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDataType</span><span class="p">(</span><span class="nx">fileName</span><span class="p">);</span></pre></div></td></tr><tr id="section-1058"><td class="docs"><div class="pilwrap"><a href="#section-1058" class="pilcrow">&#182;</a></div><p>if not, assume it's a file URI</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fileType</span><span class="p">)</span>
            <span class="nx">fileType</span> <span class="o">=</span> <span class="nx">fileName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">).</span><span class="nx">shift</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">).</span><span class="nx">pop</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">();</span>

        <span class="kd">var</span> <span class="nx">Constructor</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadersByType</span><span class="p">[</span><span class="nx">fileType</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Constructor</span><span class="p">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">fileType</span> <span class="o">+</span> <span class="s1">&#39; is an unsupported file type&#39;</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Constructor</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">);</span>

        <span class="nx">loader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="nx">onLoad</span><span class="p">);</span>
        <span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1059"><td class="docs"><div class="pilwrap"><a href="#section-1059" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoked after each file is loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AssetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onAssetLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">loader</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loadCount</span><span class="o">--</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;onProgress&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">loader</span><span class="o">:</span> <span class="nx">loader</span> <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onProgress</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">onProgress</span><span class="p">(</span><span class="nx">loader</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">loadCount</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;onComplete&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span><span class="p">});</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1060"><td class="docs"><div class="pilwrap"><a href="#section-1060" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1061"><td class="docs"><div class="pilwrap"><a href="#section-1061" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The json file loader is used to load in JSON data and parse it<br />When loaded this class will dispatch a 'loaded' event<br />If loading fails this class will dispatch an 'error' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the JSON file</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1062"><td class="docs"><div class="pilwrap"><a href="#section-1062" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span></pre></div></td></tr><tr id="section-1063"><td class="docs"><div class="pilwrap"><a href="#section-1063" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the requests should be treated as cross origin</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span></pre></div></td></tr><tr id="section-1064"><td class="docs"><div class="pilwrap"><a href="#section-1064" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The base url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\/]*$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-1065"><td class="docs"><div class="pilwrap"><a href="#section-1065" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Whether the data has loaded yet</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-1066"><td class="docs"><div class="pilwrap"><a href="#section-1066" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1067"><td class="docs"><div class="pilwrap"><a href="#section-1067" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Loads the JSON data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XDomainRequest</span> <span class="o">&amp;&amp;</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XDomainRequest</span><span class="p">();</span></pre></div></td></tr><tr id="section-1068"><td class="docs"><div class="pilwrap"><a href="#section-1068" class="pilcrow">&#182;</a></div><p>XDomainRequest has a few querks. Occasionally it will abort requests
A way to avoid this is to make sure ALL callbacks are set even if not used
More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">onError</span><span class="p">();</span>
        <span class="p">};</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">ontimeout</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">onError</span><span class="p">();</span>
        <span class="p">};</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">onprogress</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>

    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;Microsoft.XMLHTTP&#39;</span><span class="p">);</span>
    <span class="p">}</span>



    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>

        <span class="nx">scope</span><span class="p">.</span><span class="nx">onJSONLoaded</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1069"><td class="docs"><div class="pilwrap"><a href="#section-1069" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when JSON file is loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onJSONLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseText</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onError</span><span class="p">();</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">frames</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-1070"><td class="docs"><div class="pilwrap"><a href="#section-1070" class="pilcrow">&#182;</a></div><p>sprite sheet</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">textureUrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">(</span><span class="nx">textureUrl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">frameData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">frames</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">image</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>
        <span class="nx">image</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
        <span class="p">});</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">frameData</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">frame</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">rect</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">x</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                    <span class="nx">y</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                    <span class="nx">width</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                    <span class="nx">height</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">crop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">h</span><span class="p">);</span></pre></div></td></tr><tr id="section-1071"><td class="docs"><div class="pilwrap"><a href="#section-1071" class="pilcrow">&#182;</a></div><p>Check to see if the sprite is trimmed</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">trimmed</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">actualSize</span> <span class="o">=</span> <span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">sourceSize</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">realSize</span> <span class="o">=</span> <span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">spriteSourceSize</span><span class="p">;</span>
                    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">trim</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="nx">realSize</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">realSize</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">actualSize</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span> <span class="nx">actualSize</span><span class="p">.</span><span class="nx">h</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">image</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>

    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">bones</span><span class="p">)</span>
    <span class="p">{</span></pre></div></td></tr><tr id="section-1072"><td class="docs"><div class="pilwrap"><a href="#section-1072" class="pilcrow">&#182;</a></div><p>spine animation</p>
</td><td class="code"><div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">spineJsonParser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">spine</span><span class="p">.</span><span class="nx">SkeletonJson</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">skeletonData</span> <span class="o">=</span> <span class="nx">spineJsonParser</span><span class="p">.</span><span class="nx">readSkeletonData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">json</span><span class="p">);</span>
        <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AnimCache</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">]</span> <span class="o">=</span> <span class="nx">skeletonData</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1073"><td class="docs"><div class="pilwrap"><a href="#section-1073" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when json file loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span>
        <span class="nx">content</span><span class="o">:</span> <span class="k">this</span>
    <span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1074"><td class="docs"><div class="pilwrap"><a href="#section-1074" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when error occured</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
        <span class="nx">content</span><span class="o">:</span> <span class="k">this</span>
    <span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1075"><td class="docs"><div class="pilwrap"><a href="#section-1075" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Martin Kelm <a href='http://mkelm.github.com'>http://mkelm.github.com</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1076"><td class="docs"><div class="pilwrap"><a href="#section-1076" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The atlas file loader is used to load in Atlas data and parse it<br />When loaded this class will dispatch a 'loaded' event<br />If loading fails this class will dispatch an 'error' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>url </span><span class="dox_type">String</span><span>- the url of the JSON file</span></div><div class="dox_tag_detail"><span>crossorigin </span><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\/]*$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-1077"><td class="docs"><div class="pilwrap"><a href="#section-1077" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1078"><td class="docs"><div class="pilwrap"><a href="#section-1078" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Starts loading the JSON file</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AjaxRequest</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onAtlasLoaded</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span><span class="s1">&#39;application/json&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1079"><td class="docs"><div class="pilwrap"><a href="#section-1079" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when JSON file is loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onAtlasLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">meta</span> <span class="o">:</span> <span class="p">{</span>
                    <span class="nx">image</span> <span class="o">:</span> <span class="p">[]</span>
                <span class="p">},</span>
                <span class="nx">frames</span> <span class="o">:</span> <span class="p">[]</span>
            <span class="p">};</span>
            <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseText</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\r?\n/</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">lineCount</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">currentImageId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">currentFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">nameInNextLine</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nx">selfOnLoaded</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1080"><td class="docs"><div class="pilwrap"><a href="#section-1080" class="pilcrow">&#182;</a></div><p>parser without rotation support yet!</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+|\s+$/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">nameInNextLine</span> <span class="o">=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">nameInNextLine</span> <span class="o">===</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
                        <span class="nx">currentImageId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">push</span><span class="p">({});</span>
                        <span class="nx">lineCount</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">lineCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">lineCount</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// frame name</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">currentFrame</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//jshint ignore:line</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">currentImageId</span><span class="p">][</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="nx">currentFrame</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">frame</span> <span class="o">:</span> <span class="p">{}</span> <span class="p">};</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">lineCount</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// position</span>
                                <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
                                <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">lineCount</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// size</span>
                                <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
                                <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">h</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">lineCount</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">===</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// real size</span>
                                <span class="kd">var</span> <span class="nx">realSize</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="nx">x</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                                    <span class="nx">y</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                                    <span class="nx">w</span> <span class="o">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)),</span>
                                    <span class="nx">h</span> <span class="o">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                                <span class="p">};</span>

                                <span class="k">if</span> <span class="p">(</span><span class="nx">realSize</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">w</span> <span class="o">||</span> <span class="nx">realSize</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">trimmed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                    <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">realSize</span> <span class="o">=</span> <span class="nx">realSize</span><span class="p">;</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">trimmed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">lineCount</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">currentFrame</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//jshint ignore:line</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">currentImageId</span><span class="p">][</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">images</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-1081"><td class="docs"><div class="pilwrap"><a href="#section-1081" class="pilcrow">&#182;</a></div><p>sprite sheet</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="kd">var</span> <span class="nx">textureUrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                    <span class="kd">var</span> <span class="nx">frameData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">atlas</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">(</span><span class="nx">textureUrl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">));</span>

                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">frameData</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">frame</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">rect</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">,</span> <span class="p">{</span>
                                <span class="nx">x</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                                <span class="nx">y</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                                <span class="nx">width</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                                <span class="nx">height</span><span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">h</span>
                            <span class="p">});</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">trimmed</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">realSize</span> <span class="o">=</span> <span class="nx">frameData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">realSize</span><span class="p">;</span></pre></div></td></tr><tr id="section-1082"><td class="docs"><div class="pilwrap"><a href="#section-1082" class="pilcrow">&#182;</a></div><p>trim in pixi not supported yet, todo update trim properties if it is done ...</p>
</td><td class="code"><div class="highlight"><pre>                                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">trim</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">trim</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">currentImageId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="nx">selfOnLoaded</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentImageId</span><span class="p">].</span><span class="nx">load</span><span class="p">();</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
            <span class="p">}</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">onError</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1083"><td class="docs"><div class="pilwrap"><a href="#section-1083" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when json file has loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentImageId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">currentImageId</span><span class="o">++</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currentImageId</span><span class="p">].</span><span class="nx">load</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span>
            <span class="nx">content</span><span class="o">:</span> <span class="k">this</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1084"><td class="docs"><div class="pilwrap"><a href="#section-1084" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when error occured</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AtlasLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
        <span class="nx">content</span><span class="o">:</span> <span class="k">this</span>
    <span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1085"><td class="docs"><div class="pilwrap"><a href="#section-1085" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1086"><td class="docs"><div class="pilwrap"><a href="#section-1086" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The sprite sheet loader is used to load in JSON sprite sheet data<br />To generate the data you can use <a href='http://www.codeandweb.com/texturepacker'>http://www.codeandweb.com/texturepacker</a> and publish in the 'JSON' format<br />There is a free version so thats nice, although the paid version is great value for money.<br />It is highly recommended to use Sprite sheets (also know as a 'texture atlas') as it means sprites can be batched and drawn together for highly increased rendering speed.<br />Once the data has been loaded the frames are stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFrameId()<br />This loader will load the image file that the Spritesheet points to as well as the data.<br />When loaded this class will dispatch a 'loaded' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the sprite sheet JSON file</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteSheetLoader</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-1087"><td class="docs"><div class="pilwrap"><a href="#section-1087" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>i use texture packer to load the assets..<br /><a href='http://www.codeandweb.com/texturepacker'>http://www.codeandweb.com/texturepacker</a><br />make sure to set the format as 'JSON'</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1088"><td class="docs"><div class="pilwrap"><a href="#section-1088" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span></pre></div></td></tr><tr id="section-1089"><td class="docs"><div class="pilwrap"><a href="#section-1089" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the requests should be treated as cross origin</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span></pre></div></td></tr><tr id="section-1090"><td class="docs"><div class="pilwrap"><a href="#section-1090" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The base url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\/]*$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-1091"><td class="docs"><div class="pilwrap"><a href="#section-1091" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The texture being loaded</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div></td></tr><tr id="section-1092"><td class="docs"><div class="pilwrap"><a href="#section-1092" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The frames of the sprite sheet</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1093"><td class="docs"><div class="pilwrap"><a href="#section-1093" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteSheetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteSheetLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1094"><td class="docs"><div class="pilwrap"><a href="#section-1094" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This will begin loading the JSON file</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteSheetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">jsonLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">);</span>
    <span class="nx">jsonLoader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">json</span><span class="p">;</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="nx">jsonLoader</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1095"><td class="docs"><div class="pilwrap"><a href="#section-1095" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when all files are loaded (json and texture)</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpriteSheetLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span>
        <span class="nx">content</span><span class="o">:</span> <span class="k">this</span>
    <span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1096"><td class="docs"><div class="pilwrap"><a href="#section-1096" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1097"><td class="docs"><div class="pilwrap"><a href="#section-1097" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The image loader class is responsible for loading images file formats ('jpeg', 'jpg', 'png' and 'gif')<br />Once the image has been loaded it is stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFrameId()<br />When loaded this class will dispatch a 'loaded' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the image</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1098"><td class="docs"><div class="pilwrap"><a href="#section-1098" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The texture being loaded</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">.</span><span class="nx">fromImage</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">);</span></pre></div></td></tr><tr id="section-1099"><td class="docs"><div class="pilwrap"><a href="#section-1099" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>if the image is loaded with loadFramedSpriteSheet<br />frames will contain the sprite sheet frames</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1100"><td class="docs"><div class="pilwrap"><a href="#section-1100" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1101"><td class="docs"><div class="pilwrap"><a href="#section-1101" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Loads image or takes it from cache</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1102"><td class="docs"><div class="pilwrap"><a href="#section-1102" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoked when image file is loaded or it is already cached and ready to use</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span><span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1103"><td class="docs"><div class="pilwrap"><a href="#section-1103" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Loads image and split it to uniform sized frames</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">frameWidth</span><span>- width of each frame</span></div><div class="dox_tag_detail"><span>{Number} </span><span class="dox_type">frameHeight</span><span>- height of each frame</span></div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">textureName</span><span>- if given, the frames will be cached in &lt;textureName&gt;-&lt;ord&gt; format</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">loadFramedSpriteSheet</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frameWidth</span><span class="p">,</span> <span class="nx">frameHeight</span><span class="p">,</span> <span class="nx">textureName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frames</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">cols</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">frameWidth</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">frameHeight</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">x</span><span class="o">&lt;</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">,</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="o">*</span><span class="nx">frameWidth</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span><span class="o">*</span><span class="nx">frameHeight</span><span class="p">,</span>
                <span class="nx">width</span><span class="o">:</span> <span class="nx">frameWidth</span><span class="p">,</span>
                <span class="nx">height</span><span class="o">:</span> <span class="nx">frameHeight</span>
            <span class="p">});</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">textureName</span><span class="p">)</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">textureName</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1104"><td class="docs"><div class="pilwrap"><a href="#section-1104" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1105"><td class="docs"><div class="pilwrap"><a href="#section-1105" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The xml loader is used to load in XML bitmap font data ('xml' or 'fnt')<br />To generate the data you can use <a href='http://www.angelcode.com/products/bmfont/'>http://www.angelcode.com/products/bmfont/</a><br />This loader will also load the image file as the data.<br />When loaded this class will dispatch a 'loaded' event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the sprite sheet JSON file</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-1106"><td class="docs"><div class="pilwrap"><a href="#section-1106" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>I use texture packer to load the assets..<br /><a href='http://www.codeandweb.com/texturepacker'>http://www.codeandweb.com/texturepacker</a><br />make sure to set the format as 'JSON'</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1107"><td class="docs"><div class="pilwrap"><a href="#section-1107" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span></pre></div></td></tr><tr id="section-1108"><td class="docs"><div class="pilwrap"><a href="#section-1108" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the requests should be treated as cross origin</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span></pre></div></td></tr><tr id="section-1109"><td class="docs"><div class="pilwrap"><a href="#section-1109" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The base url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\/]*$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-1110"><td class="docs"><div class="pilwrap"><a href="#section-1110" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] The texture of the bitmap font</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1111"><td class="docs"><div class="pilwrap"><a href="#section-1111" class="pilcrow">&#182;</a></div><p>constructor</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1112"><td class="docs"><div class="pilwrap"><a href="#section-1112" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Loads the XML font data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AjaxRequest</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">onXMLLoaded</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span><span class="s1">&#39;application/xml&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1113"><td class="docs"><div class="pilwrap"><a href="#section-1113" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoked when the XML file is loaded, parses the data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onXMLLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">responseXML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">responseXML</span> <span class="o">||</span> <span class="sr">/MSIE 9/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span> <span class="o">||</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">isCocoonJS</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">domparser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DOMParser</span><span class="p">();</span>
                    <span class="nx">responseXML</span> <span class="o">=</span> <span class="nx">domparser</span><span class="p">.</span><span class="nx">parseFromString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span> <span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
                    <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ajaxRequest</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
                    <span class="nx">responseXML</span> <span class="o">=</span> <span class="nx">div</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">textureUrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ImageLoader</span><span class="p">(</span><span class="nx">textureUrl</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">texture</span> <span class="o">=</span> <span class="nx">image</span><span class="p">.</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;common&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;face&#39;</span><span class="p">);</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">lineHeight</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">common</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;lineHeight&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">chars</span> <span class="o">=</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-1114"><td class="docs"><div class="pilwrap"><a href="#section-1114" class="pilcrow">&#182;</a></div><p>parse letters</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span> <span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;char&#39;</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">letters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">charCode</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">textureRect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span>
                    <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
                <span class="p">);</span>

                <span class="nx">data</span><span class="p">.</span><span class="nx">chars</span><span class="p">[</span><span class="nx">charCode</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">xOffset</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;xoffset&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nx">yOffset</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;yoffset&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nx">xAdvance</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;xadvance&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nx">kerning</span><span class="o">:</span> <span class="p">{},</span>
                    <span class="nx">texture</span><span class="o">:</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TextureCache</span><span class="p">[</span><span class="nx">charCode</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">Texture</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">texture</span><span class="p">,</span> <span class="nx">textureRect</span><span class="p">)</span>

                <span class="p">};</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-1115"><td class="docs"><div class="pilwrap"><a href="#section-1115" class="pilcrow">&#182;</a></div><p>parse kernings</p>
</td><td class="code"><div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">kernings</span> <span class="o">=</span> <span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;kerning&#39;</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">kernings</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">kernings</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">second</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">kernings</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">kernings</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;amount&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

                <span class="nx">data</span><span class="p">.</span><span class="nx">chars</span><span class="p">[</span><span class="nx">second</span><span class="p">].</span><span class="nx">kerning</span><span class="p">[</span><span class="nx">first</span><span class="p">]</span> <span class="o">=</span> <span class="nx">amount</span><span class="p">;</span>

            <span class="p">}</span>

            <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapText</span><span class="p">.</span><span class="nx">fonts</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">font</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">image</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">image</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1116"><td class="docs"><div class="pilwrap"><a href="#section-1116" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoked when all files are loaded (xml/fnt and texture)</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BitmapFontLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span><span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1117"><td class="docs"><div class="pilwrap"><a href="#section-1117" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23<br />based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) <a href='https://github.com/ekelokorpi'>https://github.com/ekelokorpi</a></p></div><div class="body"><p>Awesome JS run time provided by EsotericSoftware<br /><a href='https://github.com/EsotericSoftware/spine-runtimes'>https://github.com/EsotericSoftware/spine-runtimes</a></p></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1118"><td class="docs"><div class="pilwrap"><a href="#section-1118" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The Spine loader is used to load in JSON spine data<br />To generate the data you need to use <a href='http://esotericsoftware.com/'>http://esotericsoftware.com/</a> and export in the "JSON" format<br />Due to a clash of names  You will need to change the extension of the spine file from *.json to *.anim for it to load<br />See example 12 (<a href='http://www.goodboydigital.com/pixijs/examples/12/'>http://www.goodboydigital.com/pixijs/examples/12/</a>) to see a working example and check out the source<br />You will need to generate a sprite sheet to accompany the spine data<br />When loaded this class will dispatch a "loaded" event</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{String} </span><span class="dox_type">url</span><span>- The url of the JSON file</span></div><div class="dox_tag_detail"><span>{Boolean} </span><span class="dox_type">crossorigin</span><span>- Whether requests should be treated as crossorigin</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">crossorigin</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">EventTarget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div></td></tr><tr id="section-1119"><td class="docs"><div class="pilwrap"><a href="#section-1119" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The url of the bitmap font data</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">String</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span></pre></div></td></tr><tr id="section-1120"><td class="docs"><div class="pilwrap"><a href="#section-1120" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Whether the requests should be treated as cross origin</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span> <span class="o">=</span> <span class="nx">crossorigin</span><span class="p">;</span></pre></div></td></tr><tr id="section-1121"><td class="docs"><div class="pilwrap"><a href="#section-1121" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>[read-only] Whether the data has loaded yet</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Boolean</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span><span class="p">;</span></pre></div></td></tr><tr id="section-1122"><td class="docs"><div class="pilwrap"><a href="#section-1122" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Loads the JSON data</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">jsonLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">JsonLoader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crossorigin</span><span class="p">);</span>
    <span class="nx">jsonLoader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;loaded&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">json</span><span class="p">;</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">onLoaded</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="nx">jsonLoader</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1123"><td class="docs"><div class="pilwrap"><a href="#section-1123" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Invoke when JSON file is loaded</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SpineLoader</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onLoaded</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;loaded&quot;</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="k">this</span><span class="p">});</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1124"><td class="docs"><div class="pilwrap"><a href="#section-1124" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1125"><td class="docs"><div class="pilwrap"><a href="#section-1125" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is the base class for creating a pixi.js filter. Currently only webGL supports filters.<br />If you want to make a custom filter this should be your base class.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span> </span><span class="dox_type">fragmentSrc</span></div><div class="dox_tag_detail"><span> </span><span class="dox_type">uniforms</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fragmentSrc</span><span class="p">,</span> <span class="nx">uniforms</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr><tr id="section-1126"><td class="docs"><div class="pilwrap"><a href="#section-1126" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>An array of passes - some filters contain a few steps this array simply stores the steps in a liniear fashion.<br />For example the blur filter has two passes blurX and blurY.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1127"><td class="docs"><div class="pilwrap"><a href="#section-1127" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property shaders</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">shaders</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></td></tr><tr id="section-1128"><td class="docs"><div class="pilwrap"><a href="#section-1128" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property uniforms</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">object</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="nx">uniforms</span> <span class="o">||</span> <span class="p">{};</span></pre></div></td></tr><tr id="section-1129"><td class="docs"><div class="pilwrap"><a href="#section-1129" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@property fragmentSrc</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="nx">fragmentSrc</span> <span class="o">||</span> <span class="p">[];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1130"><td class="docs"><div class="pilwrap"><a href="#section-1130" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1131"><td class="docs"><div class="pilwrap"><a href="#section-1131" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The AlphaMaskFilter class uses the pixel values from the specified texture (called the displacement map) to perform a displacement of an object.<br />You can use this filter to apply all manor of crazy warping effects<br />Currently the r property of the texture is used to offset the x and the g propery of the texture is used to offset the y.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture used for the displacemtent map * must be power of 2 texture at the moment</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span>
    <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_powerOf2</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-1132"><td class="docs"><div class="pilwrap"><a href="#section-1132" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">mask</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;sampler2D&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="nx">texture</span><span class="p">},</span>
        <span class="nx">mapDimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">5112</span><span class="p">}},</span>
        <span class="nx">dimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;4fv&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]}</span>
    <span class="p">};</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTextureLoaded</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D mask;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offset;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 mapDimensions;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 mapCords = vTextureCoord.xy;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords += (dimensions.zw + offset)/ dimensions.xy ;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords.y *= -1.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords.y += 1.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords *= dimensions.xy / mapDimensions;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   vec4 original =  texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   float maskAlpha =  texture2D(mask, mapCords).r;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   original *= maskAlpha;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1133"><td class="docs"><div class="pilwrap"><a href="#section-1133" class="pilcrow">&#182;</a></div><p>'   original.rgb *= maskAlpha;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;   gl_FragColor =  original;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1134"><td class="docs"><div class="pilwrap"><a href="#section-1134" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor = gl</em>FragColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTextureLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1135"><td class="docs"><div class="pilwrap"><a href="#section-1135" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The texture used for the displacemtent map * must be power of 2 texture at the moment</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">AlphaMaskFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mask</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1136"><td class="docs"><div class="pilwrap"><a href="#section-1136" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1137"><td class="docs"><div class="pilwrap"><a href="#section-1137" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The ColorMatrixFilter class lets you apply a 4x4 matrix transformation on the RGBA<br />color and alpha values of every pixel on your displayObject to produce a result<br />with a new set of RGBA color and alpha values. Its pretty powerful!</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorMatrixFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1138"><td class="docs"><div class="pilwrap"><a href="#section-1138" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">matrix</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;mat4&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>
                                       <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>
                                       <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>
                                       <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float invert;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform mat4 matrix;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1139"><td class="docs"><div class="pilwrap"><a href="#section-1139" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor = gl</em>FragColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorMatrixFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorMatrixFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorMatrixFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1140"><td class="docs"><div class="pilwrap"><a href="#section-1140" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the matrix of the color matrix filter</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Array</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorMatrixFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;matrix&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">matrix</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">matrix</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1141"><td class="docs"><div class="pilwrap"><a href="#section-1141" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1142"><td class="docs"><div class="pilwrap"><a href="#section-1142" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This turns your displayObjects to black and white.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">GrayFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1143"><td class="docs"><div class="pilwrap"><a href="#section-1143" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">gray</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float gray;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1144"><td class="docs"><div class="pilwrap"><a href="#section-1144" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor = gl</em>FragColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">GrayFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">GrayFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">GrayFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1145"><td class="docs"><div class="pilwrap"><a href="#section-1145" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The strength of the gray. 1 will make the object black and white, 0 will make the object its normal color</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">GrayFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">gray</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">gray</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1146"><td class="docs"><div class="pilwrap"><a href="#section-1146" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1147"><td class="docs"><div class="pilwrap"><a href="#section-1147" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The DisplacementFilter class uses the pixel values from the specified texture (called the displacement map) to perform a displacement of an object.<br />You can use this filter to apply all manor of crazy warping effects<br />Currently the r property of the texture is used offset the x and the g propery of the texture is used to offset the y.</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span>{Texture} </span><span class="dox_type">texture</span><span>- The texture used for the displacemtent map * must be power of 2 texture at the moment</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">texture</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span>
    <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">_powerOf2</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div></td></tr><tr id="section-1148"><td class="docs"><div class="pilwrap"><a href="#section-1148" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">displacementMap</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;sampler2D&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="nx">texture</span><span class="p">},</span>
        <span class="nx">scale</span><span class="o">:</span>           <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">30</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">30</span><span class="p">}},</span>
        <span class="nx">offset</span><span class="o">:</span>          <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">0</span><span class="p">}},</span>
        <span class="nx">mapDimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">5112</span><span class="p">}},</span>
        <span class="nx">dimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;4fv&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]}</span>
    <span class="p">};</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">hasLoaded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">texture</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onTextureLoaded</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="nx">texture</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D displacementMap;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 scale;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offset;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 mapDimensions;&#39;</span><span class="p">,</span><span class="c1">// = vec2(256.0, 256.0);&#39;,</span></pre></div></td></tr><tr id="section-1149"><td class="docs"><div class="pilwrap"><a href="#section-1149" class="pilcrow">&#182;</a></div><p>'const vec2 textureDimensions = vec2(750.0, 750.0);',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 mapCords = vTextureCoord.xy;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1150"><td class="docs"><div class="pilwrap"><a href="#section-1150" class="pilcrow">&#182;</a></div><p>'   mapCords -= ;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;   mapCords += (dimensions.zw + offset)/ dimensions.xy ;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords.y *= -1.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   mapCords.y += 1.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 matSample = texture2D(displacementMap, mapCords).xy;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   matSample -= 0.5;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   matSample *= scale;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   matSample /= mapDimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 cord = vTextureCoord;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1151"><td class="docs"><div class="pilwrap"><a href="#section-1151" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor =  texture2D(displacementMap, cord);',
  '   gl</em>FragColor = gl_FragColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">;</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onTextureLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">displacementMap</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">mapDimensions</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">displacementMap</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">displacementMap</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">baseTexture</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">boundLoadedFunction</span><span class="p">);</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1152"><td class="docs"><div class="pilwrap"><a href="#section-1152" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The texture used for the displacemtent map * must be power of 2 texture at the moment</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Texture</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">displacementMap</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">displacementMap</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1153"><td class="docs"><div class="pilwrap"><a href="#section-1153" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The multiplier used to scale the displacement result from the map calculation.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1154"><td class="docs"><div class="pilwrap"><a href="#section-1154" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The offset used to move the displacement map.</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DisplacementFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1155"><td class="docs"><div class="pilwrap"><a href="#section-1155" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1156"><td class="docs"><div class="pilwrap"><a href="#section-1156" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This filter applies a pixelate effect making display objects appear 'blocky'</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixelateFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1157"><td class="docs"><div class="pilwrap"><a href="#section-1157" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">invert</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">0</span><span class="p">},</span>
        <span class="nx">dimensions</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;4fv&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])},</span>
        <span class="nx">pixelSize</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">10</span><span class="p">}}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 testDim;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 pixelSize;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 coord = vTextureCoord;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   vec2 size = dimensions.xy/pixelSize;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, color);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixelateFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixelateFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixelateFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1158"><td class="docs"><div class="pilwrap"><a href="#section-1158" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This a point that describes the size of the blocs. x is the width of the block and y is the the height</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">PixelateFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">pixelSize</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">pixelSize</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1159"><td class="docs"><div class="pilwrap"><a href="#section-1159" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1160"><td class="docs"><div class="pilwrap"><a href="#section-1160" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">blur</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">512</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float blur;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec4 sum = vec4(0.0);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   gl_FragColor = sum;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">)</span> <span class="o">*</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1161"><td class="docs"><div class="pilwrap"><a href="#section-1161" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1162"><td class="docs"><div class="pilwrap"><a href="#section-1162" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">blur</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">512</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float blur;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec4 sum = vec4(0.0);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   gl_FragColor = sum;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-1163"><td class="docs"><div class="pilwrap"><a href="#section-1163" class="pilcrow">&#182;</a></div><p>this.padding = value;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">)</span> <span class="o">*</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1164"><td class="docs"><div class="pilwrap"><a href="#section-1164" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1165"><td class="docs"><div class="pilwrap"><a href="#section-1165" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The BlurFilter applies a Gaussian blur to an object.<br />The strength of the blur can be set for x- and y-axis separately (always relative to the stage).</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurXFilter</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">blurYFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">blurYFilter</span><span class="p">];</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-1166"><td class="docs"><div class="pilwrap"><a href="#section-1166" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the strength of both the blurX and blurY properties simultaneously</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span><span class="p">.</span><span class="nx">blur</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span><span class="p">.</span><span class="nx">blur</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blurYFilter</span><span class="p">.</span><span class="nx">blur</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1167"><td class="docs"><div class="pilwrap"><a href="#section-1167" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the strength of the blurX property</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blurX&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span><span class="p">.</span><span class="nx">blur</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">blurXFilter</span><span class="p">.</span><span class="nx">blur</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1168"><td class="docs"><div class="pilwrap"><a href="#section-1168" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Sets the strength of the blurX property</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blurY&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">blurYFilter</span><span class="p">.</span><span class="nx">blur</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">blurYFilter</span><span class="p">.</span><span class="nx">blur</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1169"><td class="docs"><div class="pilwrap"><a href="#section-1169" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1170"><td class="docs"><div class="pilwrap"><a href="#section-1170" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This inverts your displayObjects colors.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InvertFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1171"><td class="docs"><div class="pilwrap"><a href="#section-1171" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">invert</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float invert;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1172"><td class="docs"><div class="pilwrap"><a href="#section-1172" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor.rgb = gl</em>FragColor.rgb  * gl<em>FragColor.a;',
 '   gl</em>FragColor = gl_FragColor * vColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">InvertFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">InvertFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">InvertFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1173"><td class="docs"><div class="pilwrap"><a href="#section-1173" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The strength of the invert. 1 will fully invert the colors, 0 will make the object its normal color</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">InvertFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;invert&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">invert</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">invert</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1174"><td class="docs"><div class="pilwrap"><a href="#section-1174" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1175"><td class="docs"><div class="pilwrap"><a href="#section-1175" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This applies a sepia effect to your displayObjects.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SepiaFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1176"><td class="docs"><div class="pilwrap"><a href="#section-1176" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">sepia</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float sepia;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-1177"><td class="docs"><div class="pilwrap"><a href="#section-1177" class="pilcrow">&#182;</a></div><p>'   gl<em>FragColor = gl</em>FragColor * vColor;',</p>
</td><td class="code"><div class="highlight"><pre>        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">SepiaFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">SepiaFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">SepiaFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1178"><td class="docs"><div class="pilwrap"><a href="#section-1178" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The strength of the sepia. 1 will apply the full sepia effect, 0 will make the object its normal color</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">SepiaFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;sepia&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">sepia</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">sepia</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1179"><td class="docs"><div class="pilwrap"><a href="#section-1179" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1180"><td class="docs"><div class="pilwrap"><a href="#section-1180" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This filter applies a twist effect making display objects appear twisted in the given direction</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1181"><td class="docs"><div class="pilwrap"><a href="#section-1181" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">radius</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="mf">0.5</span><span class="p">},</span>
        <span class="nx">angle</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="mi">5</span><span class="p">},</span>
        <span class="nx">offset</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mf">0.5</span><span class="p">}}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;uniform float radius;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float angle;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 offset;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 coord = vTextureCoord - offset;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   float distance = length(coord);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   if (distance &lt; radius) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       float ratio = (radius - distance) / radius;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       float angleMod = ratio * ratio * angle;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       float s = sin(angleMod);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       float c = cos(angleMod);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   }&#39;</span><span class="p">,</span>

        <span class="s1">&#39;   gl_FragColor = texture2D(uSampler, coord+offset);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1182"><td class="docs"><div class="pilwrap"><a href="#section-1182" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This point describes the the offset of the twist</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Point</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1183"><td class="docs"><div class="pilwrap"><a href="#section-1183" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This radius describes size of the twist</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">radius</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">radius</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1184"><td class="docs"><div class="pilwrap"><a href="#section-1184" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This radius describes angle of the twist</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">TwistFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">angle</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">angle</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1185"><td class="docs"><div class="pilwrap"><a href="#section-1185" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1186"><td class="docs"><div class="pilwrap"><a href="#section-1186" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This lowers the color depth of your image by the given amount, producing an image with a smaller palette.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorStepFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1187"><td class="docs"><div class="pilwrap"><a href="#section-1187" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">step</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">5</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float step;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec4 color = texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   color = floor(color * step) / step;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = color;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorStepFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorStepFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorStepFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1188"><td class="docs"><div class="pilwrap"><a href="#section-1188" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>The number of steps.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">ColorStepFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1189"><td class="docs"><div class="pilwrap"><a href="#section-1189" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23<br />original filter: <a href='https://github.com/evanw/glfx.js/blob/master/src/filters/fun/dotscreen.js'>https://github.com/evanw/glfx.js/blob/master/src/filters/fun/dotscreen.js</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-1190"><td class="docs"><div class="pilwrap"><a href="#section-1190" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This filter applies a dotscreen effect making display objects appear to be made out of black and white halftone dots like an old printer</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1191"><td class="docs"><div class="pilwrap"><a href="#section-1191" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">scale</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span>
        <span class="nx">angle</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="mi">5</span><span class="p">},</span>
        <span class="nx">dimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;4fv&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;uniform float angle;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float scale;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;float pattern() {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   float s = sin(angle), c = cos(angle);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 tex = vTextureCoord * dimensions.xy;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec2 point = vec2(&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       c * tex.x - s * tex.y,&#39;</span><span class="p">,</span>
        <span class="s1">&#39;       s * tex.x + c * tex.y&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   ) * scale;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   return (sin(point.x) * sin(point.y)) * 4.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main() {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   vec4 color = texture2D(uSampler, vTextureCoord);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   float average = (color.r + color.g + color.b) / 3.0;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span><span class="p">;</span></pre></div></td></tr><tr id="section-1192"><td class="docs"><div class="pilwrap"><a href="#section-1192" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This describes the the scale</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1193"><td class="docs"><div class="pilwrap"><a href="#section-1193" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This radius describes angle</p></div><div class="details"><div class="dox_tag_title">Type</div><div class="dox_tag_detail"><span class="dox_type">Number</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">DotScreenFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">angle</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">angle</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1194"><td class="docs"><div class="pilwrap"><a href="#section-1194" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CrossHatchFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1195"><td class="docs"><div class="pilwrap"><a href="#section-1195" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">blur</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;1f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">512</span><span class="p">}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform float blur;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);&#39;</span><span class="p">,</span>

        <span class="s1">&#39;    if (lum &lt; 1.00) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        }&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    }&#39;</span><span class="p">,</span>

        <span class="s1">&#39;    if (lum &lt; 0.75) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        }&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    }&#39;</span><span class="p">,</span>

        <span class="s1">&#39;    if (lum &lt; 0.50) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        }&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    }&#39;</span><span class="p">,</span>

        <span class="s1">&#39;    if (lum &lt; 0.3) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);&#39;</span><span class="p">,</span>
        <span class="s1">&#39;        }&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    }&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CrossHatchFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">CrossHatchFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">BlurYFilter</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">CrossHatchFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-1196"><td class="docs"><div class="pilwrap"><a href="#section-1196" class="pilcrow">&#182;</a></div><p>this.padding = value;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">)</span> <span class="o">*</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1197"><td class="docs"><div class="pilwrap"><a href="#section-1197" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RGBSplitFilter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span></pre></div></td></tr><tr id="section-1198"><td class="docs"><div class="pilwrap"><a href="#section-1198" class="pilcrow">&#182;</a></div><p>set the uniforms</p>
</td><td class="code"><div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">red</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">20</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">20</span><span class="p">}},</span>
        <span class="nx">green</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="p">{</span><span class="nx">x</span><span class="o">:-</span><span class="mi">20</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">20</span><span class="p">}},</span>
        <span class="nx">blue</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="mi">20</span><span class="p">,</span> <span class="nx">y</span><span class="o">:-</span><span class="mi">20</span><span class="p">}},</span>
        <span class="nx">dimensions</span><span class="o">:</span>   <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;4fv&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]}</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fragmentSrc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;precision mediump float;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec2 vTextureCoord;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;varying vec4 vColor;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 red;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 green;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec2 blue;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform vec4 dimensions;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;uniform sampler2D uSampler;&#39;</span><span class="p">,</span>

        <span class="s1">&#39;void main(void) {&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;}&#39;</span>
    <span class="p">];</span>
<span class="p">};</span>

<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RGBSplitFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">AbstractFilter</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">);</span>
<span class="nx">PIXI</span><span class="p">.</span><span class="nx">RGBSplitFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">.</span><span class="nx">RGBSplitFilter</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">.</span><span class="nx">RGBSplitFilter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-1199"><td class="docs"><div class="pilwrap"><a href="#section-1199" class="pilcrow">&#182;</a></div><p>this.padding = value;</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">blur</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7000</span><span class="p">)</span> <span class="o">*</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span></pre></div></td></tr><tr id="section-1200"><td class="docs"><div class="pilwrap"><a href="#section-1200" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>@author Mat Groves <a href='http://matgroves.com/'>http://matgroves.com/</a> @Doormat23</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">exports</span><span class="p">.</span><span class="nx">PIXI</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">define</span><span class="p">(</span><span class="nx">PIXI</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">PIXI</span> <span class="o">=</span> <span class="nx">PIXI</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Dec 15 2014 18:42:17 GMT+0100 (CET)  </div></div></body></html>